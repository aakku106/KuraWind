const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-D7OzDwTN.js","assets/Users-BRGrCWaK.js","assets/NewUser-NyPveeG4.js","assets/Home-DX29NHW-.js","assets/messages-CqlhHQyZ.js","assets/Home-CaDLeWTA.css","assets/Chat-CDV2AL_c.js","assets/index-DiO1dPfR.js","assets/iconBase-CxOQWq9U.js"])))=>i.map(i=>d[i]);
(function(){const ft=document.createElement("link").relList;if(ft&&ft.supports&&ft.supports("modulepreload"))return;for(const K of document.querySelectorAll('link[rel="modulepreload"]'))R(K);new MutationObserver(K=>{for(const ct of K)if(ct.type==="childList")for(const Tt of ct.addedNodes)Tt.tagName==="LINK"&&Tt.rel==="modulepreload"&&R(Tt)}).observe(document,{childList:!0,subtree:!0});function it(K){const ct={};return K.integrity&&(ct.integrity=K.integrity),K.referrerPolicy&&(ct.referrerPolicy=K.referrerPolicy),K.crossOrigin==="use-credentials"?ct.credentials="include":K.crossOrigin==="anonymous"?ct.credentials="omit":ct.credentials="same-origin",ct}function R(K){if(K.ep)return;K.ep=!0;const ct=it(K);fetch(K.href,ct)}})();var Aa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nm(V){return V&&V.__esModule&&Object.prototype.hasOwnProperty.call(V,"default")?V.default:V}var Ju={exports:{}},pr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dd;function im(){if(Dd)return pr;Dd=1;var V=Symbol.for("react.transitional.element"),ft=Symbol.for("react.fragment");function it(R,K,ct){var Tt=null;if(ct!==void 0&&(Tt=""+ct),K.key!==void 0&&(Tt=""+K.key),"key"in K){ct={};for(var Nt in K)Nt!=="key"&&(ct[Nt]=K[Nt])}else ct=K;return K=ct.ref,{$$typeof:V,type:R,key:Tt,ref:K!==void 0?K:null,props:ct}}return pr.Fragment=ft,pr.jsx=it,pr.jsxs=it,pr}var Ld;function am(){return Ld||(Ld=1,Ju.exports=im()),Ju.exports}var It=am(),Wu={exports:{}},gt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kd;function sm(){if(kd)return gt;kd=1;var V=Symbol.for("react.transitional.element"),ft=Symbol.for("react.portal"),it=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),ct=Symbol.for("react.consumer"),Tt=Symbol.for("react.context"),Nt=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),D=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),vt=Symbol.iterator;function rt(v){return v===null||typeof v!="object"?null:(v=vt&&v[vt]||v["@@iterator"],typeof v=="function"?v:null)}var ht={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kt=Object.assign,Je={};function Se(v,z,j){this.props=v,this.context=z,this.refs=Je,this.updater=j||ht}Se.prototype.isReactComponent={},Se.prototype.setState=function(v,z){if(typeof v!="object"&&typeof v!="function"&&v!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,v,z,"setState")},Se.prototype.forceUpdate=function(v){this.updater.enqueueForceUpdate(this,v,"forceUpdate")};function ti(){}ti.prototype=Se.prototype;function hn(v,z,j){this.props=v,this.context=z,this.refs=Je,this.updater=j||ht}var ce=hn.prototype=new ti;ce.constructor=hn,kt(ce,Se.prototype),ce.isPureReactComponent=!0;var w=Array.isArray,bt={H:null,A:null,T:null,S:null,V:null},ge=Object.prototype.hasOwnProperty;function Ne(v,z,j,I,$,At){return j=At.ref,{$$typeof:V,type:v,key:z,ref:j!==void 0?j:null,props:At}}function De(v,z){return Ne(v.type,z,void 0,void 0,void 0,v.props)}function ie(v){return typeof v=="object"&&v!==null&&v.$$typeof===V}function wi(v){var z={"=":"=0",":":"=2"};return"$"+v.replace(/[=:]/g,function(j){return z[j]})}var h=/\/+/g;function Wt(v,z){return typeof v=="object"&&v!==null&&v.key!=null?wi(""+v.key):z.toString(36)}function Dn(){}function M(v){switch(v.status){case"fulfilled":return v.value;case"rejected":throw v.reason;default:switch(typeof v.status=="string"?v.then(Dn,Dn):(v.status="pending",v.then(function(z){v.status==="pending"&&(v.status="fulfilled",v.value=z)},function(z){v.status==="pending"&&(v.status="rejected",v.reason=z)})),v.status){case"fulfilled":return v.value;case"rejected":throw v.reason}}throw v}function Rt(v,z,j,I,$){var At=typeof v;(At==="undefined"||At==="boolean")&&(v=null);var ot=!1;if(v===null)ot=!0;else switch(At){case"bigint":case"string":case"number":ot=!0;break;case"object":switch(v.$$typeof){case V:case ft:ot=!0;break;case Q:return ot=v._init,Rt(ot(v._payload),z,j,I,$)}}if(ot)return $=$(v),ot=I===""?"."+Wt(v,0):I,w($)?(j="",ot!=null&&(j=ot.replace(h,"$&/")+"/"),Rt($,z,j,"",function(dn){return dn})):$!=null&&(ie($)&&($=De($,j+($.key==null||v&&v.key===$.key?"":(""+$.key).replace(h,"$&/")+"/")+ot)),z.push($)),1;ot=0;var Ee=I===""?".":I+":";if(w(v))for(var zt=0;zt<v.length;zt++)I=v[zt],At=Ee+Wt(I,zt),ot+=Rt(I,z,j,At,$);else if(zt=rt(v),typeof zt=="function")for(v=zt.call(v),zt=0;!(I=v.next()).done;)I=I.value,At=Ee+Wt(I,zt++),ot+=Rt(I,z,j,At,$);else if(At==="object"){if(typeof v.then=="function")return Rt(M(v),z,j,I,$);throw z=String(v),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return ot}function U(v,z,j){if(v==null)return v;var I=[],$=0;return Rt(v,I,"","",function(At){return z.call(j,At,$++)}),I}function q(v){if(v._status===-1){var z=v._result;z=z(),z.then(function(j){(v._status===0||v._status===-1)&&(v._status=1,v._result=j)},function(j){(v._status===0||v._status===-1)&&(v._status=2,v._result=j)}),v._status===-1&&(v._status=0,v._result=z)}if(v._status===1)return v._result.default;throw v._result}var F=typeof reportError=="function"?reportError:function(v){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof v=="object"&&v!==null&&typeof v.message=="string"?String(v.message):String(v),error:v});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",v);return}console.error(v)};function Mt(){}return gt.Children={map:U,forEach:function(v,z,j){U(v,function(){z.apply(this,arguments)},j)},count:function(v){var z=0;return U(v,function(){z++}),z},toArray:function(v){return U(v,function(z){return z})||[]},only:function(v){if(!ie(v))throw Error("React.Children.only expected to receive a single React element child.");return v}},gt.Component=Se,gt.Fragment=it,gt.Profiler=K,gt.PureComponent=hn,gt.StrictMode=R,gt.Suspense=J,gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=bt,gt.__COMPILER_RUNTIME={__proto__:null,c:function(v){return bt.H.useMemoCache(v)}},gt.cache=function(v){return function(){return v.apply(null,arguments)}},gt.cloneElement=function(v,z,j){if(v==null)throw Error("The argument must be a React element, but you passed "+v+".");var I=kt({},v.props),$=v.key,At=void 0;if(z!=null)for(ot in z.ref!==void 0&&(At=void 0),z.key!==void 0&&($=""+z.key),z)!ge.call(z,ot)||ot==="key"||ot==="__self"||ot==="__source"||ot==="ref"&&z.ref===void 0||(I[ot]=z[ot]);var ot=arguments.length-2;if(ot===1)I.children=j;else if(1<ot){for(var Ee=Array(ot),zt=0;zt<ot;zt++)Ee[zt]=arguments[zt+2];I.children=Ee}return Ne(v.type,$,void 0,void 0,At,I)},gt.createContext=function(v){return v={$$typeof:Tt,_currentValue:v,_currentValue2:v,_threadCount:0,Provider:null,Consumer:null},v.Provider=v,v.Consumer={$$typeof:ct,_context:v},v},gt.createElement=function(v,z,j){var I,$={},At=null;if(z!=null)for(I in z.key!==void 0&&(At=""+z.key),z)ge.call(z,I)&&I!=="key"&&I!=="__self"&&I!=="__source"&&($[I]=z[I]);var ot=arguments.length-2;if(ot===1)$.children=j;else if(1<ot){for(var Ee=Array(ot),zt=0;zt<ot;zt++)Ee[zt]=arguments[zt+2];$.children=Ee}if(v&&v.defaultProps)for(I in ot=v.defaultProps,ot)$[I]===void 0&&($[I]=ot[I]);return Ne(v,At,void 0,void 0,null,$)},gt.createRef=function(){return{current:null}},gt.forwardRef=function(v){return{$$typeof:Nt,render:v}},gt.isValidElement=ie,gt.lazy=function(v){return{$$typeof:Q,_payload:{_status:-1,_result:v},_init:q}},gt.memo=function(v,z){return{$$typeof:D,type:v,compare:z===void 0?null:z}},gt.startTransition=function(v){var z=bt.T,j={};bt.T=j;try{var I=v(),$=bt.S;$!==null&&$(j,I),typeof I=="object"&&I!==null&&typeof I.then=="function"&&I.then(Mt,F)}catch(At){F(At)}finally{bt.T=z}},gt.unstable_useCacheRefresh=function(){return bt.H.useCacheRefresh()},gt.use=function(v){return bt.H.use(v)},gt.useActionState=function(v,z,j){return bt.H.useActionState(v,z,j)},gt.useCallback=function(v,z){return bt.H.useCallback(v,z)},gt.useContext=function(v){return bt.H.useContext(v)},gt.useDebugValue=function(){},gt.useDeferredValue=function(v,z){return bt.H.useDeferredValue(v,z)},gt.useEffect=function(v,z,j){var I=bt.H;if(typeof j=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return I.useEffect(v,z)},gt.useId=function(){return bt.H.useId()},gt.useImperativeHandle=function(v,z,j){return bt.H.useImperativeHandle(v,z,j)},gt.useInsertionEffect=function(v,z){return bt.H.useInsertionEffect(v,z)},gt.useLayoutEffect=function(v,z){return bt.H.useLayoutEffect(v,z)},gt.useMemo=function(v,z){return bt.H.useMemo(v,z)},gt.useOptimistic=function(v,z){return bt.H.useOptimistic(v,z)},gt.useReducer=function(v,z,j){return bt.H.useReducer(v,z,j)},gt.useRef=function(v){return bt.H.useRef(v)},gt.useState=function(v){return bt.H.useState(v)},gt.useSyncExternalStore=function(v,z,j){return bt.H.useSyncExternalStore(v,z,j)},gt.useTransition=function(){return bt.H.useTransition()},gt.version="19.1.1",gt}var xd;function gf(){return xd||(xd=1,Wu.exports=sm()),Wu.exports}var Ze=gf();const Rm=nm(Ze);var Fu={exports:{}},yr={},$u={exports:{}},tf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bd;function lm(){return Bd||(Bd=1,(function(V){function ft(U,q){var F=U.length;U.push(q);t:for(;0<F;){var Mt=F-1>>>1,v=U[Mt];if(0<K(v,q))U[Mt]=q,U[F]=v,F=Mt;else break t}}function it(U){return U.length===0?null:U[0]}function R(U){if(U.length===0)return null;var q=U[0],F=U.pop();if(F!==q){U[0]=F;t:for(var Mt=0,v=U.length,z=v>>>1;Mt<z;){var j=2*(Mt+1)-1,I=U[j],$=j+1,At=U[$];if(0>K(I,F))$<v&&0>K(At,I)?(U[Mt]=At,U[$]=F,Mt=$):(U[Mt]=I,U[j]=F,Mt=j);else if($<v&&0>K(At,F))U[Mt]=At,U[$]=F,Mt=$;else break t}}return q}function K(U,q){var F=U.sortIndex-q.sortIndex;return F!==0?F:U.id-q.id}if(V.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var ct=performance;V.unstable_now=function(){return ct.now()}}else{var Tt=Date,Nt=Tt.now();V.unstable_now=function(){return Tt.now()-Nt}}var J=[],D=[],Q=1,vt=null,rt=3,ht=!1,kt=!1,Je=!1,Se=!1,ti=typeof setTimeout=="function"?setTimeout:null,hn=typeof clearTimeout=="function"?clearTimeout:null,ce=typeof setImmediate<"u"?setImmediate:null;function w(U){for(var q=it(D);q!==null;){if(q.callback===null)R(D);else if(q.startTime<=U)R(D),q.sortIndex=q.expirationTime,ft(J,q);else break;q=it(D)}}function bt(U){if(Je=!1,w(U),!kt)if(it(J)!==null)kt=!0,ge||(ge=!0,Wt());else{var q=it(D);q!==null&&Rt(bt,q.startTime-U)}}var ge=!1,Ne=-1,De=5,ie=-1;function wi(){return Se?!0:!(V.unstable_now()-ie<De)}function h(){if(Se=!1,ge){var U=V.unstable_now();ie=U;var q=!0;try{t:{kt=!1,Je&&(Je=!1,hn(Ne),Ne=-1),ht=!0;var F=rt;try{e:{for(w(U),vt=it(J);vt!==null&&!(vt.expirationTime>U&&wi());){var Mt=vt.callback;if(typeof Mt=="function"){vt.callback=null,rt=vt.priorityLevel;var v=Mt(vt.expirationTime<=U);if(U=V.unstable_now(),typeof v=="function"){vt.callback=v,w(U),q=!0;break e}vt===it(J)&&R(J),w(U)}else R(J);vt=it(J)}if(vt!==null)q=!0;else{var z=it(D);z!==null&&Rt(bt,z.startTime-U),q=!1}}break t}finally{vt=null,rt=F,ht=!1}q=void 0}}finally{q?Wt():ge=!1}}}var Wt;if(typeof ce=="function")Wt=function(){ce(h)};else if(typeof MessageChannel<"u"){var Dn=new MessageChannel,M=Dn.port2;Dn.port1.onmessage=h,Wt=function(){M.postMessage(null)}}else Wt=function(){ti(h,0)};function Rt(U,q){Ne=ti(function(){U(V.unstable_now())},q)}V.unstable_IdlePriority=5,V.unstable_ImmediatePriority=1,V.unstable_LowPriority=4,V.unstable_NormalPriority=3,V.unstable_Profiling=null,V.unstable_UserBlockingPriority=2,V.unstable_cancelCallback=function(U){U.callback=null},V.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):De=0<U?Math.floor(1e3/U):5},V.unstable_getCurrentPriorityLevel=function(){return rt},V.unstable_next=function(U){switch(rt){case 1:case 2:case 3:var q=3;break;default:q=rt}var F=rt;rt=q;try{return U()}finally{rt=F}},V.unstable_requestPaint=function(){Se=!0},V.unstable_runWithPriority=function(U,q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var F=rt;rt=U;try{return q()}finally{rt=F}},V.unstable_scheduleCallback=function(U,q,F){var Mt=V.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?Mt+F:Mt):F=Mt,U){case 1:var v=-1;break;case 2:v=250;break;case 5:v=1073741823;break;case 4:v=1e4;break;default:v=5e3}return v=F+v,U={id:Q++,callback:q,priorityLevel:U,startTime:F,expirationTime:v,sortIndex:-1},F>Mt?(U.sortIndex=F,ft(D,U),it(J)===null&&U===it(D)&&(Je?(hn(Ne),Ne=-1):Je=!0,Rt(bt,F-Mt))):(U.sortIndex=v,ft(J,U),kt||ht||(kt=!0,ge||(ge=!0,Wt()))),U},V.unstable_shouldYield=wi,V.unstable_wrapCallback=function(U){var q=rt;return function(){var F=rt;rt=q;try{return U.apply(this,arguments)}finally{rt=F}}}})(tf)),tf}var qd;function rm(){return qd||(qd=1,$u.exports=lm()),$u.exports}var ef={exports:{}},Ue={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gd;function om(){if(Gd)return Ue;Gd=1;var V=gf();function ft(J){var D="https://react.dev/errors/"+J;if(1<arguments.length){D+="?args[]="+encodeURIComponent(arguments[1]);for(var Q=2;Q<arguments.length;Q++)D+="&args[]="+encodeURIComponent(arguments[Q])}return"Minified React error #"+J+"; visit "+D+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function it(){}var R={d:{f:it,r:function(){throw Error(ft(522))},D:it,C:it,L:it,m:it,X:it,S:it,M:it},p:0,findDOMNode:null},K=Symbol.for("react.portal");function ct(J,D,Q){var vt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K,key:vt==null?null:""+vt,children:J,containerInfo:D,implementation:Q}}var Tt=V.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Nt(J,D){if(J==="font")return"";if(typeof D=="string")return D==="use-credentials"?D:""}return Ue.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ue.createPortal=function(J,D){var Q=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!D||D.nodeType!==1&&D.nodeType!==9&&D.nodeType!==11)throw Error(ft(299));return ct(J,D,null,Q)},Ue.flushSync=function(J){var D=Tt.T,Q=R.p;try{if(Tt.T=null,R.p=2,J)return J()}finally{Tt.T=D,R.p=Q,R.d.f()}},Ue.preconnect=function(J,D){typeof J=="string"&&(D?(D=D.crossOrigin,D=typeof D=="string"?D==="use-credentials"?D:"":void 0):D=null,R.d.C(J,D))},Ue.prefetchDNS=function(J){typeof J=="string"&&R.d.D(J)},Ue.preinit=function(J,D){if(typeof J=="string"&&D&&typeof D.as=="string"){var Q=D.as,vt=Nt(Q,D.crossOrigin),rt=typeof D.integrity=="string"?D.integrity:void 0,ht=typeof D.fetchPriority=="string"?D.fetchPriority:void 0;Q==="style"?R.d.S(J,typeof D.precedence=="string"?D.precedence:void 0,{crossOrigin:vt,integrity:rt,fetchPriority:ht}):Q==="script"&&R.d.X(J,{crossOrigin:vt,integrity:rt,fetchPriority:ht,nonce:typeof D.nonce=="string"?D.nonce:void 0})}},Ue.preinitModule=function(J,D){if(typeof J=="string")if(typeof D=="object"&&D!==null){if(D.as==null||D.as==="script"){var Q=Nt(D.as,D.crossOrigin);R.d.M(J,{crossOrigin:Q,integrity:typeof D.integrity=="string"?D.integrity:void 0,nonce:typeof D.nonce=="string"?D.nonce:void 0})}}else D==null&&R.d.M(J)},Ue.preload=function(J,D){if(typeof J=="string"&&typeof D=="object"&&D!==null&&typeof D.as=="string"){var Q=D.as,vt=Nt(Q,D.crossOrigin);R.d.L(J,Q,{crossOrigin:vt,integrity:typeof D.integrity=="string"?D.integrity:void 0,nonce:typeof D.nonce=="string"?D.nonce:void 0,type:typeof D.type=="string"?D.type:void 0,fetchPriority:typeof D.fetchPriority=="string"?D.fetchPriority:void 0,referrerPolicy:typeof D.referrerPolicy=="string"?D.referrerPolicy:void 0,imageSrcSet:typeof D.imageSrcSet=="string"?D.imageSrcSet:void 0,imageSizes:typeof D.imageSizes=="string"?D.imageSizes:void 0,media:typeof D.media=="string"?D.media:void 0})}},Ue.preloadModule=function(J,D){if(typeof J=="string")if(D){var Q=Nt(D.as,D.crossOrigin);R.d.m(J,{as:typeof D.as=="string"&&D.as!=="script"?D.as:void 0,crossOrigin:Q,integrity:typeof D.integrity=="string"?D.integrity:void 0})}else R.d.m(J)},Ue.requestFormReset=function(J){R.d.r(J)},Ue.unstable_batchedUpdates=function(J,D){return J(D)},Ue.useFormState=function(J,D,Q){return Tt.H.useFormState(J,D,Q)},Ue.useFormStatus=function(){return Tt.H.useHostTransitionStatus()},Ue.version="19.1.1",Ue}var zd;function cm(){if(zd)return ef.exports;zd=1;function V(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(V)}catch(ft){console.error(ft)}}return V(),ef.exports=om(),ef.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hd;function um(){if(Hd)return yr;Hd=1;var V=rm(),ft=gf(),it=cm();function R(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function K(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ct(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Tt(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Nt(t){if(ct(t)!==t)throw Error(R(188))}function J(t){var e=t.alternate;if(!e){if(e=ct(t),e===null)throw Error(R(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var c=r.alternate;if(c===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===c.child){for(c=r.child;c;){if(c===n)return Nt(r),t;if(c===s)return Nt(r),e;c=c.sibling}throw Error(R(188))}if(n.return!==s.return)n=r,s=c;else{for(var d=!1,g=r.child;g;){if(g===n){d=!0,n=r,s=c;break}if(g===s){d=!0,s=r,n=c;break}g=g.sibling}if(!d){for(g=c.child;g;){if(g===n){d=!0,n=c,s=r;break}if(g===s){d=!0,s=c,n=r;break}g=g.sibling}if(!d)throw Error(R(189))}}if(n.alternate!==s)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?t:e}function D(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=D(t),e!==null)return e;t=t.sibling}return null}var Q=Object.assign,vt=Symbol.for("react.element"),rt=Symbol.for("react.transitional.element"),ht=Symbol.for("react.portal"),kt=Symbol.for("react.fragment"),Je=Symbol.for("react.strict_mode"),Se=Symbol.for("react.profiler"),ti=Symbol.for("react.provider"),hn=Symbol.for("react.consumer"),ce=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),bt=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),Ne=Symbol.for("react.memo"),De=Symbol.for("react.lazy"),ie=Symbol.for("react.activity"),wi=Symbol.for("react.memo_cache_sentinel"),h=Symbol.iterator;function Wt(t){return t===null||typeof t!="object"?null:(t=h&&t[h]||t["@@iterator"],typeof t=="function"?t:null)}var Dn=Symbol.for("react.client.reference");function M(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Dn?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case kt:return"Fragment";case Se:return"Profiler";case Je:return"StrictMode";case bt:return"Suspense";case ge:return"SuspenseList";case ie:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case ht:return"Portal";case ce:return(t.displayName||"Context")+".Provider";case hn:return(t._context.displayName||"Context")+".Consumer";case w:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ne:return e=t.displayName||null,e!==null?e:M(t.type)||"Memo";case De:e=t._payload,t=t._init;try{return M(t(e))}catch{}}return null}var Rt=Array.isArray,U=ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=it.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},Mt=[],v=-1;function z(t){return{current:t}}function j(t){0>v||(t.current=Mt[v],Mt[v]=null,v--)}function I(t,e){v++,Mt[v]=t.current,t.current=e}var $=z(null),At=z(null),ot=z(null),Ee=z(null);function zt(t,e){switch(I(ot,e),I(At,t),I($,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?ld(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=ld(e),t=rd(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}j($),I($,t)}function dn(){j($),j(At),j(ot)}function ts(t){t.memoizedState!==null&&I(Ee,t);var e=$.current,n=rd(e,t.type);e!==n&&(I(At,t),I($,n))}function es(t){At.current===t&&(j($),j(At)),Ee.current===t&&(j(Ee),fr._currentValue=F)}var ei=Object.prototype.hasOwnProperty,ns=V.unstable_scheduleCallback,is=V.unstable_cancelCallback,Ar=V.unstable_shouldYield,Or=V.unstable_requestPaint,qe=V.unstable_now,Oa=V.unstable_getCurrentPriorityLevel,Ta=V.unstable_ImmediatePriority,as=V.unstable_UserBlockingPriority,_t=V.unstable_NormalPriority,Tr=V.unstable_LowPriority,tl=V.unstable_IdlePriority,ss=V.log,Rr=V.unstable_setDisableYieldValue,Ui=null,xt=null;function Ft(t){if(typeof ss=="function"&&Rr(t),xt&&typeof xt.setStrictMode=="function")try{xt.setStrictMode(Ui,t)}catch{}}var Yt=Math.clz32?Math.clz32:Er,el=Math.log,_r=Math.LN2;function Er(t){return t>>>=0,t===0?32:31-(el(t)/_r|0)|0}var Ra=256,Ni=4194304;function gn(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function _a(t,e,n){var s=t.pendingLanes;if(s===0)return 0;var r=0,c=t.suspendedLanes,d=t.pingedLanes;t=t.warmLanes;var g=s&134217727;return g!==0?(s=g&~c,s!==0?r=gn(s):(d&=g,d!==0?r=gn(d):n||(n=g&~t,n!==0&&(r=gn(n))))):(g=s&~c,g!==0?r=gn(g):d!==0?r=gn(d):n||(n=s&~t,n!==0&&(r=gn(n)))),r===0?0:e!==0&&e!==r&&(e&c)===0&&(c=r&-r,n=e&-e,c>=n||c===32&&(n&4194048)!==0)?e:r}function Di(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function ls(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nl(){var t=Ra;return Ra<<=1,(Ra&4194048)===0&&(Ra=256),t}function Ea(){var t=Ni;return Ni<<=1,(Ni&62914560)===0&&(Ni=4194304),t}function ae(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Li(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Cr(t,e,n,s,r,c){var d=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var g=t.entanglements,y=t.expirationTimes,_=t.hiddenUpdates;for(n=d&~n;0<n;){var N=31-Yt(n),G=1<<N;g[N]=0,y[N]=-1;var E=_[N];if(E!==null)for(_[N]=null,N=0;N<E.length;N++){var C=E[N];C!==null&&(C.lane&=-536870913)}n&=~G}s!==0&&Mr(t,s,0),c!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=c&~(d&~e))}function Mr(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-Yt(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|n&4194090}function Ge(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Yt(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}function il(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function al(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function sl(){var t=q.p;return t!==0?t:(t=window.event,t===void 0?32:Ed(t.type))}function wr(t,e){var n=q.p;try{return q.p=t,e()}finally{q.p=n}}var mn=Math.random().toString(36).slice(2),ue="__reactFiber$"+mn,Ae="__reactProps$"+mn,ki="__reactContainer$"+mn,rs="__reactEvents$"+mn,yc="__reactListeners$"+mn,ll="__reactHandles$"+mn,Ur="__reactResources$"+mn,Ca="__reactMarker$"+mn;function rl(t){delete t[ue],delete t[Ae],delete t[rs],delete t[yc],delete t[ll]}function pn(t){var e=t[ue];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ki]||n[ue]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=fd(t);t!==null;){if(n=t[ue])return n;t=fd(t)}return e}t=n,n=t.parentNode}return null}function ni(t){if(t=t[ue]||t[ki]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function Ln(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(R(33))}function xi(t){var e=t[Ur];return e||(e=t[Ur]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function se(t){t[Ca]=!0}var at=new Set,Nr={};function ii(t,e){kn(t,e),kn(t+"Capture",e)}function kn(t,e){for(Nr[t]=e,t=0;t<e.length;t++)at.add(e[t])}var Dr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pt={},ol={};function vc(t){return ei.call(ol,t)?!0:ei.call(Pt,t)?!1:Dr.test(t)?ol[t]=!0:(Pt[t]=!0,!1)}function ai(t,e,n){if(vc(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Bi(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function yn(t,e,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+s)}}var cl,ul;function qi(t){if(cl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);cl=e&&e[1]||"",ul=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cl+t+ul}var os=!1;function cs(t,e){if(!t||os)return"";os=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var G=function(){throw Error()};if(Object.defineProperty(G.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(G,[])}catch(C){var E=C}Reflect.construct(t,[],G)}else{try{G.call()}catch(C){E=C}t.call(G.prototype)}}else{try{throw Error()}catch(C){E=C}(G=t())&&typeof G.catch=="function"&&G.catch(function(){})}}catch(C){if(C&&E&&typeof C.stack=="string")return[C.stack,E.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=s.DetermineComponentFrameRoot(),d=c[0],g=c[1];if(d&&g){var y=d.split(`
`),_=g.split(`
`);for(r=s=0;s<y.length&&!y[s].includes("DetermineComponentFrameRoot");)s++;for(;r<_.length&&!_[r].includes("DetermineComponentFrameRoot");)r++;if(s===y.length||r===_.length)for(s=y.length-1,r=_.length-1;1<=s&&0<=r&&y[s]!==_[r];)r--;for(;1<=s&&0<=r;s--,r--)if(y[s]!==_[r]){if(s!==1||r!==1)do if(s--,r--,0>r||y[s]!==_[r]){var N=`
`+y[s].replace(" at new "," at ");return t.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",t.displayName)),N}while(1<=s&&0<=r);break}}}finally{os=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?qi(n):""}function bc(t){switch(t.tag){case 26:case 27:case 5:return qi(t.type);case 16:return qi("Lazy");case 13:return qi("Suspense");case 19:return qi("SuspenseList");case 0:case 15:return cs(t.type,!1);case 11:return cs(t.type.render,!1);case 1:return cs(t.type,!0);case 31:return qi("Activity");default:return""}}function fl(t){try{var e="";do e+=bc(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function ze(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Lr(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Sc(t){var e=Lr(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,c=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(d){s=""+d,c.call(this,d)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(d){s=""+d},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function us(t){t._valueTracker||(t._valueTracker=Sc(t))}function an(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=Lr(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Gi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var zi=/[\n"\\]/g;function He(t){return t.replace(zi,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function hl(t,e,n,s,r,c,d,g){t.name="",d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?t.type=d:t.removeAttribute("type"),e!=null?d==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+ze(e)):t.value!==""+ze(e)&&(t.value=""+ze(e)):d!=="submit"&&d!=="reset"||t.removeAttribute("value"),e!=null?dl(t,d,ze(e)):n!=null?dl(t,d,ze(n)):s!=null&&t.removeAttribute("value"),r==null&&c!=null&&(t.defaultChecked=!!c),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?t.name=""+ze(g):t.removeAttribute("name")}function fs(t,e,n,s,r,c,d,g){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(t.type=c),e!=null||n!=null){if(!(c!=="submit"&&c!=="reset"||e!=null))return;n=n!=null?""+ze(n):"",e=e!=null?""+ze(e):n,g||e===t.value||(t.value=e),t.defaultValue=e}s=s??r,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=g?t.checked:!!s,t.defaultChecked=!!s,d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.name=d)}function dl(t,e,n){e==="number"&&Gi(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function xn(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+ze(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function kr(t,e,n){if(e!=null&&(e=""+ze(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+ze(n):""}function ee(t,e,n,s){if(e==null){if(s!=null){if(n!=null)throw Error(R(92));if(Rt(s)){if(1<s.length)throw Error(R(93));s=s[0]}n=s}n==null&&(n=""),e=n}n=ze(e),t.defaultValue=n,s=t.textContent,s===n&&s!==""&&s!==null&&(t.value=s)}function Z(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var xr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Oe(t,e,n){var s=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,n):typeof n!="number"||n===0||xr.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function Br(t,e,n){if(e!=null&&typeof e!="object")throw Error(R(62));if(t=t.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var r in e)s=e[r],e.hasOwnProperty(r)&&n[r]!==s&&Oe(t,r,s)}else for(var c in e)e.hasOwnProperty(c)&&Oe(t,c,e[c])}function hs(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ac=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ds(t){return qr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var gs=null;function Ma(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var si=null,Bn=null;function gl(t){var e=ni(t);if(e&&(t=e.stateNode)){var n=t[Ae]||null;t:switch(t=e.stateNode,e.type){case"input":if(hl(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+He(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=s[Ae]||null;if(!r)throw Error(R(90));hl(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)s=n[e],s.form===t.form&&an(s)}break t;case"textarea":kr(t,n.value,n.defaultValue);break t;case"select":e=n.value,e!=null&&xn(t,!!n.multiple,e,!1)}}}var wa=!1;function ml(t,e,n){if(wa)return t(e,n);wa=!0;try{var s=t(e);return s}finally{if(wa=!1,(si!==null||Bn!==null)&&(Xo(),si&&(e=si,t=Bn,Bn=si=null,gl(e),t)))for(e=0;e<t.length;e++)gl(t[e])}}function qn(t,e){var n=t.stateNode;if(n===null)return null;var s=n[Ae]||null;if(s===null)return null;n=s[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break t;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(R(231,e,typeof n));return n}var je=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gn=!1;if(je)try{var sn={};Object.defineProperty(sn,"passive",{get:function(){Gn=!0}}),window.addEventListener("test",sn,sn),window.removeEventListener("test",sn,sn)}catch{Gn=!1}var vn=null,ms=null,ps=null;function li(){if(ps)return ps;var t,e=ms,n=e.length,s,r="value"in vn?vn.value:vn.textContent,c=r.length;for(t=0;t<n&&e[t]===r[t];t++);var d=n-t;for(s=1;s<=d&&e[n-s]===r[c-s];s++);return ps=r.slice(t,1<s?1-s:void 0)}function Ua(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ys(){return!0}function Gr(){return!1}function Ce(t){function e(n,s,r,c,d){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var g in t)t.hasOwnProperty(g)&&(n=t[g],this[g]=n?n(c):c[g]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?ys:Gr,this.isPropagationStopped=Gr,this}return Q(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ys)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ys)},persist:function(){},isPersistent:ys}),e}var Bt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vs=Ce(Bt),Na=Q({},Bt,{view:0,detail:0}),Oc=Ce(Na),pl,bs,Da,Le=Q({},Na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ln,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Da&&(Da&&t.type==="mousemove"?(pl=t.screenX-Da.screenX,bs=t.screenY-Da.screenY):bs=pl=0,Da=t),pl)},movementY:function(t){return"movementY"in t?t.movementY:bs}}),yl=Ce(Le),Tc=Q({},Le,{dataTransfer:0}),Ss=Ce(Tc),Rc=Q({},Na,{relatedTarget:0}),vl=Ce(Rc),_c=Q({},Bt,{animationName:0,elapsedTime:0,pseudoElement:0}),Ec=Ce(_c),Cc=Q({},Bt,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zr=Ce(Cc),Hr=Q({},Bt,{data:0}),jr=Ce(Hr),Mc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ir={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function La(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ir[t])?!!e[t]:!1}function ln(){return La}var wc=Q({},Na,{key:function(t){if(t.key){var e=Mc[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ua(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vr[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ln,charCode:function(t){return t.type==="keypress"?Ua(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ua(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Uc=Ce(wc),Yr=Q({},Le,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pr=Ce(Yr),Nc=Q({},Na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ln}),Qr=Ce(Nc),Dc=Q({},Bt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lc=Ce(Dc),kc=Q({},Le,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Xr=Ce(kc),xc=Q({},Bt,{newState:0,oldState:0}),bl=Ce(xc),Kr=[9,13,27,32],ri=je&&"CompositionEvent"in window,Ve=null;je&&"documentMode"in document&&(Ve=document.documentMode);var Bc=je&&"TextEvent"in window&&!Ve,Zr=je&&(!ri||Ve&&8<Ve&&11>=Ve),Jr=" ",Wr=!1;function Fr(t,e){switch(t){case"keyup":return Kr.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $r(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var oi=!1;function qc(t,e){switch(t){case"compositionend":return $r(e);case"keypress":return e.which!==32?null:(Wr=!0,Jr);case"textInput":return t=e.data,t===Jr&&Wr?null:t;default:return null}}function to(t,e){if(oi)return t==="compositionend"||!ri&&Fr(t,e)?(t=li(),ps=ms=vn=null,oi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Zr&&e.locale!=="ko"?null:e.data;default:return null}}var Gc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eo(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Gc[t.type]:e==="textarea"}function Sl(t,e,n,s){si?Bn?Bn.push(s):Bn=[s]:si=s,e=$o(e,"onChange"),0<e.length&&(n=new vs("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var Hi=null,ji=null;function no(t){ed(t,0)}function ka(t){var e=Ln(t);if(an(e))return t}function io(t,e){if(t==="change")return e}var ao=!1;if(je){var Al;if(je){var As="oninput"in document;if(!As){var ci=document.createElement("div");ci.setAttribute("oninput","return;"),As=typeof ci.oninput=="function"}Al=As}else Al=!1;ao=Al&&(!document.documentMode||9<document.documentMode)}function Vi(){Hi&&(Hi.detachEvent("onpropertychange",Ol),ji=Hi=null)}function Ol(t){if(t.propertyName==="value"&&ka(ji)){var e=[];Sl(e,ji,t,Ma(t)),ml(no,e)}}function so(t,e,n){t==="focusin"?(Vi(),Hi=e,ji=n,Hi.attachEvent("onpropertychange",Ol)):t==="focusout"&&Vi()}function lo(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ka(ji)}function ro(t,e){if(t==="click")return ka(e)}function zc(t,e){if(t==="input"||t==="change")return ka(e)}function Tl(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ke=typeof Object.is=="function"?Object.is:Tl;function zn(t,e){if(ke(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!ei.call(e,r)||!ke(t[r],e[r]))return!1}return!0}function oo(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Os(t,e){var n=oo(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=oo(n)}}function Rl(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Rl(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Me(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Gi(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gi(t.document)}return e}function xa(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var _l=je&&"documentMode"in document&&11>=document.documentMode,Ii=null,El=null,ui=null,Ts=!1;function co(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ts||Ii==null||Ii!==Gi(s)||(s=Ii,"selectionStart"in s&&xa(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ui&&zn(ui,s)||(ui=s,s=$o(El,"onSelect"),0<s.length&&(e=new vs("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Ii)))}function fi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var hi={animationend:fi("Animation","AnimationEnd"),animationiteration:fi("Animation","AnimationIteration"),animationstart:fi("Animation","AnimationStart"),transitionrun:fi("Transition","TransitionRun"),transitionstart:fi("Transition","TransitionStart"),transitioncancel:fi("Transition","TransitionCancel"),transitionend:fi("Transition","TransitionEnd")},di={},uo={};je&&(uo=document.createElement("div").style,"AnimationEvent"in window||(delete hi.animationend.animation,delete hi.animationiteration.animation,delete hi.animationstart.animation),"TransitionEvent"in window||delete hi.transitionend.transition);function Hn(t){if(di[t])return di[t];if(!hi[t])return t;var e=hi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in uo)return di[t]=e[n];return t}var jn=Hn("animationend"),Rs=Hn("animationiteration"),fo=Hn("animationstart"),ho=Hn("transitionrun"),go=Hn("transitionstart"),Hc=Hn("transitioncancel"),mo=Hn("transitionend"),po=new Map,Yi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yi.push("scrollEnd");function le(t,e){po.set(t,e),ii(e,[t])}var yo=new WeakMap;function Ie(t,e){if(typeof t=="object"&&t!==null){var n=yo.get(t);return n!==void 0?n:(e={value:t,source:e,stack:fl(e)},yo.set(t,e),e)}return{value:t,source:e,stack:fl(e)}}var re=[],Pi=0,Cl=0;function _s(){for(var t=Pi,e=Cl=Pi=0;e<t;){var n=re[e];re[e++]=null;var s=re[e];re[e++]=null;var r=re[e];re[e++]=null;var c=re[e];if(re[e++]=null,s!==null&&r!==null){var d=s.pending;d===null?r.next=r:(r.next=d.next,d.next=r),s.pending=r}c!==0&&Es(n,r,c)}}function bn(t,e,n,s){re[Pi++]=t,re[Pi++]=e,re[Pi++]=n,re[Pi++]=s,Cl|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function me(t,e,n,s){return bn(t,e,n,s),Vn(t)}function Qi(t,e){return bn(t,null,null,e),Vn(t)}function Es(t,e,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n);for(var r=!1,c=t.return;c!==null;)c.childLanes|=n,s=c.alternate,s!==null&&(s.childLanes|=n),c.tag===22&&(t=c.stateNode,t===null||t._visibility&1||(r=!0)),t=c,c=c.return;return t.tag===3?(c=t.stateNode,r&&e!==null&&(r=31-Yt(n),t=c.hiddenUpdates,s=t[r],s===null?t[r]=[e]:s.push(e),e.lane=n|536870912),c):null}function Vn(t){if(50<ir)throw ir=0,Su=null,Error(R(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var gi={};function Ml(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xe(t,e,n,s){return new Ml(t,e,n,s)}function Ba(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Sn(t,e){var n=t.alternate;return n===null?(n=xe(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function vo(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function qa(t,e,n,s,r,c){var d=0;if(s=t,typeof t=="function")Ba(t)&&(d=1);else if(typeof t=="string")d=Ig(t,n,$.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case ie:return t=xe(31,n,e,r),t.elementType=ie,t.lanes=c,t;case kt:return mi(n.children,r,c,e);case Je:d=8,r|=24;break;case Se:return t=xe(12,n,e,r|2),t.elementType=Se,t.lanes=c,t;case bt:return t=xe(13,n,e,r),t.elementType=bt,t.lanes=c,t;case ge:return t=xe(19,n,e,r),t.elementType=ge,t.lanes=c,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ti:case ce:d=10;break t;case hn:d=9;break t;case w:d=11;break t;case Ne:d=14;break t;case De:d=16,s=null;break t}d=29,n=Error(R(130,t===null?"null":typeof t,"")),s=null}return e=xe(d,n,e,r),e.elementType=t,e.type=s,e.lanes=c,e}function mi(t,e,n,s){return t=xe(7,t,s,e),t.lanes=n,t}function wl(t,e,n){return t=xe(6,t,null,e),t.lanes=n,t}function Cs(t,e,n){return e=xe(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Xi=[],Ki=0,Ms=null,ws=0,we=[],Ye=0,An=null,On=1,Tn="";function pi(t,e){Xi[Ki++]=ws,Xi[Ki++]=Ms,Ms=t,ws=e}function bo(t,e,n){we[Ye++]=On,we[Ye++]=Tn,we[Ye++]=An,An=t;var s=On;t=Tn;var r=32-Yt(s)-1;s&=~(1<<r),n+=1;var c=32-Yt(e)+r;if(30<c){var d=r-r%5;c=(s&(1<<d)-1).toString(32),s>>=d,r-=d,On=1<<32-Yt(e)+r|n<<r|s,Tn=c+t}else On=1<<c|n<<r|s,Tn=t}function Ul(t){t.return!==null&&(pi(t,1),bo(t,1,0))}function Nl(t){for(;t===Ms;)Ms=Xi[--Ki],Xi[Ki]=null,ws=Xi[--Ki],Xi[Ki]=null;for(;t===An;)An=we[--Ye],we[Ye]=null,Tn=we[--Ye],we[Ye]=null,On=we[--Ye],we[Ye]=null}var pe=null,Qt=null,ut=!1,Rn=null,Pe=!1,yi=Error(R(519));function _n(t){var e=Error(R(418,""));throw Cn(Ie(e,t)),yi}function Dl(t){var e=t.stateNode,n=t.type,s=t.memoizedProps;switch(e[ue]=t,e[Ae]=s,n){case"dialog":yt("cancel",e),yt("close",e);break;case"iframe":case"object":case"embed":yt("load",e);break;case"video":case"audio":for(n=0;n<sr.length;n++)yt(sr[n],e);break;case"source":yt("error",e);break;case"img":case"image":case"link":yt("error",e),yt("load",e);break;case"details":yt("toggle",e);break;case"input":yt("invalid",e),fs(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),us(e);break;case"select":yt("invalid",e);break;case"textarea":yt("invalid",e),ee(e,s.value,s.defaultValue,s.children),us(e)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||s.suppressHydrationWarning===!0||sd(e.textContent,n)?(s.popover!=null&&(yt("beforetoggle",e),yt("toggle",e)),s.onScroll!=null&&yt("scroll",e),s.onScrollEnd!=null&&yt("scrollend",e),s.onClick!=null&&(e.onclick=tc),e=!0):e=!1,e||_n(t)}function Ll(t){for(pe=t.return;pe;)switch(pe.tag){case 5:case 13:Pe=!1;return;case 27:case 3:Pe=!0;return;default:pe=pe.return}}function En(t){if(t!==pe)return!1;if(!ut)return Ll(t),ut=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Bu(t.type,t.memoizedProps)),n=!n),n&&Qt&&_n(t),Ll(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(R(317));t:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){Qt=Nn(t.nextSibling);break t}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}Qt=null}}else e===27?(e=Qt,ma(t.type)?(t=Hu,Hu=null,Qt=t):Qt=e):Qt=pe?Nn(t.stateNode.nextSibling):null;return!0}function Zi(){Qt=pe=null,ut=!1}function Ji(){var t=Rn;return t!==null&&(Ke===null?Ke=t:Ke.push.apply(Ke,t),Rn=null),t}function Cn(t){Rn===null?Rn=[t]:Rn.push(t)}var Ga=z(null),rn=null,Mn=null;function on(t,e,n){I(Ga,e._currentValue),e._currentValue=n}function oe(t){t._currentValue=Ga.current,j(Ga)}function Wi(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function kl(t,e,n,s){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var c=r.dependencies;if(c!==null){var d=r.child;c=c.firstContext;t:for(;c!==null;){var g=c;c=r;for(var y=0;y<e.length;y++)if(g.context===e[y]){c.lanes|=n,g=c.alternate,g!==null&&(g.lanes|=n),Wi(c.return,n,t),s||(d=null);break t}c=g.next}}else if(r.tag===18){if(d=r.return,d===null)throw Error(R(341));d.lanes|=n,c=d.alternate,c!==null&&(c.lanes|=n),Wi(d,n,t),d=null}else d=r.child;if(d!==null)d.return=r;else for(d=r;d!==null;){if(d===t){d=null;break}if(r=d.sibling,r!==null){r.return=d.return,d=r;break}d=d.return}r=d}}function za(t,e,n,s){t=null;for(var r=e,c=!1;r!==null;){if(!c){if((r.flags&524288)!==0)c=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var d=r.alternate;if(d===null)throw Error(R(387));if(d=d.memoizedProps,d!==null){var g=r.type;ke(r.pendingProps.value,d.value)||(t!==null?t.push(g):t=[g])}}else if(r===Ee.current){if(d=r.alternate,d===null)throw Error(R(387));d.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(fr):t=[fr])}r=r.return}t!==null&&kl(e,t,n,s),e.flags|=262144}function Ha(t){for(t=t.firstContext;t!==null;){if(!ke(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function vi(t){rn=t,Mn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function fe(t){return xl(rn,t)}function Qe(t,e){return rn===null&&vi(t),xl(t,e)}function xl(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Mn===null){if(t===null)throw Error(R(308));Mn=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Mn=Mn.next=e;return n}var ja=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},So=V.unstable_scheduleCallback,Ao=V.unstable_NormalPriority,jt={$$typeof:ce,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function In(){return{controller:new ja,data:new Map,refCount:0}}function Va(t){t.refCount--,t.refCount===0&&So(Ao,function(){t.controller.abort()})}var Fi=null,Xt=0,$i=0,ta=null;function jc(t,e){if(Fi===null){var n=Fi=[];Xt=0,$i=Cu(),ta={status:"pending",value:void 0,then:function(s){n.push(s)}}}return Xt++,e.then(Oo,Oo),e}function Oo(){if(--Xt===0&&Fi!==null){ta!==null&&(ta.status="fulfilled");var t=Fi;Fi=null,$i=0,ta=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function Vc(t,e){var n=[],s={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(s.status="rejected",s.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),s}var To=U.S;U.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&jc(t,e),To!==null&&To(t,e)};var Yn=z(null);function Bl(){var t=Yn.current;return t!==null?t:Vt.pooledCache}function ea(t,e){e===null?I(Yn,Yn.current):I(Yn,e.pool)}function Ro(){var t=Bl();return t===null?null:{parent:jt._currentValue,pool:t}}var Ia=Error(R(460)),_o=Error(R(474)),Us=Error(R(542)),ql={then:function(){}};function Eo(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ya(){}function Co(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Ya,Ya),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,wo(t),t;default:if(typeof e.status=="string")e.then(Ya,Ya);else{if(t=Vt,t!==null&&100<t.shellSuspendCounter)throw Error(R(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=s}},function(s){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,wo(t),t}throw Pa=e,Ia}}var Pa=null;function Mo(){if(Pa===null)throw Error(R(459));var t=Pa;return Pa=null,t}function wo(t){if(t===Ia||t===Us)throw Error(R(483))}var wn=!1;function Ns(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gl(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Pn(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Qn(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,(Dt&2)!==0){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,e=Vn(t),Es(t,null,n),e}return bn(t,s,e,n),Vn(t)}function Qa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Ge(t,n)}}function zl(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,c=null;if(n=n.firstBaseUpdate,n!==null){do{var d={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};c===null?r=c=d:c=c.next=d,n=n.next}while(n!==null);c===null?r=c=e:c=c.next=e}else r=c=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:c,shared:s.shared,callbacks:s.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Hl=!1;function Xa(){if(Hl){var t=ta;if(t!==null)throw t}}function Ka(t,e,n,s){Hl=!1;var r=t.updateQueue;wn=!1;var c=r.firstBaseUpdate,d=r.lastBaseUpdate,g=r.shared.pending;if(g!==null){r.shared.pending=null;var y=g,_=y.next;y.next=null,d===null?c=_:d.next=_,d=y;var N=t.alternate;N!==null&&(N=N.updateQueue,g=N.lastBaseUpdate,g!==d&&(g===null?N.firstBaseUpdate=_:g.next=_,N.lastBaseUpdate=y))}if(c!==null){var G=r.baseState;d=0,N=_=y=null,g=c;do{var E=g.lane&-536870913,C=E!==g.lane;if(C?(Ot&E)===E:(s&E)===E){E!==0&&E===$i&&(Hl=!0),N!==null&&(N=N.next={lane:0,tag:g.tag,payload:g.payload,callback:null,next:null});t:{var lt=t,et=g;E=e;var Gt=n;switch(et.tag){case 1:if(lt=et.payload,typeof lt=="function"){G=lt.call(Gt,G,E);break t}G=lt;break t;case 3:lt.flags=lt.flags&-65537|128;case 0:if(lt=et.payload,E=typeof lt=="function"?lt.call(Gt,G,E):lt,E==null)break t;G=Q({},G,E);break t;case 2:wn=!0}}E=g.callback,E!==null&&(t.flags|=64,C&&(t.flags|=8192),C=r.callbacks,C===null?r.callbacks=[E]:C.push(E))}else C={lane:E,tag:g.tag,payload:g.payload,callback:g.callback,next:null},N===null?(_=N=C,y=G):N=N.next=C,d|=E;if(g=g.next,g===null){if(g=r.shared.pending,g===null)break;C=g,g=C.next,C.next=null,r.lastBaseUpdate=C,r.shared.pending=null}}while(!0);N===null&&(y=G),r.baseState=y,r.firstBaseUpdate=_,r.lastBaseUpdate=N,c===null&&(r.shared.lanes=0),fa|=d,t.lanes=d,t.memoizedState=G}}function na(t,e){if(typeof t!="function")throw Error(R(191,t));t.call(e)}function jl(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)na(n[t],e)}var Xn=z(null),Ds=z(0);function Ls(t,e){t=Ci,I(Ds,t),I(Xn,e),Ci=t|e.baseLanes}function ks(){I(Ds,Ci),I(Xn,Xn.current)}function Vl(){Ci=Ds.current,j(Xn),j(Ds)}var Kn=0,dt=null,wt=null,$t=null,xs=!1,bi=!1,We=!1,Zn=0,Si=0,ia=null,Ic=0;function Zt(){throw Error(R(321))}function Il(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ke(t[n],e[n]))return!1;return!0}function Yl(t,e,n,s,r,c){return Kn=c,dt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,U.H=t===null||t.memoizedState===null?zf:Hf,We=!1,c=n(s,r),We=!1,bi&&(c=Uo(e,n,s,r)),Pl(t),c}function Pl(t){U.H=ko;var e=wt!==null&&wt.next!==null;if(Kn=0,$t=wt=dt=null,xs=!1,Si=0,ia=null,e)throw Error(R(300));t===null||ye||(t=t.dependencies,t!==null&&Ha(t)&&(ye=!0))}function Uo(t,e,n,s){dt=t;var r=0;do{if(bi&&(ia=null),Si=0,bi=!1,25<=r)throw Error(R(301));if(r+=1,$t=wt=null,t.updateQueue!=null){var c=t.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}U.H=tg,c=e(n,s)}while(bi);return c}function Yc(){var t=U.H,e=t.useState()[0];return e=typeof e.then=="function"?m(e):e,t=t.useState()[0],(wt!==null?wt.memoizedState:null)!==t&&(dt.flags|=1024),e}function i(){var t=Zn!==0;return Zn=0,t}function a(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function l(t){if(xs){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}xs=!1}Kn=0,$t=wt=dt=null,bi=!1,Si=Zn=0,ia=null}function o(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?dt.memoizedState=$t=t:$t=$t.next=t,$t}function u(){if(wt===null){var t=dt.alternate;t=t!==null?t.memoizedState:null}else t=wt.next;var e=$t===null?dt.memoizedState:$t.next;if(e!==null)$t=e,wt=t;else{if(t===null)throw dt.alternate===null?Error(R(467)):Error(R(310));wt=t,t={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},$t===null?dt.memoizedState=$t=t:$t=$t.next=t}return $t}function f(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function m(t){var e=Si;return Si+=1,ia===null&&(ia=[]),t=Co(ia,t,e),e=dt,($t===null?e.memoizedState:$t.next)===null&&(e=e.alternate,U.H=e===null||e.memoizedState===null?zf:Hf),t}function p(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return m(t);if(t.$$typeof===ce)return fe(t)}throw Error(R(438,String(t)))}function T(t){var e=null,n=dt.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var s=dt.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=f(),dt.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),s=0;s<t;s++)n[s]=wi;return e.index++,n}function S(t,e){return typeof e=="function"?e(t):e}function L(t){var e=u();return k(e,wt,t)}function k(t,e,n){var s=t.queue;if(s===null)throw Error(R(311));s.lastRenderedReducer=n;var r=t.baseQueue,c=s.pending;if(c!==null){if(r!==null){var d=r.next;r.next=c.next,c.next=d}e.baseQueue=r=c,s.pending=null}if(c=t.baseState,r===null)t.memoizedState=c;else{e=r.next;var g=d=null,y=null,_=e,N=!1;do{var G=_.lane&-536870913;if(G!==_.lane?(Ot&G)===G:(Kn&G)===G){var E=_.revertLane;if(E===0)y!==null&&(y=y.next={lane:0,revertLane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),G===$i&&(N=!0);else if((Kn&E)===E){_=_.next,E===$i&&(N=!0);continue}else G={lane:0,revertLane:_.revertLane,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null},y===null?(g=y=G,d=c):y=y.next=G,dt.lanes|=E,fa|=E;G=_.action,We&&n(c,G),c=_.hasEagerState?_.eagerState:n(c,G)}else E={lane:G,revertLane:_.revertLane,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null},y===null?(g=y=E,d=c):y=y.next=E,dt.lanes|=G,fa|=G;_=_.next}while(_!==null&&_!==e);if(y===null?d=c:y.next=g,!ke(c,t.memoizedState)&&(ye=!0,N&&(n=ta,n!==null)))throw n;t.memoizedState=c,t.baseState=d,t.baseQueue=y,s.lastRenderedState=c}return r===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function H(t){var e=u(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,c=e.memoizedState;if(r!==null){n.pending=null;var d=r=r.next;do c=t(c,d.action),d=d.next;while(d!==r);ke(c,e.memoizedState)||(ye=!0),e.memoizedState=c,e.baseQueue===null&&(e.baseState=c),n.lastRenderedState=c}return[c,s]}function x(t,e,n){var s=dt,r=u(),c=ut;if(c){if(n===void 0)throw Error(R(407));n=n()}else n=e();var d=!ke((wt||r).memoizedState,n);d&&(r.memoizedState=n,ye=!0),r=r.queue;var g=tt.bind(null,s,r,t);if(Ql(2048,8,g,[t]),r.getSnapshot!==e||d||$t!==null&&$t.memoizedState.tag&1){if(s.flags|=2048,Bs(9,No(),P.bind(null,s,r,n,e),null),Vt===null)throw Error(R(349));c||(Kn&124)!==0||Y(s,e,n)}return n}function Y(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=dt.updateQueue,e===null?(e=f(),dt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function P(t,e,n,s){e.value=n,e.getSnapshot=s,St(e)&&Ct(t)}function tt(t,e,n){return n(function(){St(e)&&Ct(t)})}function St(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ke(t,n)}catch{return!0}}function Ct(t){var e=Qi(t,2);e!==null&&nn(e,t,2)}function Ut(t){var e=o();if(typeof t=="function"){var n=t;if(t=n(),We){Ft(!0);try{n()}finally{Ft(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:S,lastRenderedState:t},e}function st(t,e,n,s){return t.baseState=n,k(t,wt,typeof s=="function"?s:S)}function Be(t,e,n,s,r){if(Lo(t))throw Error(R(485));if(t=e.action,t!==null){var c={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(d){c.listeners.push(d)}};U.T!==null?n(!0):c.isTransition=!1,s(c),n=e.pending,n===null?(c.next=e.pending=c,he(e,c)):(c.next=n.next,e.pending=n.next=c)}}function he(t,e){var n=e.action,s=e.payload,r=t.state;if(e.isTransition){var c=U.T,d={};U.T=d;try{var g=n(r,s),y=U.S;y!==null&&y(d,g),aa(t,e,g)}catch(_){Za(t,e,_)}finally{U.T=c}}else try{c=n(r,s),aa(t,e,c)}catch(_){Za(t,e,_)}}function aa(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){Ai(t,e,s)},function(s){return Za(t,e,s)}):Ai(t,e,n)}function Ai(t,e,n){e.status="fulfilled",e.value=n,mf(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,he(t,n)))}function Za(t,e,n){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=n,mf(e),e=e.next;while(e!==s)}t.action=null}function mf(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function pf(t,e){return e}function yf(t,e){if(ut){var n=Vt.formState;if(n!==null){t:{var s=dt;if(ut){if(Qt){e:{for(var r=Qt,c=Pe;r.nodeType!==8;){if(!c){r=null;break e}if(r=Nn(r.nextSibling),r===null){r=null;break e}}c=r.data,r=c==="F!"||c==="F"?r:null}if(r){Qt=Nn(r.nextSibling),s=r.data==="F!";break t}}_n(s)}s=!1}s&&(e=n[0])}}return n=o(),n.memoizedState=n.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pf,lastRenderedState:e},n.queue=s,n=Bf.bind(null,dt,s),s.dispatch=n,s=Ut(!1),c=Zc.bind(null,dt,!1,s.queue),s=o(),r={state:e,dispatch:null,action:t,pending:null},s.queue=r,n=Be.bind(null,dt,r,c,n),r.dispatch=n,s.memoizedState=t,[e,n,!1]}function vf(t){var e=u();return bf(e,wt,t)}function bf(t,e,n){if(e=k(t,e,pf)[0],t=L(S)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var s=m(e)}catch(d){throw d===Ia?Us:d}else s=e;e=u();var r=e.queue,c=r.dispatch;return n!==e.memoizedState&&(dt.flags|=2048,Bs(9,No(),Jd.bind(null,r,n),null)),[s,c,t]}function Jd(t,e){t.action=e}function Sf(t){var e=u(),n=wt;if(n!==null)return bf(e,n,t);u(),e=e.memoizedState,n=u();var s=n.queue.dispatch;return n.memoizedState=t,[e,s,!1]}function Bs(t,e,n,s){return t={tag:t,create:n,deps:s,inst:e,next:null},e=dt.updateQueue,e===null&&(e=f(),dt.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function No(){return{destroy:void 0,resource:void 0}}function Af(){return u().memoizedState}function Do(t,e,n,s){var r=o();s=s===void 0?null:s,dt.flags|=t,r.memoizedState=Bs(1|e,No(),n,s)}function Ql(t,e,n,s){var r=u();s=s===void 0?null:s;var c=r.memoizedState.inst;wt!==null&&s!==null&&Il(s,wt.memoizedState.deps)?r.memoizedState=Bs(e,c,n,s):(dt.flags|=t,r.memoizedState=Bs(1|e,c,n,s))}function Of(t,e){Do(8390656,8,t,e)}function Tf(t,e){Ql(2048,8,t,e)}function Rf(t,e){return Ql(4,2,t,e)}function _f(t,e){return Ql(4,4,t,e)}function Ef(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Cf(t,e,n){n=n!=null?n.concat([t]):null,Ql(4,4,Ef.bind(null,e,t),n)}function Pc(){}function Mf(t,e){var n=u();e=e===void 0?null:e;var s=n.memoizedState;return e!==null&&Il(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function wf(t,e){var n=u();e=e===void 0?null:e;var s=n.memoizedState;if(e!==null&&Il(e,s[1]))return s[0];if(s=t(),We){Ft(!0);try{t()}finally{Ft(!1)}}return n.memoizedState=[s,e],s}function Qc(t,e,n){return n===void 0||(Kn&1073741824)!==0?t.memoizedState=e:(t.memoizedState=n,t=Dh(),dt.lanes|=t,fa|=t,n)}function Uf(t,e,n,s){return ke(n,e)?n:Xn.current!==null?(t=Qc(t,n,s),ke(t,e)||(ye=!0),t):(Kn&42)===0?(ye=!0,t.memoizedState=n):(t=Dh(),dt.lanes|=t,fa|=t,e)}function Nf(t,e,n,s,r){var c=q.p;q.p=c!==0&&8>c?c:8;var d=U.T,g={};U.T=g,Zc(t,!1,e,n);try{var y=r(),_=U.S;if(_!==null&&_(g,y),y!==null&&typeof y=="object"&&typeof y.then=="function"){var N=Vc(y,s);Xl(t,e,N,en(t))}else Xl(t,e,s,en(t))}catch(G){Xl(t,e,{then:function(){},status:"rejected",reason:G},en())}finally{q.p=c,U.T=d}}function Wd(){}function Xc(t,e,n,s){if(t.tag!==5)throw Error(R(476));var r=Df(t).queue;Nf(t,r,e,F,n===null?Wd:function(){return Lf(t),n(s)})}function Df(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:S,lastRenderedState:F},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:S,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function Lf(t){var e=Df(t).next.queue;Xl(t,e,{},en())}function Kc(){return fe(fr)}function kf(){return u().memoizedState}function xf(){return u().memoizedState}function Fd(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=en();t=Pn(n);var s=Qn(e,t,n);s!==null&&(nn(s,e,n),Qa(s,e,n)),e={cache:In()},t.payload=e;return}e=e.return}}function $d(t,e,n){var s=en();n={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Lo(t)?qf(e,n):(n=me(t,e,n,s),n!==null&&(nn(n,t,s),Gf(n,e,s)))}function Bf(t,e,n){var s=en();Xl(t,e,n,s)}function Xl(t,e,n,s){var r={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lo(t))qf(e,r);else{var c=t.alternate;if(t.lanes===0&&(c===null||c.lanes===0)&&(c=e.lastRenderedReducer,c!==null))try{var d=e.lastRenderedState,g=c(d,n);if(r.hasEagerState=!0,r.eagerState=g,ke(g,d))return bn(t,e,r,0),Vt===null&&_s(),!1}catch{}finally{}if(n=me(t,e,r,s),n!==null)return nn(n,t,s),Gf(n,e,s),!0}return!1}function Zc(t,e,n,s){if(s={lane:2,revertLane:Cu(),action:s,hasEagerState:!1,eagerState:null,next:null},Lo(t)){if(e)throw Error(R(479))}else e=me(t,n,s,2),e!==null&&nn(e,t,2)}function Lo(t){var e=t.alternate;return t===dt||e!==null&&e===dt}function qf(t,e){bi=xs=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Gf(t,e,n){if((n&4194048)!==0){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Ge(t,n)}}var ko={readContext:fe,use:p,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useLayoutEffect:Zt,useInsertionEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useSyncExternalStore:Zt,useId:Zt,useHostTransitionStatus:Zt,useFormState:Zt,useActionState:Zt,useOptimistic:Zt,useMemoCache:Zt,useCacheRefresh:Zt},zf={readContext:fe,use:p,useCallback:function(t,e){return o().memoizedState=[t,e===void 0?null:e],t},useContext:fe,useEffect:Of,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Do(4194308,4,Ef.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Do(4194308,4,t,e)},useInsertionEffect:function(t,e){Do(4,2,t,e)},useMemo:function(t,e){var n=o();e=e===void 0?null:e;var s=t();if(We){Ft(!0);try{t()}finally{Ft(!1)}}return n.memoizedState=[s,e],s},useReducer:function(t,e,n){var s=o();if(n!==void 0){var r=n(e);if(We){Ft(!0);try{n(e)}finally{Ft(!1)}}}else r=e;return s.memoizedState=s.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},s.queue=t,t=t.dispatch=$d.bind(null,dt,t),[s.memoizedState,t]},useRef:function(t){var e=o();return t={current:t},e.memoizedState=t},useState:function(t){t=Ut(t);var e=t.queue,n=Bf.bind(null,dt,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Pc,useDeferredValue:function(t,e){var n=o();return Qc(n,t,e)},useTransition:function(){var t=Ut(!1);return t=Nf.bind(null,dt,t.queue,!0,!1),o().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var s=dt,r=o();if(ut){if(n===void 0)throw Error(R(407));n=n()}else{if(n=e(),Vt===null)throw Error(R(349));(Ot&124)!==0||Y(s,e,n)}r.memoizedState=n;var c={value:n,getSnapshot:e};return r.queue=c,Of(tt.bind(null,s,c,t),[t]),s.flags|=2048,Bs(9,No(),P.bind(null,s,c,n,e),null),n},useId:function(){var t=o(),e=Vt.identifierPrefix;if(ut){var n=Tn,s=On;n=(s&~(1<<32-Yt(s)-1)).toString(32)+n,e="«"+e+"R"+n,n=Zn++,0<n&&(e+="H"+n.toString(32)),e+="»"}else n=Ic++,e="«"+e+"r"+n.toString(32)+"»";return t.memoizedState=e},useHostTransitionStatus:Kc,useFormState:yf,useActionState:yf,useOptimistic:function(t){var e=o();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Zc.bind(null,dt,!0,n),n.dispatch=e,[t,e]},useMemoCache:T,useCacheRefresh:function(){return o().memoizedState=Fd.bind(null,dt)}},Hf={readContext:fe,use:p,useCallback:Mf,useContext:fe,useEffect:Tf,useImperativeHandle:Cf,useInsertionEffect:Rf,useLayoutEffect:_f,useMemo:wf,useReducer:L,useRef:Af,useState:function(){return L(S)},useDebugValue:Pc,useDeferredValue:function(t,e){var n=u();return Uf(n,wt.memoizedState,t,e)},useTransition:function(){var t=L(S)[0],e=u().memoizedState;return[typeof t=="boolean"?t:m(t),e]},useSyncExternalStore:x,useId:kf,useHostTransitionStatus:Kc,useFormState:vf,useActionState:vf,useOptimistic:function(t,e){var n=u();return st(n,wt,t,e)},useMemoCache:T,useCacheRefresh:xf},tg={readContext:fe,use:p,useCallback:Mf,useContext:fe,useEffect:Tf,useImperativeHandle:Cf,useInsertionEffect:Rf,useLayoutEffect:_f,useMemo:wf,useReducer:H,useRef:Af,useState:function(){return H(S)},useDebugValue:Pc,useDeferredValue:function(t,e){var n=u();return wt===null?Qc(n,t,e):Uf(n,wt.memoizedState,t,e)},useTransition:function(){var t=H(S)[0],e=u().memoizedState;return[typeof t=="boolean"?t:m(t),e]},useSyncExternalStore:x,useId:kf,useHostTransitionStatus:Kc,useFormState:Sf,useActionState:Sf,useOptimistic:function(t,e){var n=u();return wt!==null?st(n,wt,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:T,useCacheRefresh:xf},qs=null,Kl=0;function xo(t){var e=Kl;return Kl+=1,qs===null&&(qs=[]),Co(qs,t,e)}function Zl(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Bo(t,e){throw e.$$typeof===vt?Error(R(525)):(t=Object.prototype.toString.call(e),Error(R(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function jf(t){var e=t._init;return e(t._payload)}function Vf(t){function e(A,b){if(t){var O=A.deletions;O===null?(A.deletions=[b],A.flags|=16):O.push(b)}}function n(A,b){if(!t)return null;for(;b!==null;)e(A,b),b=b.sibling;return null}function s(A){for(var b=new Map;A!==null;)A.key!==null?b.set(A.key,A):b.set(A.index,A),A=A.sibling;return b}function r(A,b){return A=Sn(A,b),A.index=0,A.sibling=null,A}function c(A,b,O){return A.index=O,t?(O=A.alternate,O!==null?(O=O.index,O<b?(A.flags|=67108866,b):O):(A.flags|=67108866,b)):(A.flags|=1048576,b)}function d(A){return t&&A.alternate===null&&(A.flags|=67108866),A}function g(A,b,O,B){return b===null||b.tag!==6?(b=wl(O,A.mode,B),b.return=A,b):(b=r(b,O),b.return=A,b)}function y(A,b,O,B){var X=O.type;return X===kt?N(A,b,O.props.children,B,O.key):b!==null&&(b.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===De&&jf(X)===b.type)?(b=r(b,O.props),Zl(b,O),b.return=A,b):(b=qa(O.type,O.key,O.props,null,A.mode,B),Zl(b,O),b.return=A,b)}function _(A,b,O,B){return b===null||b.tag!==4||b.stateNode.containerInfo!==O.containerInfo||b.stateNode.implementation!==O.implementation?(b=Cs(O,A.mode,B),b.return=A,b):(b=r(b,O.children||[]),b.return=A,b)}function N(A,b,O,B,X){return b===null||b.tag!==7?(b=mi(O,A.mode,B,X),b.return=A,b):(b=r(b,O),b.return=A,b)}function G(A,b,O){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return b=wl(""+b,A.mode,O),b.return=A,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case rt:return O=qa(b.type,b.key,b.props,null,A.mode,O),Zl(O,b),O.return=A,O;case ht:return b=Cs(b,A.mode,O),b.return=A,b;case De:var B=b._init;return b=B(b._payload),G(A,b,O)}if(Rt(b)||Wt(b))return b=mi(b,A.mode,O,null),b.return=A,b;if(typeof b.then=="function")return G(A,xo(b),O);if(b.$$typeof===ce)return G(A,Qe(A,b),O);Bo(A,b)}return null}function E(A,b,O,B){var X=b!==null?b.key:null;if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return X!==null?null:g(A,b,""+O,B);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case rt:return O.key===X?y(A,b,O,B):null;case ht:return O.key===X?_(A,b,O,B):null;case De:return X=O._init,O=X(O._payload),E(A,b,O,B)}if(Rt(O)||Wt(O))return X!==null?null:N(A,b,O,B,null);if(typeof O.then=="function")return E(A,b,xo(O),B);if(O.$$typeof===ce)return E(A,b,Qe(A,O),B);Bo(A,O)}return null}function C(A,b,O,B,X){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return A=A.get(O)||null,g(b,A,""+B,X);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case rt:return A=A.get(B.key===null?O:B.key)||null,y(b,A,B,X);case ht:return A=A.get(B.key===null?O:B.key)||null,_(b,A,B,X);case De:var mt=B._init;return B=mt(B._payload),C(A,b,O,B,X)}if(Rt(B)||Wt(B))return A=A.get(O)||null,N(b,A,B,X,null);if(typeof B.then=="function")return C(A,b,O,xo(B),X);if(B.$$typeof===ce)return C(A,b,O,Qe(b,B),X);Bo(b,B)}return null}function lt(A,b,O,B){for(var X=null,mt=null,W=b,nt=b=0,be=null;W!==null&&nt<O.length;nt++){W.index>nt?(be=W,W=null):be=W.sibling;var Et=E(A,W,O[nt],B);if(Et===null){W===null&&(W=be);break}t&&W&&Et.alternate===null&&e(A,W),b=c(Et,b,nt),mt===null?X=Et:mt.sibling=Et,mt=Et,W=be}if(nt===O.length)return n(A,W),ut&&pi(A,nt),X;if(W===null){for(;nt<O.length;nt++)W=G(A,O[nt],B),W!==null&&(b=c(W,b,nt),mt===null?X=W:mt.sibling=W,mt=W);return ut&&pi(A,nt),X}for(W=s(W);nt<O.length;nt++)be=C(W,A,nt,O[nt],B),be!==null&&(t&&be.alternate!==null&&W.delete(be.key===null?nt:be.key),b=c(be,b,nt),mt===null?X=be:mt.sibling=be,mt=be);return t&&W.forEach(function(Sa){return e(A,Sa)}),ut&&pi(A,nt),X}function et(A,b,O,B){if(O==null)throw Error(R(151));for(var X=null,mt=null,W=b,nt=b=0,be=null,Et=O.next();W!==null&&!Et.done;nt++,Et=O.next()){W.index>nt?(be=W,W=null):be=W.sibling;var Sa=E(A,W,Et.value,B);if(Sa===null){W===null&&(W=be);break}t&&W&&Sa.alternate===null&&e(A,W),b=c(Sa,b,nt),mt===null?X=Sa:mt.sibling=Sa,mt=Sa,W=be}if(Et.done)return n(A,W),ut&&pi(A,nt),X;if(W===null){for(;!Et.done;nt++,Et=O.next())Et=G(A,Et.value,B),Et!==null&&(b=c(Et,b,nt),mt===null?X=Et:mt.sibling=Et,mt=Et);return ut&&pi(A,nt),X}for(W=s(W);!Et.done;nt++,Et=O.next())Et=C(W,A,nt,Et.value,B),Et!==null&&(t&&Et.alternate!==null&&W.delete(Et.key===null?nt:Et.key),b=c(Et,b,nt),mt===null?X=Et:mt.sibling=Et,mt=Et);return t&&W.forEach(function(em){return e(A,em)}),ut&&pi(A,nt),X}function Gt(A,b,O,B){if(typeof O=="object"&&O!==null&&O.type===kt&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case rt:t:{for(var X=O.key;b!==null;){if(b.key===X){if(X=O.type,X===kt){if(b.tag===7){n(A,b.sibling),B=r(b,O.props.children),B.return=A,A=B;break t}}else if(b.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===De&&jf(X)===b.type){n(A,b.sibling),B=r(b,O.props),Zl(B,O),B.return=A,A=B;break t}n(A,b);break}else e(A,b);b=b.sibling}O.type===kt?(B=mi(O.props.children,A.mode,B,O.key),B.return=A,A=B):(B=qa(O.type,O.key,O.props,null,A.mode,B),Zl(B,O),B.return=A,A=B)}return d(A);case ht:t:{for(X=O.key;b!==null;){if(b.key===X)if(b.tag===4&&b.stateNode.containerInfo===O.containerInfo&&b.stateNode.implementation===O.implementation){n(A,b.sibling),B=r(b,O.children||[]),B.return=A,A=B;break t}else{n(A,b);break}else e(A,b);b=b.sibling}B=Cs(O,A.mode,B),B.return=A,A=B}return d(A);case De:return X=O._init,O=X(O._payload),Gt(A,b,O,B)}if(Rt(O))return lt(A,b,O,B);if(Wt(O)){if(X=Wt(O),typeof X!="function")throw Error(R(150));return O=X.call(O),et(A,b,O,B)}if(typeof O.then=="function")return Gt(A,b,xo(O),B);if(O.$$typeof===ce)return Gt(A,b,Qe(A,O),B);Bo(A,O)}return typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint"?(O=""+O,b!==null&&b.tag===6?(n(A,b.sibling),B=r(b,O),B.return=A,A=B):(n(A,b),B=wl(O,A.mode,B),B.return=A,A=B),d(A)):n(A,b)}return function(A,b,O,B){try{Kl=0;var X=Gt(A,b,O,B);return qs=null,X}catch(W){if(W===Ia||W===Us)throw W;var mt=xe(29,W,null,A.mode);return mt.lanes=B,mt.return=A,mt}finally{}}}var Gs=Vf(!0),If=Vf(!1),cn=z(null),Jn=null;function sa(t){var e=t.alternate;I(de,de.current&1),I(cn,t),Jn===null&&(e===null||Xn.current!==null||e.memoizedState!==null)&&(Jn=t)}function Yf(t){if(t.tag===22){if(I(de,de.current),I(cn,t),Jn===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(Jn=t)}}else la()}function la(){I(de,de.current),I(cn,cn.current)}function Oi(t){j(cn),Jn===t&&(Jn=null),j(de)}var de=z(0);function qo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||zu(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function Jc(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Q({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wc={enqueueSetState:function(t,e,n){t=t._reactInternals;var s=en(),r=Pn(s);r.payload=e,n!=null&&(r.callback=n),e=Qn(t,r,s),e!==null&&(nn(e,t,s),Qa(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=en(),r=Pn(s);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Qn(t,r,s),e!==null&&(nn(e,t,s),Qa(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=en(),s=Pn(n);s.tag=2,e!=null&&(s.callback=e),e=Qn(t,s,n),e!==null&&(nn(e,t,n),Qa(e,t,n))}};function Pf(t,e,n,s,r,c,d){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,c,d):e.prototype&&e.prototype.isPureReactComponent?!zn(n,s)||!zn(r,c):!0}function Qf(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Wc.enqueueReplaceState(e,e.state,null)}function Ja(t,e){var n=e;if("ref"in e){n={};for(var s in e)s!=="ref"&&(n[s]=e[s])}if(t=t.defaultProps){n===e&&(n=Q({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}var Go=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Xf(t){Go(t)}function Kf(t){console.error(t)}function Zf(t){Go(t)}function zo(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function Jf(t,e,n){try{var s=t.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Fc(t,e,n){return n=Pn(n),n.tag=3,n.payload={element:null},n.callback=function(){zo(t,e)},n}function Wf(t){return t=Pn(t),t.tag=3,t}function Ff(t,e,n,s){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var c=s.value;t.payload=function(){return r(c)},t.callback=function(){Jf(e,n,s)}}var d=n.stateNode;d!==null&&typeof d.componentDidCatch=="function"&&(t.callback=function(){Jf(e,n,s),typeof r!="function"&&(ha===null?ha=new Set([this]):ha.add(this));var g=s.stack;this.componentDidCatch(s.value,{componentStack:g!==null?g:""})})}function eg(t,e,n,s,r){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=n.alternate,e!==null&&za(e,n,r,!0),n=cn.current,n!==null){switch(n.tag){case 13:return Jn===null?Ou():n.alternate===null&&te===0&&(te=3),n.flags&=-257,n.flags|=65536,n.lanes=r,s===ql?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([s]):e.add(s),Ru(t,s,r)),!1;case 22:return n.flags|=65536,s===ql?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([s]):n.add(s)),Ru(t,s,r)),!1}throw Error(R(435,n.tag))}return Ru(t,s,r),Ou(),!1}if(ut)return e=cn.current,e!==null?((e.flags&65536)===0&&(e.flags|=256),e.flags|=65536,e.lanes=r,s!==yi&&(t=Error(R(422),{cause:s}),Cn(Ie(t,n)))):(s!==yi&&(e=Error(R(423),{cause:s}),Cn(Ie(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,s=Ie(s,n),r=Fc(t.stateNode,s,r),zl(t,r),te!==4&&(te=2)),!1;var c=Error(R(520),{cause:s});if(c=Ie(c,n),nr===null?nr=[c]:nr.push(c),te!==4&&(te=2),e===null)return!0;s=Ie(s,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=Fc(n.stateNode,s,t),zl(n,t),!1;case 1:if(e=n.type,c=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(ha===null||!ha.has(c))))return n.flags|=65536,r&=-r,n.lanes|=r,r=Wf(r),Ff(r,t,n,s),zl(n,r),!1}n=n.return}while(n!==null);return!1}var $f=Error(R(461)),ye=!1;function Te(t,e,n,s){e.child=t===null?If(e,null,n,s):Gs(e,t.child,n,s)}function th(t,e,n,s,r){n=n.render;var c=e.ref;if("ref"in s){var d={};for(var g in s)g!=="ref"&&(d[g]=s[g])}else d=s;return vi(e),s=Yl(t,e,n,d,c,r),g=i(),t!==null&&!ye?(a(t,e,r),Ti(t,e,r)):(ut&&g&&Ul(e),e.flags|=1,Te(t,e,s,r),e.child)}function eh(t,e,n,s,r){if(t===null){var c=n.type;return typeof c=="function"&&!Ba(c)&&c.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=c,nh(t,e,c,s,r)):(t=qa(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(c=t.child,!lu(t,r)){var d=c.memoizedProps;if(n=n.compare,n=n!==null?n:zn,n(d,s)&&t.ref===e.ref)return Ti(t,e,r)}return e.flags|=1,t=Sn(c,s),t.ref=e.ref,t.return=e,e.child=t}function nh(t,e,n,s,r){if(t!==null){var c=t.memoizedProps;if(zn(c,s)&&t.ref===e.ref)if(ye=!1,e.pendingProps=s=c,lu(t,r))(t.flags&131072)!==0&&(ye=!0);else return e.lanes=t.lanes,Ti(t,e,r)}return $c(t,e,n,s,r)}function ih(t,e,n){var s=e.pendingProps,r=s.children,c=t!==null?t.memoizedState:null;if(s.mode==="hidden"){if((e.flags&128)!==0){if(s=c!==null?c.baseLanes|n:n,t!==null){for(r=e.child=t.child,c=0;r!==null;)c=c|r.lanes|r.childLanes,r=r.sibling;e.childLanes=c&~s}else e.childLanes=0,e.child=null;return ah(t,e,s,n)}if((n&536870912)!==0)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&ea(e,c!==null?c.cachePool:null),c!==null?Ls(e,c):ks(),Yf(e);else return e.lanes=e.childLanes=536870912,ah(t,e,c!==null?c.baseLanes|n:n,n)}else c!==null?(ea(e,c.cachePool),Ls(e,c),la(),e.memoizedState=null):(t!==null&&ea(e,null),ks(),la());return Te(t,e,r,n),e.child}function ah(t,e,n,s){var r=Bl();return r=r===null?null:{parent:jt._currentValue,pool:r},e.memoizedState={baseLanes:n,cachePool:r},t!==null&&ea(e,null),ks(),Yf(e),t!==null&&za(t,e,s,!0),null}function Ho(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(R(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function $c(t,e,n,s,r){return vi(e),n=Yl(t,e,n,s,void 0,r),s=i(),t!==null&&!ye?(a(t,e,r),Ti(t,e,r)):(ut&&s&&Ul(e),e.flags|=1,Te(t,e,n,r),e.child)}function sh(t,e,n,s,r,c){return vi(e),e.updateQueue=null,n=Uo(e,s,n,r),Pl(t),s=i(),t!==null&&!ye?(a(t,e,c),Ti(t,e,c)):(ut&&s&&Ul(e),e.flags|=1,Te(t,e,n,c),e.child)}function lh(t,e,n,s,r){if(vi(e),e.stateNode===null){var c=gi,d=n.contextType;typeof d=="object"&&d!==null&&(c=fe(d)),c=new n(s,c),e.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Wc,e.stateNode=c,c._reactInternals=e,c=e.stateNode,c.props=s,c.state=e.memoizedState,c.refs={},Ns(e),d=n.contextType,c.context=typeof d=="object"&&d!==null?fe(d):gi,c.state=e.memoizedState,d=n.getDerivedStateFromProps,typeof d=="function"&&(Jc(e,n,d,s),c.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(d=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),d!==c.state&&Wc.enqueueReplaceState(c,c.state,null),Ka(e,s,c,r),Xa(),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){c=e.stateNode;var g=e.memoizedProps,y=Ja(n,g);c.props=y;var _=c.context,N=n.contextType;d=gi,typeof N=="object"&&N!==null&&(d=fe(N));var G=n.getDerivedStateFromProps;N=typeof G=="function"||typeof c.getSnapshotBeforeUpdate=="function",g=e.pendingProps!==g,N||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(g||_!==d)&&Qf(e,c,s,d),wn=!1;var E=e.memoizedState;c.state=E,Ka(e,s,c,r),Xa(),_=e.memoizedState,g||E!==_||wn?(typeof G=="function"&&(Jc(e,n,G,s),_=e.memoizedState),(y=wn||Pf(e,n,y,s,E,_,d))?(N||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(e.flags|=4194308)):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=_),c.props=s,c.state=_,c.context=d,s=y):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{c=e.stateNode,Gl(t,e),d=e.memoizedProps,N=Ja(n,d),c.props=N,G=e.pendingProps,E=c.context,_=n.contextType,y=gi,typeof _=="object"&&_!==null&&(y=fe(_)),g=n.getDerivedStateFromProps,(_=typeof g=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(d!==G||E!==y)&&Qf(e,c,s,y),wn=!1,E=e.memoizedState,c.state=E,Ka(e,s,c,r),Xa();var C=e.memoizedState;d!==G||E!==C||wn||t!==null&&t.dependencies!==null&&Ha(t.dependencies)?(typeof g=="function"&&(Jc(e,n,g,s),C=e.memoizedState),(N=wn||Pf(e,n,N,s,E,C,y)||t!==null&&t.dependencies!==null&&Ha(t.dependencies))?(_||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(s,C,y),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(s,C,y)),typeof c.componentDidUpdate=="function"&&(e.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof c.componentDidUpdate!="function"||d===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=C),c.props=s,c.state=C,c.context=y,s=N):(typeof c.componentDidUpdate!="function"||d===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),s=!1)}return c=s,Ho(t,e),s=(e.flags&128)!==0,c||s?(c=e.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:c.render(),e.flags|=1,t!==null&&s?(e.child=Gs(e,t.child,null,r),e.child=Gs(e,null,n,r)):Te(t,e,n,r),e.memoizedState=c.state,t=e.child):t=Ti(t,e,r),t}function rh(t,e,n,s){return Zi(),e.flags|=256,Te(t,e,n,s),e.child}var tu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function eu(t){return{baseLanes:t,cachePool:Ro()}}function nu(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=un),t}function oh(t,e,n){var s=e.pendingProps,r=!1,c=(e.flags&128)!==0,d;if((d=c)||(d=t!==null&&t.memoizedState===null?!1:(de.current&2)!==0),d&&(r=!0,e.flags&=-129),d=(e.flags&32)!==0,e.flags&=-33,t===null){if(ut){if(r?sa(e):la(),ut){var g=Qt,y;if(y=g){t:{for(y=g,g=Pe;y.nodeType!==8;){if(!g){g=null;break t}if(y=Nn(y.nextSibling),y===null){g=null;break t}}g=y}g!==null?(e.memoizedState={dehydrated:g,treeContext:An!==null?{id:On,overflow:Tn}:null,retryLane:536870912,hydrationErrors:null},y=xe(18,null,null,0),y.stateNode=g,y.return=e,e.child=y,pe=e,Qt=null,y=!0):y=!1}y||_n(e)}if(g=e.memoizedState,g!==null&&(g=g.dehydrated,g!==null))return zu(g)?e.lanes=32:e.lanes=536870912,null;Oi(e)}return g=s.children,s=s.fallback,r?(la(),r=e.mode,g=jo({mode:"hidden",children:g},r),s=mi(s,r,n,null),g.return=e,s.return=e,g.sibling=s,e.child=g,r=e.child,r.memoizedState=eu(n),r.childLanes=nu(t,d,n),e.memoizedState=tu,s):(sa(e),iu(e,g))}if(y=t.memoizedState,y!==null&&(g=y.dehydrated,g!==null)){if(c)e.flags&256?(sa(e),e.flags&=-257,e=au(t,e,n)):e.memoizedState!==null?(la(),e.child=t.child,e.flags|=128,e=null):(la(),r=s.fallback,g=e.mode,s=jo({mode:"visible",children:s.children},g),r=mi(r,g,n,null),r.flags|=2,s.return=e,r.return=e,s.sibling=r,e.child=s,Gs(e,t.child,null,n),s=e.child,s.memoizedState=eu(n),s.childLanes=nu(t,d,n),e.memoizedState=tu,e=r);else if(sa(e),zu(g)){if(d=g.nextSibling&&g.nextSibling.dataset,d)var _=d.dgst;d=_,s=Error(R(419)),s.stack="",s.digest=d,Cn({value:s,source:null,stack:null}),e=au(t,e,n)}else if(ye||za(t,e,n,!1),d=(n&t.childLanes)!==0,ye||d){if(d=Vt,d!==null&&(s=n&-n,s=(s&42)!==0?1:il(s),s=(s&(d.suspendedLanes|n))!==0?0:s,s!==0&&s!==y.retryLane))throw y.retryLane=s,Qi(t,s),nn(d,t,s),$f;g.data==="$?"||Ou(),e=au(t,e,n)}else g.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=y.treeContext,Qt=Nn(g.nextSibling),pe=e,ut=!0,Rn=null,Pe=!1,t!==null&&(we[Ye++]=On,we[Ye++]=Tn,we[Ye++]=An,On=t.id,Tn=t.overflow,An=e),e=iu(e,s.children),e.flags|=4096);return e}return r?(la(),r=s.fallback,g=e.mode,y=t.child,_=y.sibling,s=Sn(y,{mode:"hidden",children:s.children}),s.subtreeFlags=y.subtreeFlags&65011712,_!==null?r=Sn(_,r):(r=mi(r,g,n,null),r.flags|=2),r.return=e,s.return=e,s.sibling=r,e.child=s,s=r,r=e.child,g=t.child.memoizedState,g===null?g=eu(n):(y=g.cachePool,y!==null?(_=jt._currentValue,y=y.parent!==_?{parent:_,pool:_}:y):y=Ro(),g={baseLanes:g.baseLanes|n,cachePool:y}),r.memoizedState=g,r.childLanes=nu(t,d,n),e.memoizedState=tu,s):(sa(e),n=t.child,t=n.sibling,n=Sn(n,{mode:"visible",children:s.children}),n.return=e,n.sibling=null,t!==null&&(d=e.deletions,d===null?(e.deletions=[t],e.flags|=16):d.push(t)),e.child=n,e.memoizedState=null,n)}function iu(t,e){return e=jo({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function jo(t,e){return t=xe(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function au(t,e,n){return Gs(e,t.child,null,n),t=iu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ch(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Wi(t.return,e,n)}function su(t,e,n,s,r){var c=t.memoizedState;c===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(c.isBackwards=e,c.rendering=null,c.renderingStartTime=0,c.last=s,c.tail=n,c.tailMode=r)}function uh(t,e,n){var s=e.pendingProps,r=s.revealOrder,c=s.tail;if(Te(t,e,s.children,n),s=de.current,(s&2)!==0)s=s&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ch(t,n,e);else if(t.tag===19)ch(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}switch(I(de,s),r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&qo(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),su(e,!1,r,n,c);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&qo(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}su(e,!0,n,null,c);break;case"together":su(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ti(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fa|=e.lanes,(n&e.childLanes)===0)if(t!==null){if(za(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(R(153));if(e.child!==null){for(t=e.child,n=Sn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Sn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function lu(t,e){return(t.lanes&e)!==0?!0:(t=t.dependencies,!!(t!==null&&Ha(t)))}function ng(t,e,n){switch(e.tag){case 3:zt(e,e.stateNode.containerInfo),on(e,jt,t.memoizedState.cache),Zi();break;case 27:case 5:ts(e);break;case 4:zt(e,e.stateNode.containerInfo);break;case 10:on(e,e.type,e.memoizedProps.value);break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(sa(e),e.flags|=128,null):(n&e.child.childLanes)!==0?oh(t,e,n):(sa(e),t=Ti(t,e,n),t!==null?t.sibling:null);sa(e);break;case 19:var r=(t.flags&128)!==0;if(s=(n&e.childLanes)!==0,s||(za(t,e,n,!1),s=(n&e.childLanes)!==0),r){if(s)return uh(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),I(de,de.current),s)break;return null;case 22:case 23:return e.lanes=0,ih(t,e,n);case 24:on(e,jt,t.memoizedState.cache)}return Ti(t,e,n)}function fh(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)ye=!0;else{if(!lu(t,n)&&(e.flags&128)===0)return ye=!1,ng(t,e,n);ye=(t.flags&131072)!==0}else ye=!1,ut&&(e.flags&1048576)!==0&&bo(e,ws,e.index);switch(e.lanes=0,e.tag){case 16:t:{t=e.pendingProps;var s=e.elementType,r=s._init;if(s=r(s._payload),e.type=s,typeof s=="function")Ba(s)?(t=Ja(s,t),e.tag=1,e=lh(null,e,s,t,n)):(e.tag=0,e=$c(null,e,s,t,n));else{if(s!=null){if(r=s.$$typeof,r===w){e.tag=11,e=th(null,e,s,t,n);break t}else if(r===Ne){e.tag=14,e=eh(null,e,s,t,n);break t}}throw e=M(s)||s,Error(R(306,e,""))}}return e;case 0:return $c(t,e,e.type,e.pendingProps,n);case 1:return s=e.type,r=Ja(s,e.pendingProps),lh(t,e,s,r,n);case 3:t:{if(zt(e,e.stateNode.containerInfo),t===null)throw Error(R(387));s=e.pendingProps;var c=e.memoizedState;r=c.element,Gl(t,e),Ka(e,s,null,n);var d=e.memoizedState;if(s=d.cache,on(e,jt,s),s!==c.cache&&kl(e,[jt],n,!0),Xa(),s=d.element,c.isDehydrated)if(c={element:s,isDehydrated:!1,cache:d.cache},e.updateQueue.baseState=c,e.memoizedState=c,e.flags&256){e=rh(t,e,s,n);break t}else if(s!==r){r=Ie(Error(R(424)),e),Cn(r),e=rh(t,e,s,n);break t}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Qt=Nn(t.firstChild),pe=e,ut=!0,Rn=null,Pe=!0,n=If(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Zi(),s===r){e=Ti(t,e,n);break t}Te(t,e,s,n)}e=e.child}return e;case 26:return Ho(t,e),t===null?(n=md(e.type,null,e.pendingProps,null))?e.memoizedState=n:ut||(n=e.type,t=e.pendingProps,s=ec(ot.current).createElement(n),s[ue]=e,s[Ae]=t,_e(s,n,t),se(s),e.stateNode=s):e.memoizedState=md(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return ts(e),t===null&&ut&&(s=e.stateNode=hd(e.type,e.pendingProps,ot.current),pe=e,Pe=!0,r=Qt,ma(e.type)?(Hu=r,Qt=Nn(s.firstChild)):Qt=r),Te(t,e,e.pendingProps.children,n),Ho(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&ut&&((r=s=Qt)&&(s=Ug(s,e.type,e.pendingProps,Pe),s!==null?(e.stateNode=s,pe=e,Qt=Nn(s.firstChild),Pe=!1,r=!0):r=!1),r||_n(e)),ts(e),r=e.type,c=e.pendingProps,d=t!==null?t.memoizedProps:null,s=c.children,Bu(r,c)?s=null:d!==null&&Bu(r,d)&&(e.flags|=32),e.memoizedState!==null&&(r=Yl(t,e,Yc,null,null,n),fr._currentValue=r),Ho(t,e),Te(t,e,s,n),e.child;case 6:return t===null&&ut&&((t=n=Qt)&&(n=Ng(n,e.pendingProps,Pe),n!==null?(e.stateNode=n,pe=e,Qt=null,t=!0):t=!1),t||_n(e)),null;case 13:return oh(t,e,n);case 4:return zt(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Gs(e,null,s,n):Te(t,e,s,n),e.child;case 11:return th(t,e,e.type,e.pendingProps,n);case 7:return Te(t,e,e.pendingProps,n),e.child;case 8:return Te(t,e,e.pendingProps.children,n),e.child;case 12:return Te(t,e,e.pendingProps.children,n),e.child;case 10:return s=e.pendingProps,on(e,e.type,s.value),Te(t,e,s.children,n),e.child;case 9:return r=e.type._context,s=e.pendingProps.children,vi(e),r=fe(r),s=s(r),e.flags|=1,Te(t,e,s,n),e.child;case 14:return eh(t,e,e.type,e.pendingProps,n);case 15:return nh(t,e,e.type,e.pendingProps,n);case 19:return uh(t,e,n);case 31:return s=e.pendingProps,n=e.mode,s={mode:s.mode,children:s.children},t===null?(n=jo(s,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=Sn(t.child,s),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return ih(t,e,n);case 24:return vi(e),s=fe(jt),t===null?(r=Bl(),r===null&&(r=Vt,c=In(),r.pooledCache=c,c.refCount++,c!==null&&(r.pooledCacheLanes|=n),r=c),e.memoizedState={parent:s,cache:r},Ns(e),on(e,jt,r)):((t.lanes&n)!==0&&(Gl(t,e),Ka(e,null,null,n),Xa()),r=t.memoizedState,c=e.memoizedState,r.parent!==s?(r={parent:s,cache:s},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),on(e,jt,s)):(s=c.cache,on(e,jt,s),s!==r.cache&&kl(e,[jt],n,!0))),Te(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(R(156,e.tag))}function Ri(t){t.flags|=4}function hh(t,e){if(e.type!=="stylesheet"||(e.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Sd(e)){if(e=cn.current,e!==null&&((Ot&4194048)===Ot?Jn!==null:(Ot&62914560)!==Ot&&(Ot&536870912)===0||e!==Jn))throw Pa=ql,_o;t.flags|=8192}}function Vo(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?Ea():536870912,t.lanes|=e,Vs|=e)}function Jl(t,e){if(!ut)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&65011712,s|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function ig(t,e,n){var s=e.pendingProps;switch(Nl(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(e),null;case 1:return Jt(e),null;case 3:return n=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),oe(jt),dn(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(En(e)?Ri(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Ji())),Jt(e),null;case 26:return n=e.memoizedState,t===null?(Ri(e),n!==null?(Jt(e),hh(e,n)):(Jt(e),e.flags&=-16777217)):n?n!==t.memoizedState?(Ri(e),Jt(e),hh(e,n)):(Jt(e),e.flags&=-16777217):(t.memoizedProps!==s&&Ri(e),Jt(e),e.flags&=-16777217),null;case 27:es(e),n=ot.current;var r=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==s&&Ri(e);else{if(!s){if(e.stateNode===null)throw Error(R(166));return Jt(e),null}t=$.current,En(e)?Dl(e):(t=hd(r,s,n),e.stateNode=t,Ri(e))}return Jt(e),null;case 5:if(es(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&Ri(e);else{if(!s){if(e.stateNode===null)throw Error(R(166));return Jt(e),null}if(t=$.current,En(e))Dl(e);else{switch(r=ec(ot.current),t){case 1:t=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=r.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof s.is=="string"?r.createElement("select",{is:s.is}):r.createElement("select"),s.multiple?t.multiple=!0:s.size&&(t.size=s.size);break;default:t=typeof s.is=="string"?r.createElement(n,{is:s.is}):r.createElement(n)}}t[ue]=e,t[Ae]=s;t:for(r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break t;for(;r.sibling===null;){if(r.return===null||r.return===e)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}e.stateNode=t;t:switch(_e(t,n,s),n){case"button":case"input":case"select":case"textarea":t=!!s.autoFocus;break t;case"img":t=!0;break t;default:t=!1}t&&Ri(e)}}return Jt(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&Ri(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error(R(166));if(t=ot.current,En(e)){if(t=e.stateNode,n=e.memoizedProps,s=null,r=pe,r!==null)switch(r.tag){case 27:case 5:s=r.memoizedProps}t[ue]=e,t=!!(t.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||sd(t.nodeValue,n)),t||_n(e)}else t=ec(t).createTextNode(s),t[ue]=e,e.stateNode=t}return Jt(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=En(e),s!==null&&s.dehydrated!==null){if(t===null){if(!r)throw Error(R(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(R(317));r[ue]=e}else Zi(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Jt(e),r=!1}else r=Ji(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(Oi(e),e):(Oi(e),null)}if(Oi(e),(e.flags&128)!==0)return e.lanes=n,e;if(n=s!==null,t=t!==null&&t.memoizedState!==null,n){s=e.child,r=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(r=s.alternate.memoizedState.cachePool.pool);var c=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==r&&(s.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),Vo(e,e.updateQueue),Jt(e),null;case 4:return dn(),t===null&&Nu(e.stateNode.containerInfo),Jt(e),null;case 10:return oe(e.type),Jt(e),null;case 19:if(j(de),r=e.memoizedState,r===null)return Jt(e),null;if(s=(e.flags&128)!==0,c=r.rendering,c===null)if(s)Jl(r,!1);else{if(te!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(c=qo(t),c!==null){for(e.flags|=128,Jl(r,!1),t=c.updateQueue,e.updateQueue=t,Vo(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)vo(n,t),n=n.sibling;return I(de,de.current&1|2),e.child}t=t.sibling}r.tail!==null&&qe()>Po&&(e.flags|=128,s=!0,Jl(r,!1),e.lanes=4194304)}else{if(!s)if(t=qo(c),t!==null){if(e.flags|=128,s=!0,t=t.updateQueue,e.updateQueue=t,Vo(e,t),Jl(r,!0),r.tail===null&&r.tailMode==="hidden"&&!c.alternate&&!ut)return Jt(e),null}else 2*qe()-r.renderingStartTime>Po&&n!==536870912&&(e.flags|=128,s=!0,Jl(r,!1),e.lanes=4194304);r.isBackwards?(c.sibling=e.child,e.child=c):(t=r.last,t!==null?t.sibling=c:e.child=c,r.last=c)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=qe(),e.sibling=null,t=de.current,I(de,s?t&1|2:t&1),e):(Jt(e),null);case 22:case 23:return Oi(e),Vl(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?(n&536870912)!==0&&(e.flags&128)===0&&(Jt(e),e.subtreeFlags&6&&(e.flags|=8192)):Jt(e),n=e.updateQueue,n!==null&&Vo(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==n&&(e.flags|=2048),t!==null&&j(Yn),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),oe(jt),Jt(e),null;case 25:return null;case 30:return null}throw Error(R(156,e.tag))}function ag(t,e){switch(Nl(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return oe(jt),dn(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return es(e),null;case 13:if(Oi(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(R(340));Zi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return j(de),null;case 4:return dn(),null;case 10:return oe(e.type),null;case 22:case 23:return Oi(e),Vl(),t!==null&&j(Yn),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return oe(jt),null;case 25:return null;default:return null}}function dh(t,e){switch(Nl(e),e.tag){case 3:oe(jt),dn();break;case 26:case 27:case 5:es(e);break;case 4:dn();break;case 13:Oi(e);break;case 19:j(de);break;case 10:oe(e.type);break;case 22:case 23:Oi(e),Vl(),t!==null&&j(Yn);break;case 24:oe(jt)}}function Wl(t,e){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var r=s.next;n=r;do{if((n.tag&t)===t){s=void 0;var c=n.create,d=n.inst;s=c(),d.destroy=s}n=n.next}while(n!==r)}}catch(g){Ht(e,e.return,g)}}function ra(t,e,n){try{var s=e.updateQueue,r=s!==null?s.lastEffect:null;if(r!==null){var c=r.next;s=c;do{if((s.tag&t)===t){var d=s.inst,g=d.destroy;if(g!==void 0){d.destroy=void 0,r=e;var y=n,_=g;try{_()}catch(N){Ht(r,y,N)}}}s=s.next}while(s!==c)}}catch(N){Ht(e,e.return,N)}}function gh(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{jl(e,n)}catch(s){Ht(t,t.return,s)}}}function mh(t,e,n){n.props=Ja(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(s){Ht(t,e,s)}}function Fl(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(r){Ht(t,e,r)}}function Wn(t,e){var n=t.ref,s=t.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(r){Ht(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Ht(t,e,r)}else n.current=null}function ph(t){var e=t.type,n=t.memoizedProps,s=t.stateNode;try{t:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break t;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(r){Ht(t,t.return,r)}}function ru(t,e,n){try{var s=t.stateNode;_g(s,t.type,n,e),s[Ae]=e}catch(r){Ht(t,t.return,r)}}function yh(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ma(t.type)||t.tag===4}function ou(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||yh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ma(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cu(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=tc));else if(s!==4&&(s===27&&ma(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(cu(t,e,n),t=t.sibling;t!==null;)cu(t,e,n),t=t.sibling}function Io(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(s===27&&ma(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Io(t,e,n),t=t.sibling;t!==null;)Io(t,e,n),t=t.sibling}function vh(t){var e=t.stateNode,n=t.memoizedProps;try{for(var s=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);_e(e,s,n),e[ue]=t,e[Ae]=n}catch(c){Ht(t,t.return,c)}}var _i=!1,ne=!1,uu=!1,bh=typeof WeakSet=="function"?WeakSet:Set,ve=null;function sg(t,e){if(t=t.containerInfo,ku=rc,t=Me(t),xa(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,c=s.focusNode;s=s.focusOffset;try{n.nodeType,c.nodeType}catch{n=null;break t}var d=0,g=-1,y=-1,_=0,N=0,G=t,E=null;e:for(;;){for(var C;G!==n||r!==0&&G.nodeType!==3||(g=d+r),G!==c||s!==0&&G.nodeType!==3||(y=d+s),G.nodeType===3&&(d+=G.nodeValue.length),(C=G.firstChild)!==null;)E=G,G=C;for(;;){if(G===t)break e;if(E===n&&++_===r&&(g=d),E===c&&++N===s&&(y=d),(C=G.nextSibling)!==null)break;G=E,E=G.parentNode}G=C}n=g===-1||y===-1?null:{start:g,end:y}}else n=null}n=n||{start:0,end:0}}else n=null;for(xu={focusedElem:t,selectionRange:n},rc=!1,ve=e;ve!==null;)if(e=ve,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,ve=t;else for(;ve!==null;){switch(e=ve,c=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&c!==null){t=void 0,n=e,r=c.memoizedProps,c=c.memoizedState,s=n.stateNode;try{var lt=Ja(n.type,r,n.elementType===n.type);t=s.getSnapshotBeforeUpdate(lt,c),s.__reactInternalSnapshotBeforeUpdate=t}catch(et){Ht(n,n.return,et)}}break;case 3:if((t&1024)!==0){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Gu(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Gu(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(R(163))}if(t=e.sibling,t!==null){t.return=e.return,ve=t;break}ve=e.return}}function Sh(t,e,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:oa(t,n),s&4&&Wl(5,n);break;case 1:if(oa(t,n),s&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(d){Ht(n,n.return,d)}else{var r=Ja(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(d){Ht(n,n.return,d)}}s&64&&gh(n),s&512&&Fl(n,n.return);break;case 3:if(oa(t,n),s&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{jl(t,e)}catch(d){Ht(n,n.return,d)}}break;case 27:e===null&&s&4&&vh(n);case 26:case 5:oa(t,n),e===null&&s&4&&ph(n),s&512&&Fl(n,n.return);break;case 12:oa(t,n);break;case 13:oa(t,n),s&4&&Th(t,n),s&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=gg.bind(null,n),Dg(t,n))));break;case 22:if(s=n.memoizedState!==null||_i,!s){e=e!==null&&e.memoizedState!==null||ne,r=_i;var c=ne;_i=s,(ne=e)&&!c?ca(t,n,(n.subtreeFlags&8772)!==0):oa(t,n),_i=r,ne=c}break;case 30:break;default:oa(t,n)}}function Ah(t){var e=t.alternate;e!==null&&(t.alternate=null,Ah(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&rl(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Kt=null,Xe=!1;function Ei(t,e,n){for(n=n.child;n!==null;)Oh(t,e,n),n=n.sibling}function Oh(t,e,n){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(Ui,n)}catch{}switch(n.tag){case 26:ne||Wn(n,e),Ei(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ne||Wn(n,e);var s=Kt,r=Xe;ma(n.type)&&(Kt=n.stateNode,Xe=!1),Ei(t,e,n),rr(n.stateNode),Kt=s,Xe=r;break;case 5:ne||Wn(n,e);case 6:if(s=Kt,r=Xe,Kt=null,Ei(t,e,n),Kt=s,Xe=r,Kt!==null)if(Xe)try{(Kt.nodeType===9?Kt.body:Kt.nodeName==="HTML"?Kt.ownerDocument.body:Kt).removeChild(n.stateNode)}catch(c){Ht(n,e,c)}else try{Kt.removeChild(n.stateNode)}catch(c){Ht(n,e,c)}break;case 18:Kt!==null&&(Xe?(t=Kt,ud(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),mr(t)):ud(Kt,n.stateNode));break;case 4:s=Kt,r=Xe,Kt=n.stateNode.containerInfo,Xe=!0,Ei(t,e,n),Kt=s,Xe=r;break;case 0:case 11:case 14:case 15:ne||ra(2,n,e),ne||ra(4,n,e),Ei(t,e,n);break;case 1:ne||(Wn(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"&&mh(n,e,s)),Ei(t,e,n);break;case 21:Ei(t,e,n);break;case 22:ne=(s=ne)||n.memoizedState!==null,Ei(t,e,n),ne=s;break;default:Ei(t,e,n)}}function Th(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{mr(t)}catch(n){Ht(e,e.return,n)}}function lg(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new bh),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new bh),e;default:throw Error(R(435,t.tag))}}function fu(t,e){var n=lg(t);e.forEach(function(s){var r=mg.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}function Fe(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s],c=t,d=e,g=d;t:for(;g!==null;){switch(g.tag){case 27:if(ma(g.type)){Kt=g.stateNode,Xe=!1;break t}break;case 5:Kt=g.stateNode,Xe=!1;break t;case 3:case 4:Kt=g.stateNode.containerInfo,Xe=!0;break t}g=g.return}if(Kt===null)throw Error(R(160));Oh(c,d,r),Kt=null,Xe=!1,c=r.alternate,c!==null&&(c.return=null),r.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)Rh(e,t),e=e.sibling}var Un=null;function Rh(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Fe(e,t),$e(t),s&4&&(ra(3,t,t.return),Wl(3,t),ra(5,t,t.return));break;case 1:Fe(e,t),$e(t),s&512&&(ne||n===null||Wn(n,n.return)),s&64&&_i&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var r=Un;if(Fe(e,t),$e(t),s&512&&(ne||n===null||Wn(n,n.return)),s&4){var c=n!==null?n.memoizedState:null;if(s=t.memoizedState,n===null)if(s===null)if(t.stateNode===null){t:{s=t.type,n=t.memoizedProps,r=r.ownerDocument||r;e:switch(s){case"title":c=r.getElementsByTagName("title")[0],(!c||c[Ca]||c[ue]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=r.createElement(s),r.head.insertBefore(c,r.querySelector("head > title"))),_e(c,s,n),c[ue]=t,se(c),s=c;break t;case"link":var d=vd("link","href",r).get(s+(n.href||""));if(d){for(var g=0;g<d.length;g++)if(c=d[g],c.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&c.getAttribute("rel")===(n.rel==null?null:n.rel)&&c.getAttribute("title")===(n.title==null?null:n.title)&&c.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){d.splice(g,1);break e}}c=r.createElement(s),_e(c,s,n),r.head.appendChild(c);break;case"meta":if(d=vd("meta","content",r).get(s+(n.content||""))){for(g=0;g<d.length;g++)if(c=d[g],c.getAttribute("content")===(n.content==null?null:""+n.content)&&c.getAttribute("name")===(n.name==null?null:n.name)&&c.getAttribute("property")===(n.property==null?null:n.property)&&c.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&c.getAttribute("charset")===(n.charSet==null?null:n.charSet)){d.splice(g,1);break e}}c=r.createElement(s),_e(c,s,n),r.head.appendChild(c);break;default:throw Error(R(468,s))}c[ue]=t,se(c),s=c}t.stateNode=s}else bd(r,t.type,t.stateNode);else t.stateNode=yd(r,s,t.memoizedProps);else c!==s?(c===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):c.count--,s===null?bd(r,t.type,t.stateNode):yd(r,s,t.memoizedProps)):s===null&&t.stateNode!==null&&ru(t,t.memoizedProps,n.memoizedProps)}break;case 27:Fe(e,t),$e(t),s&512&&(ne||n===null||Wn(n,n.return)),n!==null&&s&4&&ru(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Fe(e,t),$e(t),s&512&&(ne||n===null||Wn(n,n.return)),t.flags&32){r=t.stateNode;try{Z(r,"")}catch(C){Ht(t,t.return,C)}}s&4&&t.stateNode!=null&&(r=t.memoizedProps,ru(t,r,n!==null?n.memoizedProps:r)),s&1024&&(uu=!0);break;case 6:if(Fe(e,t),$e(t),s&4){if(t.stateNode===null)throw Error(R(162));s=t.memoizedProps,n=t.stateNode;try{n.nodeValue=s}catch(C){Ht(t,t.return,C)}}break;case 3:if(ac=null,r=Un,Un=nc(e.containerInfo),Fe(e,t),Un=r,$e(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{mr(e.containerInfo)}catch(C){Ht(t,t.return,C)}uu&&(uu=!1,_h(t));break;case 4:s=Un,Un=nc(t.stateNode.containerInfo),Fe(e,t),$e(t),Un=s;break;case 12:Fe(e,t),$e(t);break;case 13:Fe(e,t),$e(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(yu=qe()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,fu(t,s)));break;case 22:r=t.memoizedState!==null;var y=n!==null&&n.memoizedState!==null,_=_i,N=ne;if(_i=_||r,ne=N||y,Fe(e,t),ne=N,_i=_,$e(t),s&8192)t:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||y||_i||ne||Wa(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){y=n=e;try{if(c=y.stateNode,r)d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{g=y.stateNode;var G=y.memoizedProps.style,E=G!=null&&G.hasOwnProperty("display")?G.display:null;g.style.display=E==null||typeof E=="boolean"?"":(""+E).trim()}}catch(C){Ht(y,y.return,C)}}}else if(e.tag===6){if(n===null){y=e;try{y.stateNode.nodeValue=r?"":y.memoizedProps}catch(C){Ht(y,y.return,C)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,fu(t,n))));break;case 19:Fe(e,t),$e(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,fu(t,s)));break;case 30:break;case 21:break;default:Fe(e,t),$e(t)}}function $e(t){var e=t.flags;if(e&2){try{for(var n,s=t.return;s!==null;){if(yh(s)){n=s;break}s=s.return}if(n==null)throw Error(R(160));switch(n.tag){case 27:var r=n.stateNode,c=ou(t);Io(t,c,r);break;case 5:var d=n.stateNode;n.flags&32&&(Z(d,""),n.flags&=-33);var g=ou(t);Io(t,g,d);break;case 3:case 4:var y=n.stateNode.containerInfo,_=ou(t);cu(t,_,y);break;default:throw Error(R(161))}}catch(N){Ht(t,t.return,N)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _h(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;_h(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function oa(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Sh(t,e.alternate,e),e=e.sibling}function Wa(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:ra(4,e,e.return),Wa(e);break;case 1:Wn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&mh(e,e.return,n),Wa(e);break;case 27:rr(e.stateNode);case 26:case 5:Wn(e,e.return),Wa(e);break;case 22:e.memoizedState===null&&Wa(e);break;case 30:Wa(e);break;default:Wa(e)}t=t.sibling}}function ca(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,r=t,c=e,d=c.flags;switch(c.tag){case 0:case 11:case 15:ca(r,c,n),Wl(4,c);break;case 1:if(ca(r,c,n),s=c,r=s.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(_){Ht(s,s.return,_)}if(s=c,r=s.updateQueue,r!==null){var g=s.stateNode;try{var y=r.shared.hiddenCallbacks;if(y!==null)for(r.shared.hiddenCallbacks=null,r=0;r<y.length;r++)na(y[r],g)}catch(_){Ht(s,s.return,_)}}n&&d&64&&gh(c),Fl(c,c.return);break;case 27:vh(c);case 26:case 5:ca(r,c,n),n&&s===null&&d&4&&ph(c),Fl(c,c.return);break;case 12:ca(r,c,n);break;case 13:ca(r,c,n),n&&d&4&&Th(r,c);break;case 22:c.memoizedState===null&&ca(r,c,n),Fl(c,c.return);break;case 30:break;default:ca(r,c,n)}e=e.sibling}}function hu(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Va(n))}function du(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Va(t))}function Fn(t,e,n,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Eh(t,e,n,s),e=e.sibling}function Eh(t,e,n,s){var r=e.flags;switch(e.tag){case 0:case 11:case 15:Fn(t,e,n,s),r&2048&&Wl(9,e);break;case 1:Fn(t,e,n,s);break;case 3:Fn(t,e,n,s),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Va(t)));break;case 12:if(r&2048){Fn(t,e,n,s),t=e.stateNode;try{var c=e.memoizedProps,d=c.id,g=c.onPostCommit;typeof g=="function"&&g(d,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(y){Ht(e,e.return,y)}}else Fn(t,e,n,s);break;case 13:Fn(t,e,n,s);break;case 23:break;case 22:c=e.stateNode,d=e.alternate,e.memoizedState!==null?c._visibility&2?Fn(t,e,n,s):$l(t,e):c._visibility&2?Fn(t,e,n,s):(c._visibility|=2,zs(t,e,n,s,(e.subtreeFlags&10256)!==0)),r&2048&&hu(d,e);break;case 24:Fn(t,e,n,s),r&2048&&du(e.alternate,e);break;default:Fn(t,e,n,s)}}function zs(t,e,n,s,r){for(r=r&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var c=t,d=e,g=n,y=s,_=d.flags;switch(d.tag){case 0:case 11:case 15:zs(c,d,g,y,r),Wl(8,d);break;case 23:break;case 22:var N=d.stateNode;d.memoizedState!==null?N._visibility&2?zs(c,d,g,y,r):$l(c,d):(N._visibility|=2,zs(c,d,g,y,r)),r&&_&2048&&hu(d.alternate,d);break;case 24:zs(c,d,g,y,r),r&&_&2048&&du(d.alternate,d);break;default:zs(c,d,g,y,r)}e=e.sibling}}function $l(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,s=e,r=s.flags;switch(s.tag){case 22:$l(n,s),r&2048&&hu(s.alternate,s);break;case 24:$l(n,s),r&2048&&du(s.alternate,s);break;default:$l(n,s)}e=e.sibling}}var tr=8192;function Hs(t){if(t.subtreeFlags&tr)for(t=t.child;t!==null;)Ch(t),t=t.sibling}function Ch(t){switch(t.tag){case 26:Hs(t),t.flags&tr&&t.memoizedState!==null&&Pg(Un,t.memoizedState,t.memoizedProps);break;case 5:Hs(t);break;case 3:case 4:var e=Un;Un=nc(t.stateNode.containerInfo),Hs(t),Un=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=tr,tr=16777216,Hs(t),tr=e):Hs(t));break;default:Hs(t)}}function Mh(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function er(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];ve=s,Uh(s,t)}Mh(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)wh(t),t=t.sibling}function wh(t){switch(t.tag){case 0:case 11:case 15:er(t),t.flags&2048&&ra(9,t,t.return);break;case 3:er(t);break;case 12:er(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Yo(t)):er(t);break;default:er(t)}}function Yo(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];ve=s,Uh(s,t)}Mh(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:ra(8,e,e.return),Yo(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Yo(e));break;default:Yo(e)}t=t.sibling}}function Uh(t,e){for(;ve!==null;){var n=ve;switch(n.tag){case 0:case 11:case 15:ra(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Va(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,ve=s;else t:for(n=t;ve!==null;){s=ve;var r=s.sibling,c=s.return;if(Ah(s),s===n){ve=null;break t}if(r!==null){r.return=c,ve=r;break t}ve=c}}}var rg={getCacheForType:function(t){var e=fe(jt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},og=typeof WeakMap=="function"?WeakMap:Map,Dt=0,Vt=null,pt=null,Ot=0,Lt=0,tn=null,ua=!1,js=!1,gu=!1,Ci=0,te=0,fa=0,Fa=0,mu=0,un=0,Vs=0,nr=null,Ke=null,pu=!1,yu=0,Po=1/0,Qo=null,ha=null,Re=0,da=null,Is=null,Ys=0,vu=0,bu=null,Nh=null,ir=0,Su=null;function en(){if((Dt&2)!==0&&Ot!==0)return Ot&-Ot;if(U.T!==null){var t=$i;return t!==0?t:Cu()}return sl()}function Dh(){un===0&&(un=(Ot&536870912)===0||ut?nl():536870912);var t=cn.current;return t!==null&&(t.flags|=32),un}function nn(t,e,n){(t===Vt&&(Lt===2||Lt===9)||t.cancelPendingCommit!==null)&&(Ps(t,0),ga(t,Ot,un,!1)),Li(t,n),((Dt&2)===0||t!==Vt)&&(t===Vt&&((Dt&2)===0&&(Fa|=n),te===4&&ga(t,Ot,un,!1)),$n(t))}function Lh(t,e,n){if((Dt&6)!==0)throw Error(R(327));var s=!n&&(e&124)===0&&(e&t.expiredLanes)===0||Di(t,e),r=s?fg(t,e):Tu(t,e,!0),c=s;do{if(r===0){js&&!s&&ga(t,e,0,!1);break}else{if(n=t.current.alternate,c&&!cg(n)){r=Tu(t,e,!1),c=!1;continue}if(r===2){if(c=e,t.errorRecoveryDisabledLanes&c)var d=0;else d=t.pendingLanes&-536870913,d=d!==0?d:d&536870912?536870912:0;if(d!==0){e=d;t:{var g=t;r=nr;var y=g.current.memoizedState.isDehydrated;if(y&&(Ps(g,d).flags|=256),d=Tu(g,d,!1),d!==2){if(gu&&!y){g.errorRecoveryDisabledLanes|=c,Fa|=c,r=4;break t}c=Ke,Ke=r,c!==null&&(Ke===null?Ke=c:Ke.push.apply(Ke,c))}r=d}if(c=!1,r!==2)continue}}if(r===1){Ps(t,0),ga(t,e,0,!0);break}t:{switch(s=t,c=r,c){case 0:case 1:throw Error(R(345));case 4:if((e&4194048)!==e)break;case 6:ga(s,e,un,!ua);break t;case 2:Ke=null;break;case 3:case 5:break;default:throw Error(R(329))}if((e&62914560)===e&&(r=yu+300-qe(),10<r)){if(ga(s,e,un,!ua),_a(s,0,!0)!==0)break t;s.timeoutHandle=od(kh.bind(null,s,n,Ke,Qo,pu,e,un,Fa,Vs,ua,c,2,-0,0),r);break t}kh(s,n,Ke,Qo,pu,e,un,Fa,Vs,ua,c,0,-0,0)}}break}while(!0);$n(t)}function kh(t,e,n,s,r,c,d,g,y,_,N,G,E,C){if(t.timeoutHandle=-1,G=e.subtreeFlags,(G&8192||(G&16785408)===16785408)&&(ur={stylesheets:null,count:0,unsuspend:Yg},Ch(e),G=Qg(),G!==null)){t.cancelPendingCommit=G(jh.bind(null,t,e,c,n,s,r,d,g,y,N,1,E,C)),ga(t,c,d,!_);return}jh(t,e,c,n,s,r,d,g,y)}function cg(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var r=n[s],c=r.getSnapshot;r=r.value;try{if(!ke(c(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ga(t,e,n,s){e&=~mu,e&=~Fa,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var r=e;0<r;){var c=31-Yt(r),d=1<<c;s[c]=-1,r&=~d}n!==0&&Mr(t,n,e)}function Xo(){return(Dt&6)===0?(ar(0),!1):!0}function Au(){if(pt!==null){if(Lt===0)var t=pt.return;else t=pt,Mn=rn=null,l(t),qs=null,Kl=0,t=pt;for(;t!==null;)dh(t.alternate,t),t=t.return;pt=null}}function Ps(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,Cg(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Au(),Vt=t,pt=n=Sn(t.current,null),Ot=e,Lt=0,tn=null,ua=!1,js=Di(t,e),gu=!1,Vs=un=mu=Fa=fa=te=0,Ke=nr=null,pu=!1,(e&8)!==0&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var r=31-Yt(s),c=1<<r;e|=t[r],s&=~c}return Ci=e,_s(),n}function xh(t,e){dt=null,U.H=ko,e===Ia||e===Us?(e=Mo(),Lt=3):e===_o?(e=Mo(),Lt=4):Lt=e===$f?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,tn=e,pt===null&&(te=1,zo(t,Ie(e,t.current)))}function Bh(){var t=U.H;return U.H=ko,t===null?ko:t}function qh(){var t=U.A;return U.A=rg,t}function Ou(){te=4,ua||(Ot&4194048)!==Ot&&cn.current!==null||(js=!0),(fa&134217727)===0&&(Fa&134217727)===0||Vt===null||ga(Vt,Ot,un,!1)}function Tu(t,e,n){var s=Dt;Dt|=2;var r=Bh(),c=qh();(Vt!==t||Ot!==e)&&(Qo=null,Ps(t,e)),e=!1;var d=te;t:do try{if(Lt!==0&&pt!==null){var g=pt,y=tn;switch(Lt){case 8:Au(),d=6;break t;case 3:case 2:case 9:case 6:cn.current===null&&(e=!0);var _=Lt;if(Lt=0,tn=null,Qs(t,g,y,_),n&&js){d=0;break t}break;default:_=Lt,Lt=0,tn=null,Qs(t,g,y,_)}}ug(),d=te;break}catch(N){xh(t,N)}while(!0);return e&&t.shellSuspendCounter++,Mn=rn=null,Dt=s,U.H=r,U.A=c,pt===null&&(Vt=null,Ot=0,_s()),d}function ug(){for(;pt!==null;)Gh(pt)}function fg(t,e){var n=Dt;Dt|=2;var s=Bh(),r=qh();Vt!==t||Ot!==e?(Qo=null,Po=qe()+500,Ps(t,e)):js=Di(t,e);t:do try{if(Lt!==0&&pt!==null){e=pt;var c=tn;e:switch(Lt){case 1:Lt=0,tn=null,Qs(t,e,c,1);break;case 2:case 9:if(Eo(c)){Lt=0,tn=null,zh(e);break}e=function(){Lt!==2&&Lt!==9||Vt!==t||(Lt=7),$n(t)},c.then(e,e);break t;case 3:Lt=7;break t;case 4:Lt=5;break t;case 7:Eo(c)?(Lt=0,tn=null,zh(e)):(Lt=0,tn=null,Qs(t,e,c,7));break;case 5:var d=null;switch(pt.tag){case 26:d=pt.memoizedState;case 5:case 27:var g=pt;if(!d||Sd(d)){Lt=0,tn=null;var y=g.sibling;if(y!==null)pt=y;else{var _=g.return;_!==null?(pt=_,Ko(_)):pt=null}break e}}Lt=0,tn=null,Qs(t,e,c,5);break;case 6:Lt=0,tn=null,Qs(t,e,c,6);break;case 8:Au(),te=6;break t;default:throw Error(R(462))}}hg();break}catch(N){xh(t,N)}while(!0);return Mn=rn=null,U.H=s,U.A=r,Dt=n,pt!==null?0:(Vt=null,Ot=0,_s(),te)}function hg(){for(;pt!==null&&!Ar();)Gh(pt)}function Gh(t){var e=fh(t.alternate,t,Ci);t.memoizedProps=t.pendingProps,e===null?Ko(t):pt=e}function zh(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=sh(n,e,e.pendingProps,e.type,void 0,Ot);break;case 11:e=sh(n,e,e.pendingProps,e.type.render,e.ref,Ot);break;case 5:l(e);default:dh(n,e),e=pt=vo(e,Ci),e=fh(n,e,Ci)}t.memoizedProps=t.pendingProps,e===null?Ko(t):pt=e}function Qs(t,e,n,s){Mn=rn=null,l(e),qs=null,Kl=0;var r=e.return;try{if(eg(t,r,e,n,Ot)){te=1,zo(t,Ie(n,t.current)),pt=null;return}}catch(c){if(r!==null)throw pt=r,c;te=1,zo(t,Ie(n,t.current)),pt=null;return}e.flags&32768?(ut||s===1?t=!0:js||(Ot&536870912)!==0?t=!1:(ua=t=!0,(s===2||s===9||s===3||s===6)&&(s=cn.current,s!==null&&s.tag===13&&(s.flags|=16384))),Hh(e,t)):Ko(e)}function Ko(t){var e=t;do{if((e.flags&32768)!==0){Hh(e,ua);return}t=e.return;var n=ig(e.alternate,e,Ci);if(n!==null){pt=n;return}if(e=e.sibling,e!==null){pt=e;return}pt=e=t}while(e!==null);te===0&&(te=5)}function Hh(t,e){do{var n=ag(t.alternate,t);if(n!==null){n.flags&=32767,pt=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){pt=t;return}pt=t=n}while(t!==null);te=6,pt=null}function jh(t,e,n,s,r,c,d,g,y){t.cancelPendingCommit=null;do Zo();while(Re!==0);if((Dt&6)!==0)throw Error(R(327));if(e!==null){if(e===t.current)throw Error(R(177));if(c=e.lanes|e.childLanes,c|=Cl,Cr(t,n,c,d,g,y),t===Vt&&(pt=Vt=null,Ot=0),Is=e,da=t,Ys=n,vu=c,bu=r,Nh=s,(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,pg(_t,function(){return Qh(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(e.flags&13878)!==0,(e.subtreeFlags&13878)!==0||s){s=U.T,U.T=null,r=q.p,q.p=2,d=Dt,Dt|=4;try{sg(t,e,n)}finally{Dt=d,q.p=r,U.T=s}}Re=1,Vh(),Ih(),Yh()}}function Vh(){if(Re===1){Re=0;var t=da,e=Is,n=(e.flags&13878)!==0;if((e.subtreeFlags&13878)!==0||n){n=U.T,U.T=null;var s=q.p;q.p=2;var r=Dt;Dt|=4;try{Rh(e,t);var c=xu,d=Me(t.containerInfo),g=c.focusedElem,y=c.selectionRange;if(d!==g&&g&&g.ownerDocument&&Rl(g.ownerDocument.documentElement,g)){if(y!==null&&xa(g)){var _=y.start,N=y.end;if(N===void 0&&(N=_),"selectionStart"in g)g.selectionStart=_,g.selectionEnd=Math.min(N,g.value.length);else{var G=g.ownerDocument||document,E=G&&G.defaultView||window;if(E.getSelection){var C=E.getSelection(),lt=g.textContent.length,et=Math.min(y.start,lt),Gt=y.end===void 0?et:Math.min(y.end,lt);!C.extend&&et>Gt&&(d=Gt,Gt=et,et=d);var A=Os(g,et),b=Os(g,Gt);if(A&&b&&(C.rangeCount!==1||C.anchorNode!==A.node||C.anchorOffset!==A.offset||C.focusNode!==b.node||C.focusOffset!==b.offset)){var O=G.createRange();O.setStart(A.node,A.offset),C.removeAllRanges(),et>Gt?(C.addRange(O),C.extend(b.node,b.offset)):(O.setEnd(b.node,b.offset),C.addRange(O))}}}}for(G=[],C=g;C=C.parentNode;)C.nodeType===1&&G.push({element:C,left:C.scrollLeft,top:C.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<G.length;g++){var B=G[g];B.element.scrollLeft=B.left,B.element.scrollTop=B.top}}rc=!!ku,xu=ku=null}finally{Dt=r,q.p=s,U.T=n}}t.current=e,Re=2}}function Ih(){if(Re===2){Re=0;var t=da,e=Is,n=(e.flags&8772)!==0;if((e.subtreeFlags&8772)!==0||n){n=U.T,U.T=null;var s=q.p;q.p=2;var r=Dt;Dt|=4;try{Sh(t,e.alternate,e)}finally{Dt=r,q.p=s,U.T=n}}Re=3}}function Yh(){if(Re===4||Re===3){Re=0,Or();var t=da,e=Is,n=Ys,s=Nh;(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?Re=5:(Re=0,Is=da=null,Ph(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(ha=null),al(n),e=e.stateNode,xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(Ui,e,void 0,(e.current.flags&128)===128)}catch{}if(s!==null){e=U.T,r=q.p,q.p=2,U.T=null;try{for(var c=t.onRecoverableError,d=0;d<s.length;d++){var g=s[d];c(g.value,{componentStack:g.stack})}}finally{U.T=e,q.p=r}}(Ys&3)!==0&&Zo(),$n(t),r=t.pendingLanes,(n&4194090)!==0&&(r&42)!==0?t===Su?ir++:(ir=0,Su=t):ir=0,ar(0)}}function Ph(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Va(e)))}function Zo(t){return Vh(),Ih(),Yh(),Qh()}function Qh(){if(Re!==5)return!1;var t=da,e=vu;vu=0;var n=al(Ys),s=U.T,r=q.p;try{q.p=32>n?32:n,U.T=null,n=bu,bu=null;var c=da,d=Ys;if(Re=0,Is=da=null,Ys=0,(Dt&6)!==0)throw Error(R(331));var g=Dt;if(Dt|=4,wh(c.current),Eh(c,c.current,d,n),Dt=g,ar(0,!1),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(Ui,c)}catch{}return!0}finally{q.p=r,U.T=s,Ph(t,e)}}function Xh(t,e,n){e=Ie(n,e),e=Fc(t.stateNode,e,2),t=Qn(t,e,2),t!==null&&(Li(t,2),$n(t))}function Ht(t,e,n){if(t.tag===3)Xh(t,t,n);else for(;e!==null;){if(e.tag===3){Xh(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ha===null||!ha.has(s))){t=Ie(n,t),n=Wf(2),s=Qn(e,n,2),s!==null&&(Ff(n,s,e,t),Li(s,2),$n(s));break}}e=e.return}}function Ru(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new og;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(gu=!0,r.add(n),t=dg.bind(null,t,e,n),e.then(t,t))}function dg(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Vt===t&&(Ot&n)===n&&(te===4||te===3&&(Ot&62914560)===Ot&&300>qe()-yu?(Dt&2)===0&&Ps(t,0):mu|=n,Vs===Ot&&(Vs=0)),$n(t)}function Kh(t,e){e===0&&(e=Ea()),t=Qi(t,e),t!==null&&(Li(t,e),$n(t))}function gg(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Kh(t,n)}function mg(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(R(314))}s!==null&&s.delete(e),Kh(t,n)}function pg(t,e){return ns(t,e)}var Jo=null,Xs=null,_u=!1,Wo=!1,Eu=!1,$a=0;function $n(t){t!==Xs&&t.next===null&&(Xs===null?Jo=Xs=t:Xs=Xs.next=t),Wo=!0,_u||(_u=!0,vg())}function ar(t,e){if(!Eu&&Wo){Eu=!0;do for(var n=!1,s=Jo;s!==null;){if(t!==0){var r=s.pendingLanes;if(r===0)var c=0;else{var d=s.suspendedLanes,g=s.pingedLanes;c=(1<<31-Yt(42|t)+1)-1,c&=r&~(d&~g),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(n=!0,Fh(s,c))}else c=Ot,c=_a(s,s===Vt?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(c&3)===0||Di(s,c)||(n=!0,Fh(s,c));s=s.next}while(n);Eu=!1}}function yg(){Zh()}function Zh(){Wo=_u=!1;var t=0;$a!==0&&(Eg()&&(t=$a),$a=0);for(var e=qe(),n=null,s=Jo;s!==null;){var r=s.next,c=Jh(s,e);c===0?(s.next=null,n===null?Jo=r:n.next=r,r===null&&(Xs=n)):(n=s,(t!==0||(c&3)!==0)&&(Wo=!0)),s=r}ar(t)}function Jh(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,c=t.pendingLanes&-62914561;0<c;){var d=31-Yt(c),g=1<<d,y=r[d];y===-1?((g&n)===0||(g&s)!==0)&&(r[d]=ls(g,e)):y<=e&&(t.expiredLanes|=g),c&=~g}if(e=Vt,n=Ot,n=_a(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,n===0||t===e&&(Lt===2||Lt===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&is(s),t.callbackNode=null,t.callbackPriority=0;if((n&3)===0||Di(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(s!==null&&is(s),al(n)){case 2:case 8:n=as;break;case 32:n=_t;break;case 268435456:n=tl;break;default:n=_t}return s=Wh.bind(null,t),n=ns(n,s),t.callbackPriority=e,t.callbackNode=n,e}return s!==null&&s!==null&&is(s),t.callbackPriority=2,t.callbackNode=null,2}function Wh(t,e){if(Re!==0&&Re!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Zo()&&t.callbackNode!==n)return null;var s=Ot;return s=_a(t,t===Vt?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(Lh(t,s,e),Jh(t,qe()),t.callbackNode!=null&&t.callbackNode===n?Wh.bind(null,t):null)}function Fh(t,e){if(Zo())return null;Lh(t,e,!0)}function vg(){Mg(function(){(Dt&6)!==0?ns(Ta,yg):Zh()})}function Cu(){return $a===0&&($a=nl()),$a}function $h(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ds(""+t)}function td(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function bg(t,e,n,s,r){if(e==="submit"&&n&&n.stateNode===r){var c=$h((r[Ae]||null).action),d=s.submitter;d&&(e=(e=d[Ae]||null)?$h(e.formAction):d.getAttribute("formAction"),e!==null&&(c=e,d=null));var g=new vs("action","action",null,s,r);t.push({event:g,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if($a!==0){var y=d?td(r,d):new FormData(r);Xc(n,{pending:!0,data:y,method:r.method,action:c},null,y)}}else typeof c=="function"&&(g.preventDefault(),y=d?td(r,d):new FormData(r),Xc(n,{pending:!0,data:y,method:r.method,action:c},c,y))},currentTarget:r}]})}}for(var Mu=0;Mu<Yi.length;Mu++){var wu=Yi[Mu],Sg=wu.toLowerCase(),Ag=wu[0].toUpperCase()+wu.slice(1);le(Sg,"on"+Ag)}le(jn,"onAnimationEnd"),le(Rs,"onAnimationIteration"),le(fo,"onAnimationStart"),le("dblclick","onDoubleClick"),le("focusin","onFocus"),le("focusout","onBlur"),le(ho,"onTransitionRun"),le(go,"onTransitionStart"),le(Hc,"onTransitionCancel"),le(mo,"onTransitionEnd"),kn("onMouseEnter",["mouseout","mouseover"]),kn("onMouseLeave",["mouseout","mouseover"]),kn("onPointerEnter",["pointerout","pointerover"]),kn("onPointerLeave",["pointerout","pointerover"]),ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Og=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sr));function ed(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;t:{var c=void 0;if(e)for(var d=s.length-1;0<=d;d--){var g=s[d],y=g.instance,_=g.currentTarget;if(g=g.listener,y!==c&&r.isPropagationStopped())break t;c=g,r.currentTarget=_;try{c(r)}catch(N){Go(N)}r.currentTarget=null,c=y}else for(d=0;d<s.length;d++){if(g=s[d],y=g.instance,_=g.currentTarget,g=g.listener,y!==c&&r.isPropagationStopped())break t;c=g,r.currentTarget=_;try{c(r)}catch(N){Go(N)}r.currentTarget=null,c=y}}}}function yt(t,e){var n=e[rs];n===void 0&&(n=e[rs]=new Set);var s=t+"__bubble";n.has(s)||(nd(e,t,2,!1),n.add(s))}function Uu(t,e,n){var s=0;e&&(s|=4),nd(n,t,s,e)}var Fo="_reactListening"+Math.random().toString(36).slice(2);function Nu(t){if(!t[Fo]){t[Fo]=!0,at.forEach(function(n){n!=="selectionchange"&&(Og.has(n)||Uu(n,!1,t),Uu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fo]||(e[Fo]=!0,Uu("selectionchange",!1,e))}}function nd(t,e,n,s){switch(Ed(e)){case 2:var r=Zg;break;case 8:r=Jg;break;default:r=Pu}n=r.bind(null,e,n,t),r=void 0,!Gn||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Du(t,e,n,s,r){var c=s;if((e&1)===0&&(e&2)===0&&s!==null)t:for(;;){if(s===null)return;var d=s.tag;if(d===3||d===4){var g=s.stateNode.containerInfo;if(g===r)break;if(d===4)for(d=s.return;d!==null;){var y=d.tag;if((y===3||y===4)&&d.stateNode.containerInfo===r)return;d=d.return}for(;g!==null;){if(d=pn(g),d===null)return;if(y=d.tag,y===5||y===6||y===26||y===27){s=c=d;continue t}g=g.parentNode}}s=s.return}ml(function(){var _=c,N=Ma(n),G=[];t:{var E=po.get(t);if(E!==void 0){var C=vs,lt=t;switch(t){case"keypress":if(Ua(n)===0)break t;case"keydown":case"keyup":C=Uc;break;case"focusin":lt="focus",C=vl;break;case"focusout":lt="blur",C=vl;break;case"beforeblur":case"afterblur":C=vl;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=yl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=Ss;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=Qr;break;case jn:case Rs:case fo:C=Ec;break;case mo:C=Lc;break;case"scroll":case"scrollend":C=Oc;break;case"wheel":C=Xr;break;case"copy":case"cut":case"paste":C=zr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=Pr;break;case"toggle":case"beforetoggle":C=bl}var et=(e&4)!==0,Gt=!et&&(t==="scroll"||t==="scrollend"),A=et?E!==null?E+"Capture":null:E;et=[];for(var b=_,O;b!==null;){var B=b;if(O=B.stateNode,B=B.tag,B!==5&&B!==26&&B!==27||O===null||A===null||(B=qn(b,A),B!=null&&et.push(lr(b,B,O))),Gt)break;b=b.return}0<et.length&&(E=new C(E,lt,null,n,N),G.push({event:E,listeners:et}))}}if((e&7)===0){t:{if(E=t==="mouseover"||t==="pointerover",C=t==="mouseout"||t==="pointerout",E&&n!==gs&&(lt=n.relatedTarget||n.fromElement)&&(pn(lt)||lt[ki]))break t;if((C||E)&&(E=N.window===N?N:(E=N.ownerDocument)?E.defaultView||E.parentWindow:window,C?(lt=n.relatedTarget||n.toElement,C=_,lt=lt?pn(lt):null,lt!==null&&(Gt=ct(lt),et=lt.tag,lt!==Gt||et!==5&&et!==27&&et!==6)&&(lt=null)):(C=null,lt=_),C!==lt)){if(et=yl,B="onMouseLeave",A="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(et=Pr,B="onPointerLeave",A="onPointerEnter",b="pointer"),Gt=C==null?E:Ln(C),O=lt==null?E:Ln(lt),E=new et(B,b+"leave",C,n,N),E.target=Gt,E.relatedTarget=O,B=null,pn(N)===_&&(et=new et(A,b+"enter",lt,n,N),et.target=O,et.relatedTarget=Gt,B=et),Gt=B,C&&lt)e:{for(et=C,A=lt,b=0,O=et;O;O=Ks(O))b++;for(O=0,B=A;B;B=Ks(B))O++;for(;0<b-O;)et=Ks(et),b--;for(;0<O-b;)A=Ks(A),O--;for(;b--;){if(et===A||A!==null&&et===A.alternate)break e;et=Ks(et),A=Ks(A)}et=null}else et=null;C!==null&&id(G,E,C,et,!1),lt!==null&&Gt!==null&&id(G,Gt,lt,et,!0)}}t:{if(E=_?Ln(_):window,C=E.nodeName&&E.nodeName.toLowerCase(),C==="select"||C==="input"&&E.type==="file")var X=io;else if(eo(E))if(ao)X=zc;else{X=lo;var mt=so}else C=E.nodeName,!C||C.toLowerCase()!=="input"||E.type!=="checkbox"&&E.type!=="radio"?_&&hs(_.elementType)&&(X=io):X=ro;if(X&&(X=X(t,_))){Sl(G,X,n,N);break t}mt&&mt(t,E,_),t==="focusout"&&_&&E.type==="number"&&_.memoizedProps.value!=null&&dl(E,"number",E.value)}switch(mt=_?Ln(_):window,t){case"focusin":(eo(mt)||mt.contentEditable==="true")&&(Ii=mt,El=_,ui=null);break;case"focusout":ui=El=Ii=null;break;case"mousedown":Ts=!0;break;case"contextmenu":case"mouseup":case"dragend":Ts=!1,co(G,n,N);break;case"selectionchange":if(_l)break;case"keydown":case"keyup":co(G,n,N)}var W;if(ri)t:{switch(t){case"compositionstart":var nt="onCompositionStart";break t;case"compositionend":nt="onCompositionEnd";break t;case"compositionupdate":nt="onCompositionUpdate";break t}nt=void 0}else oi?Fr(t,n)&&(nt="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(nt="onCompositionStart");nt&&(Zr&&n.locale!=="ko"&&(oi||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&oi&&(W=li()):(vn=N,ms="value"in vn?vn.value:vn.textContent,oi=!0)),mt=$o(_,nt),0<mt.length&&(nt=new jr(nt,t,null,n,N),G.push({event:nt,listeners:mt}),W?nt.data=W:(W=$r(n),W!==null&&(nt.data=W)))),(W=Bc?qc(t,n):to(t,n))&&(nt=$o(_,"onBeforeInput"),0<nt.length&&(mt=new jr("onBeforeInput","beforeinput",null,n,N),G.push({event:mt,listeners:nt}),mt.data=W)),bg(G,t,_,n,N)}ed(G,e)})}function lr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function $o(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,c=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||c===null||(r=qn(t,n),r!=null&&s.unshift(lr(t,r,c)),r=qn(t,e),r!=null&&s.push(lr(t,r,c))),t.tag===3)return s;t=t.return}return[]}function Ks(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function id(t,e,n,s,r){for(var c=e._reactName,d=[];n!==null&&n!==s;){var g=n,y=g.alternate,_=g.stateNode;if(g=g.tag,y!==null&&y===s)break;g!==5&&g!==26&&g!==27||_===null||(y=_,r?(_=qn(n,c),_!=null&&d.unshift(lr(n,_,y))):r||(_=qn(n,c),_!=null&&d.push(lr(n,_,y)))),n=n.return}d.length!==0&&t.push({event:e,listeners:d})}var Tg=/\r\n?/g,Rg=/\u0000|\uFFFD/g;function ad(t){return(typeof t=="string"?t:""+t).replace(Tg,`
`).replace(Rg,"")}function sd(t,e){return e=ad(e),ad(t)===e}function tc(){}function qt(t,e,n,s,r,c){switch(n){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||Z(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&Z(t,""+s);break;case"className":Bi(t,"class",s);break;case"tabIndex":Bi(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Bi(t,n,s);break;case"style":Br(t,s,c);break;case"data":if(e!=="object"){Bi(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=ds(""+s),t.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(n==="formAction"?(e!=="input"&&qt(t,e,"name",r.name,r,null),qt(t,e,"formEncType",r.formEncType,r,null),qt(t,e,"formMethod",r.formMethod,r,null),qt(t,e,"formTarget",r.formTarget,r,null)):(qt(t,e,"encType",r.encType,r,null),qt(t,e,"method",r.method,r,null),qt(t,e,"target",r.target,r,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=ds(""+s),t.setAttribute(n,s);break;case"onClick":s!=null&&(t.onclick=tc);break;case"onScroll":s!=null&&yt("scroll",t);break;case"onScrollEnd":s!=null&&yt("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(R(61));if(n=s.__html,n!=null){if(r.children!=null)throw Error(R(60));t.innerHTML=n}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}n=ds(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""+s):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":s===!0?t.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,s):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(n,s):t.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(n):t.setAttribute(n,s);break;case"popover":yt("beforetoggle",t),yt("toggle",t),ai(t,"popover",s);break;case"xlinkActuate":yn(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":yn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":yn(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":yn(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":yn(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":yn(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":yn(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":yn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":yn(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":ai(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Ac.get(n)||n,ai(t,n,s))}}function Lu(t,e,n,s,r,c){switch(n){case"style":Br(t,s,c);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(R(61));if(n=s.__html,n!=null){if(r.children!=null)throw Error(R(60));t.innerHTML=n}}break;case"children":typeof s=="string"?Z(t,s):(typeof s=="number"||typeof s=="bigint")&&Z(t,""+s);break;case"onScroll":s!=null&&yt("scroll",t);break;case"onScrollEnd":s!=null&&yt("scrollend",t);break;case"onClick":s!=null&&(t.onclick=tc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nr.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),c=t[Ae]||null,c=c!=null?c[n]:null,typeof c=="function"&&t.removeEventListener(e,c,r),typeof s=="function")){typeof c!="function"&&c!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,s,r);break t}n in t?t[n]=s:s===!0?t.setAttribute(n,""):ai(t,n,s)}}}function _e(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yt("error",t),yt("load",t);var s=!1,r=!1,c;for(c in n)if(n.hasOwnProperty(c)){var d=n[c];if(d!=null)switch(c){case"src":s=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(R(137,e));default:qt(t,e,c,d,n,null)}}r&&qt(t,e,"srcSet",n.srcSet,n,null),s&&qt(t,e,"src",n.src,n,null);return;case"input":yt("invalid",t);var g=c=d=r=null,y=null,_=null;for(s in n)if(n.hasOwnProperty(s)){var N=n[s];if(N!=null)switch(s){case"name":r=N;break;case"type":d=N;break;case"checked":y=N;break;case"defaultChecked":_=N;break;case"value":c=N;break;case"defaultValue":g=N;break;case"children":case"dangerouslySetInnerHTML":if(N!=null)throw Error(R(137,e));break;default:qt(t,e,s,N,n,null)}}fs(t,c,g,y,_,d,r,!1),us(t);return;case"select":yt("invalid",t),s=d=c=null;for(r in n)if(n.hasOwnProperty(r)&&(g=n[r],g!=null))switch(r){case"value":c=g;break;case"defaultValue":d=g;break;case"multiple":s=g;default:qt(t,e,r,g,n,null)}e=c,n=d,t.multiple=!!s,e!=null?xn(t,!!s,e,!1):n!=null&&xn(t,!!s,n,!0);return;case"textarea":yt("invalid",t),c=r=s=null;for(d in n)if(n.hasOwnProperty(d)&&(g=n[d],g!=null))switch(d){case"value":s=g;break;case"defaultValue":r=g;break;case"children":c=g;break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(R(91));break;default:qt(t,e,d,g,n,null)}ee(t,s,r,c),us(t);return;case"option":for(y in n)if(n.hasOwnProperty(y)&&(s=n[y],s!=null))switch(y){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:qt(t,e,y,s,n,null)}return;case"dialog":yt("beforetoggle",t),yt("toggle",t),yt("cancel",t),yt("close",t);break;case"iframe":case"object":yt("load",t);break;case"video":case"audio":for(s=0;s<sr.length;s++)yt(sr[s],t);break;case"image":yt("error",t),yt("load",t);break;case"details":yt("toggle",t);break;case"embed":case"source":case"link":yt("error",t),yt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_ in n)if(n.hasOwnProperty(_)&&(s=n[_],s!=null))switch(_){case"children":case"dangerouslySetInnerHTML":throw Error(R(137,e));default:qt(t,e,_,s,n,null)}return;default:if(hs(e)){for(N in n)n.hasOwnProperty(N)&&(s=n[N],s!==void 0&&Lu(t,e,N,s,n,void 0));return}}for(g in n)n.hasOwnProperty(g)&&(s=n[g],s!=null&&qt(t,e,g,s,n,null))}function _g(t,e,n,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,c=null,d=null,g=null,y=null,_=null,N=null;for(C in n){var G=n[C];if(n.hasOwnProperty(C)&&G!=null)switch(C){case"checked":break;case"value":break;case"defaultValue":y=G;default:s.hasOwnProperty(C)||qt(t,e,C,null,s,G)}}for(var E in s){var C=s[E];if(G=n[E],s.hasOwnProperty(E)&&(C!=null||G!=null))switch(E){case"type":c=C;break;case"name":r=C;break;case"checked":_=C;break;case"defaultChecked":N=C;break;case"value":d=C;break;case"defaultValue":g=C;break;case"children":case"dangerouslySetInnerHTML":if(C!=null)throw Error(R(137,e));break;default:C!==G&&qt(t,e,E,C,s,G)}}hl(t,d,g,y,_,N,c,r);return;case"select":C=d=g=E=null;for(c in n)if(y=n[c],n.hasOwnProperty(c)&&y!=null)switch(c){case"value":break;case"multiple":C=y;default:s.hasOwnProperty(c)||qt(t,e,c,null,s,y)}for(r in s)if(c=s[r],y=n[r],s.hasOwnProperty(r)&&(c!=null||y!=null))switch(r){case"value":E=c;break;case"defaultValue":g=c;break;case"multiple":d=c;default:c!==y&&qt(t,e,r,c,s,y)}e=g,n=d,s=C,E!=null?xn(t,!!n,E,!1):!!s!=!!n&&(e!=null?xn(t,!!n,e,!0):xn(t,!!n,n?[]:"",!1));return;case"textarea":C=E=null;for(g in n)if(r=n[g],n.hasOwnProperty(g)&&r!=null&&!s.hasOwnProperty(g))switch(g){case"value":break;case"children":break;default:qt(t,e,g,null,s,r)}for(d in s)if(r=s[d],c=n[d],s.hasOwnProperty(d)&&(r!=null||c!=null))switch(d){case"value":E=r;break;case"defaultValue":C=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(R(91));break;default:r!==c&&qt(t,e,d,r,s,c)}kr(t,E,C);return;case"option":for(var lt in n)if(E=n[lt],n.hasOwnProperty(lt)&&E!=null&&!s.hasOwnProperty(lt))switch(lt){case"selected":t.selected=!1;break;default:qt(t,e,lt,null,s,E)}for(y in s)if(E=s[y],C=n[y],s.hasOwnProperty(y)&&E!==C&&(E!=null||C!=null))switch(y){case"selected":t.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:qt(t,e,y,E,s,C)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var et in n)E=n[et],n.hasOwnProperty(et)&&E!=null&&!s.hasOwnProperty(et)&&qt(t,e,et,null,s,E);for(_ in s)if(E=s[_],C=n[_],s.hasOwnProperty(_)&&E!==C&&(E!=null||C!=null))switch(_){case"children":case"dangerouslySetInnerHTML":if(E!=null)throw Error(R(137,e));break;default:qt(t,e,_,E,s,C)}return;default:if(hs(e)){for(var Gt in n)E=n[Gt],n.hasOwnProperty(Gt)&&E!==void 0&&!s.hasOwnProperty(Gt)&&Lu(t,e,Gt,void 0,s,E);for(N in s)E=s[N],C=n[N],!s.hasOwnProperty(N)||E===C||E===void 0&&C===void 0||Lu(t,e,N,E,s,C);return}}for(var A in n)E=n[A],n.hasOwnProperty(A)&&E!=null&&!s.hasOwnProperty(A)&&qt(t,e,A,null,s,E);for(G in s)E=s[G],C=n[G],!s.hasOwnProperty(G)||E===C||E==null&&C==null||qt(t,e,G,E,s,C)}var ku=null,xu=null;function ec(t){return t.nodeType===9?t:t.ownerDocument}function ld(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rd(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Bu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qu=null;function Eg(){var t=window.event;return t&&t.type==="popstate"?t===qu?!1:(qu=t,!0):(qu=null,!1)}var od=typeof setTimeout=="function"?setTimeout:void 0,Cg=typeof clearTimeout=="function"?clearTimeout:void 0,cd=typeof Promise=="function"?Promise:void 0,Mg=typeof queueMicrotask=="function"?queueMicrotask:typeof cd<"u"?function(t){return cd.resolve(null).then(t).catch(wg)}:od;function wg(t){setTimeout(function(){throw t})}function ma(t){return t==="head"}function ud(t,e){var n=e,s=0,r=0;do{var c=n.nextSibling;if(t.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"){if(0<s&&8>s){n=s;var d=t.ownerDocument;if(n&1&&rr(d.documentElement),n&2&&rr(d.body),n&4)for(n=d.head,rr(n),d=n.firstChild;d;){var g=d.nextSibling,y=d.nodeName;d[Ca]||y==="SCRIPT"||y==="STYLE"||y==="LINK"&&d.rel.toLowerCase()==="stylesheet"||n.removeChild(d),d=g}}if(r===0){t.removeChild(c),mr(e);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:s=n.charCodeAt(0)-48;else s=0;n=c}while(n);mr(e)}function Gu(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Gu(n),rl(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function Ug(t,e,n,s){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[Ca])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(c=t.getAttribute("rel"),c==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(c!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(c=t.getAttribute("src"),(c!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&c&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var c=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===c)return t}else return t;if(t=Nn(t.nextSibling),t===null)break}return null}function Ng(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Nn(t.nextSibling),t===null))return null;return t}function zu(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Dg(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var s=function(){e(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function Nn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var Hu=null;function fd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function hd(t,e,n){switch(e=ec(n),t){case"html":if(t=e.documentElement,!t)throw Error(R(452));return t;case"head":if(t=e.head,!t)throw Error(R(453));return t;case"body":if(t=e.body,!t)throw Error(R(454));return t;default:throw Error(R(451))}}function rr(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);rl(t)}var fn=new Map,dd=new Set;function nc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Mi=q.d;q.d={f:Lg,r:kg,D:xg,C:Bg,L:qg,m:Gg,X:Hg,S:zg,M:jg};function Lg(){var t=Mi.f(),e=Xo();return t||e}function kg(t){var e=ni(t);e!==null&&e.tag===5&&e.type==="form"?Lf(e):Mi.r(t)}var Zs=typeof document>"u"?null:document;function gd(t,e,n){var s=Zs;if(s&&typeof e=="string"&&e){var r=He(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),dd.has(r)||(dd.add(r),t={rel:t,crossOrigin:n,href:e},s.querySelector(r)===null&&(e=s.createElement("link"),_e(e,"link",t),se(e),s.head.appendChild(e)))}}function xg(t){Mi.D(t),gd("dns-prefetch",t,null)}function Bg(t,e){Mi.C(t,e),gd("preconnect",t,e)}function qg(t,e,n){Mi.L(t,e,n);var s=Zs;if(s&&t&&e){var r='link[rel="preload"][as="'+He(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+He(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+He(n.imageSizes)+'"]')):r+='[href="'+He(t)+'"]';var c=r;switch(e){case"style":c=Js(t);break;case"script":c=Ws(t)}fn.has(c)||(t=Q({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),fn.set(c,t),s.querySelector(r)!==null||e==="style"&&s.querySelector(or(c))||e==="script"&&s.querySelector(cr(c))||(e=s.createElement("link"),_e(e,"link",t),se(e),s.head.appendChild(e)))}}function Gg(t,e){Mi.m(t,e);var n=Zs;if(n&&t){var s=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+He(s)+'"][href="'+He(t)+'"]',c=r;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=Ws(t)}if(!fn.has(c)&&(t=Q({rel:"modulepreload",href:t},e),fn.set(c,t),n.querySelector(r)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(cr(c)))return}s=n.createElement("link"),_e(s,"link",t),se(s),n.head.appendChild(s)}}}function zg(t,e,n){Mi.S(t,e,n);var s=Zs;if(s&&t){var r=xi(s).hoistableStyles,c=Js(t);e=e||"default";var d=r.get(c);if(!d){var g={loading:0,preload:null};if(d=s.querySelector(or(c)))g.loading=5;else{t=Q({rel:"stylesheet",href:t,"data-precedence":e},n),(n=fn.get(c))&&ju(t,n);var y=d=s.createElement("link");se(y),_e(y,"link",t),y._p=new Promise(function(_,N){y.onload=_,y.onerror=N}),y.addEventListener("load",function(){g.loading|=1}),y.addEventListener("error",function(){g.loading|=2}),g.loading|=4,ic(d,e,s)}d={type:"stylesheet",instance:d,count:1,state:g},r.set(c,d)}}}function Hg(t,e){Mi.X(t,e);var n=Zs;if(n&&t){var s=xi(n).hoistableScripts,r=Ws(t),c=s.get(r);c||(c=n.querySelector(cr(r)),c||(t=Q({src:t,async:!0},e),(e=fn.get(r))&&Vu(t,e),c=n.createElement("script"),se(c),_e(c,"link",t),n.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},s.set(r,c))}}function jg(t,e){Mi.M(t,e);var n=Zs;if(n&&t){var s=xi(n).hoistableScripts,r=Ws(t),c=s.get(r);c||(c=n.querySelector(cr(r)),c||(t=Q({src:t,async:!0,type:"module"},e),(e=fn.get(r))&&Vu(t,e),c=n.createElement("script"),se(c),_e(c,"link",t),n.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},s.set(r,c))}}function md(t,e,n,s){var r=(r=ot.current)?nc(r):null;if(!r)throw Error(R(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Js(n.href),n=xi(r).hoistableStyles,s=n.get(e),s||(s={type:"style",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Js(n.href);var c=xi(r).hoistableStyles,d=c.get(t);if(d||(r=r.ownerDocument||r,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(t,d),(c=r.querySelector(or(t)))&&!c._p&&(d.instance=c,d.state.loading=5),fn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},fn.set(t,n),c||Vg(r,t,n,d.state))),e&&s===null)throw Error(R(528,""));return d}if(e&&s!==null)throw Error(R(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Ws(n),n=xi(r).hoistableScripts,s=n.get(e),s||(s={type:"script",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(R(444,t))}}function Js(t){return'href="'+He(t)+'"'}function or(t){return'link[rel="stylesheet"]['+t+"]"}function pd(t){return Q({},t,{"data-precedence":t.precedence,precedence:null})}function Vg(t,e,n,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),_e(e,"link",n),se(e),t.head.appendChild(e))}function Ws(t){return'[src="'+He(t)+'"]'}function cr(t){return"script[async]"+t}function yd(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+He(n.href)+'"]');if(s)return e.instance=s,se(s),s;var r=Q({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),se(s),_e(s,"style",r),ic(s,n.precedence,t),e.instance=s;case"stylesheet":r=Js(n.href);var c=t.querySelector(or(r));if(c)return e.state.loading|=4,e.instance=c,se(c),c;s=pd(n),(r=fn.get(r))&&ju(s,r),c=(t.ownerDocument||t).createElement("link"),se(c);var d=c;return d._p=new Promise(function(g,y){d.onload=g,d.onerror=y}),_e(c,"link",s),e.state.loading|=4,ic(c,n.precedence,t),e.instance=c;case"script":return c=Ws(n.src),(r=t.querySelector(cr(c)))?(e.instance=r,se(r),r):(s=n,(r=fn.get(c))&&(s=Q({},n),Vu(s,r)),t=t.ownerDocument||t,r=t.createElement("script"),se(r),_e(r,"link",s),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(R(443,e.type))}else e.type==="stylesheet"&&(e.state.loading&4)===0&&(s=e.instance,e.state.loading|=4,ic(s,n.precedence,t));return e.instance}function ic(t,e,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=s.length?s[s.length-1]:null,c=r,d=0;d<s.length;d++){var g=s[d];if(g.dataset.precedence===e)c=g;else if(c!==r)break}c?c.parentNode.insertBefore(t,c.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function ju(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Vu(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var ac=null;function vd(t,e,n){if(ac===null){var s=new Map,r=ac=new Map;r.set(n,s)}else r=ac,s=r.get(n),s||(s=new Map,r.set(n,s));if(s.has(t))return s;for(s.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var c=n[r];if(!(c[Ca]||c[ue]||t==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var d=c.getAttribute(e)||"";d=t+d;var g=s.get(d);g?g.push(c):s.set(d,[c])}}return s}function bd(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function Ig(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function Sd(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var ur=null;function Yg(){}function Pg(t,e,n){if(ur===null)throw Error(R(475));var s=ur;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(e.state.loading&4)===0){if(e.instance===null){var r=Js(n.href),c=t.querySelector(or(r));if(c){t=c._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(s.count++,s=sc.bind(s),t.then(s,s)),e.state.loading|=4,e.instance=c,se(c);return}c=t.ownerDocument||t,n=pd(n),(r=fn.get(r))&&ju(n,r),c=c.createElement("link"),se(c);var d=c;d._p=new Promise(function(g,y){d.onload=g,d.onerror=y}),_e(c,"link",n),e.instance=c}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(e,t),(t=e.state.preload)&&(e.state.loading&3)===0&&(s.count++,e=sc.bind(s),t.addEventListener("load",e),t.addEventListener("error",e))}}function Qg(){if(ur===null)throw Error(R(475));var t=ur;return t.stylesheets&&t.count===0&&Iu(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&Iu(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function sc(){if(this.count--,this.count===0){if(this.stylesheets)Iu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var lc=null;function Iu(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,lc=new Map,e.forEach(Xg,t),lc=null,sc.call(t))}function Xg(t,e){if(!(e.state.loading&4)){var n=lc.get(t);if(n)var s=n.get(null);else{n=new Map,lc.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<r.length;c++){var d=r[c];(d.nodeName==="LINK"||d.getAttribute("media")!=="not all")&&(n.set(d.dataset.precedence,d),s=d)}s&&n.set(null,s)}r=e.instance,d=r.getAttribute("data-precedence"),c=n.get(d)||s,c===s&&n.set(null,r),n.set(d,r),this.count++,s=sc.bind(this),r.addEventListener("load",s),r.addEventListener("error",s),c?c.parentNode.insertBefore(r,c.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var fr={$$typeof:ce,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function Kg(t,e,n,s,r,c,d,g){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ae(0),this.hiddenUpdates=ae(null),this.identifierPrefix=s,this.onUncaughtError=r,this.onCaughtError=c,this.onRecoverableError=d,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=g,this.incompleteTransitions=new Map}function Ad(t,e,n,s,r,c,d,g,y,_,N,G){return t=new Kg(t,e,n,d,g,y,_,G),e=1,c===!0&&(e|=24),c=xe(3,null,null,e),t.current=c,c.stateNode=t,e=In(),e.refCount++,t.pooledCache=e,e.refCount++,c.memoizedState={element:s,isDehydrated:n,cache:e},Ns(c),t}function Od(t){return t?(t=gi,t):gi}function Td(t,e,n,s,r,c){r=Od(r),s.context===null?s.context=r:s.pendingContext=r,s=Pn(e),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=Qn(t,s,e),n!==null&&(nn(n,t,e),Qa(n,t,e))}function Rd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Yu(t,e){Rd(t,e),(t=t.alternate)&&Rd(t,e)}function _d(t){if(t.tag===13){var e=Qi(t,67108864);e!==null&&nn(e,t,67108864),Yu(t,67108864)}}var rc=!0;function Zg(t,e,n,s){var r=U.T;U.T=null;var c=q.p;try{q.p=2,Pu(t,e,n,s)}finally{q.p=c,U.T=r}}function Jg(t,e,n,s){var r=U.T;U.T=null;var c=q.p;try{q.p=8,Pu(t,e,n,s)}finally{q.p=c,U.T=r}}function Pu(t,e,n,s){if(rc){var r=Qu(s);if(r===null)Du(t,e,s,oc,n),Cd(t,s);else if(Fg(r,t,e,n,s))s.stopPropagation();else if(Cd(t,s),e&4&&-1<Wg.indexOf(t)){for(;r!==null;){var c=ni(r);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var d=gn(c.pendingLanes);if(d!==0){var g=c;for(g.pendingLanes|=2,g.entangledLanes|=2;d;){var y=1<<31-Yt(d);g.entanglements[1]|=y,d&=~y}$n(c),(Dt&6)===0&&(Po=qe()+500,ar(0))}}break;case 13:g=Qi(c,2),g!==null&&nn(g,c,2),Xo(),Yu(c,2)}if(c=Qu(s),c===null&&Du(t,e,s,oc,n),c===r)break;r=c}r!==null&&s.stopPropagation()}else Du(t,e,s,null,n)}}function Qu(t){return t=Ma(t),Xu(t)}var oc=null;function Xu(t){if(oc=null,t=pn(t),t!==null){var e=ct(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=Tt(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return oc=t,null}function Ed(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Oa()){case Ta:return 2;case as:return 8;case _t:case Tr:return 32;case tl:return 268435456;default:return 32}default:return 32}}var Ku=!1,pa=null,ya=null,va=null,hr=new Map,dr=new Map,ba=[],Wg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Cd(t,e){switch(t){case"focusin":case"focusout":pa=null;break;case"dragenter":case"dragleave":ya=null;break;case"mouseover":case"mouseout":va=null;break;case"pointerover":case"pointerout":hr.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":dr.delete(e.pointerId)}}function gr(t,e,n,s,r,c){return t===null||t.nativeEvent!==c?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:c,targetContainers:[r]},e!==null&&(e=ni(e),e!==null&&_d(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Fg(t,e,n,s,r){switch(e){case"focusin":return pa=gr(pa,t,e,n,s,r),!0;case"dragenter":return ya=gr(ya,t,e,n,s,r),!0;case"mouseover":return va=gr(va,t,e,n,s,r),!0;case"pointerover":var c=r.pointerId;return hr.set(c,gr(hr.get(c)||null,t,e,n,s,r)),!0;case"gotpointercapture":return c=r.pointerId,dr.set(c,gr(dr.get(c)||null,t,e,n,s,r)),!0}return!1}function Md(t){var e=pn(t.target);if(e!==null){var n=ct(e);if(n!==null){if(e=n.tag,e===13){if(e=Tt(n),e!==null){t.blockedOn=e,wr(t.priority,function(){if(n.tag===13){var s=en();s=il(s);var r=Qi(n,s);r!==null&&nn(r,n,s),Yu(n,s)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function cc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qu(t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);gs=s,n.target.dispatchEvent(s),gs=null}else return e=ni(n),e!==null&&_d(e),t.blockedOn=n,!1;e.shift()}return!0}function wd(t,e,n){cc(t)&&n.delete(e)}function $g(){Ku=!1,pa!==null&&cc(pa)&&(pa=null),ya!==null&&cc(ya)&&(ya=null),va!==null&&cc(va)&&(va=null),hr.forEach(wd),dr.forEach(wd)}function uc(t,e){t.blockedOn===e&&(t.blockedOn=null,Ku||(Ku=!0,V.unstable_scheduleCallback(V.unstable_NormalPriority,$g)))}var fc=null;function Ud(t){fc!==t&&(fc=t,V.unstable_scheduleCallback(V.unstable_NormalPriority,function(){fc===t&&(fc=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],r=t[e+2];if(typeof s!="function"){if(Xu(s||n)===null)continue;break}var c=ni(n);c!==null&&(t.splice(e,3),e-=3,Xc(c,{pending:!0,data:r,method:n.method,action:s},s,r))}}))}function mr(t){function e(y){return uc(y,t)}pa!==null&&uc(pa,t),ya!==null&&uc(ya,t),va!==null&&uc(va,t),hr.forEach(e),dr.forEach(e);for(var n=0;n<ba.length;n++){var s=ba[n];s.blockedOn===t&&(s.blockedOn=null)}for(;0<ba.length&&(n=ba[0],n.blockedOn===null);)Md(n),n.blockedOn===null&&ba.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var r=n[s],c=n[s+1],d=r[Ae]||null;if(typeof c=="function")d||Ud(n);else if(d){var g=null;if(c&&c.hasAttribute("formAction")){if(r=c,d=c[Ae]||null)g=d.formAction;else if(Xu(r)!==null)continue}else g=d.action;typeof g=="function"?n[s+1]=g:(n.splice(s,3),s-=3),Ud(n)}}}function Zu(t){this._internalRoot=t}hc.prototype.render=Zu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(R(409));var n=e.current,s=en();Td(n,s,t,e,null,null)},hc.prototype.unmount=Zu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Td(t.current,2,null,t,null,null),Xo(),e[ki]=null}};function hc(t){this._internalRoot=t}hc.prototype.unstable_scheduleHydration=function(t){if(t){var e=sl();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ba.length&&e!==0&&e<ba[n].priority;n++);ba.splice(n,0,t),n===0&&Md(t)}};var Nd=ft.version;if(Nd!=="19.1.1")throw Error(R(527,Nd,"19.1.1"));q.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(R(188)):(t=Object.keys(t).join(","),Error(R(268,t)));return t=J(e),t=t!==null?D(t):null,t=t===null?null:t.stateNode,t};var tm={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dc.isDisabled&&dc.supportsFiber)try{Ui=dc.inject(tm),xt=dc}catch{}}return yr.createRoot=function(t,e){if(!K(t))throw Error(R(299));var n=!1,s="",r=Xf,c=Kf,d=Zf,g=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(c=e.onCaughtError),e.onRecoverableError!==void 0&&(d=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(g=e.unstable_transitionCallbacks)),e=Ad(t,1,!1,null,null,n,s,r,c,d,g,null),t[ki]=e.current,Nu(t),new Zu(e)},yr.hydrateRoot=function(t,e,n){if(!K(t))throw Error(R(299));var s=!1,r="",c=Xf,d=Kf,g=Zf,y=null,_=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(g=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(y=n.unstable_transitionCallbacks),n.formState!==void 0&&(_=n.formState)),e=Ad(t,1,!0,e,n??null,s,r,c,d,g,y,_),e.context=Od(null),n=e.current,s=en(),s=il(s),r=Pn(s),r.callback=null,Qn(n,r,s),n=s,e.current.lanes=n,Li(e,n),$n(e),t[ki]=e.current,Nu(t),new hc(e)},yr.version="19.1.1",yr}var jd;function fm(){if(jd)return Fu.exports;jd=1;function V(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(V)}catch(ft){console.error(ft)}}return V(),Fu.exports=um(),Fu.exports}var hm=fm();const dm="modulepreload",gm=function(V){return"/KuraWind/"+V},Vd={},pc=function(ft,it,R){let K=Promise.resolve();if(it&&it.length>0){let J=function(D){return Promise.all(D.map(Q=>Promise.resolve(Q).then(vt=>({status:"fulfilled",value:vt}),vt=>({status:"rejected",reason:vt}))))};document.getElementsByTagName("link");const Tt=document.querySelector("meta[property=csp-nonce]"),Nt=Tt?.nonce||Tt?.getAttribute("nonce");K=J(it.map(D=>{if(D=gm(D),D in Vd)return;Vd[D]=!0;const Q=D.endsWith(".css"),vt=Q?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${D}"]${vt}`))return;const rt=document.createElement("link");if(rt.rel=Q?"stylesheet":dm,Q||(rt.as="script"),rt.crossOrigin="",rt.href=D,Nt&&rt.setAttribute("nonce",Nt),document.head.appendChild(rt),Q)return new Promise((ht,kt)=>{rt.addEventListener("load",ht),rt.addEventListener("error",()=>kt(new Error(`Unable to preload CSS for ${D}`)))})}))}function ct(Tt){const Nt=new Event("vite:preloadError",{cancelable:!0});if(Nt.payload=Tt,window.dispatchEvent(Nt),!Nt.defaultPrevented)throw Tt}return K.then(Tt=>{for(const Nt of Tt||[])Nt.status==="rejected"&&ct(Nt.reason);return ft().catch(ct)})};function nf(){return It.jsx("div",{className:"spinner"})}var gc={exports:{}};/*@license Copyright 2015-2022 Ably Real-time Ltd (ably.com)

Ably JavaScript Library v2.12.0
https://github.com/ably/ably-js

Released under the Apache Licence v2.0*/var mm=gc.exports,Id;function pm(){return Id||(Id=1,(function(V,ft){(function(it,R){V.exports=R()})(mm,()=>{var it={},R={exports:it},K=Object.defineProperty,ct=Object.defineProperties,Tt=Object.getOwnPropertyDescriptor,Nt=Object.getOwnPropertyDescriptors,J=Object.getOwnPropertyNames,D=Object.getOwnPropertySymbols,Q=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable,rt=(i,a,l)=>a in i?K(i,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[a]=l,ht=(i,a)=>{for(var l in a||(a={}))Q.call(a,l)&&rt(i,l,a[l]);if(D)for(var l of D(a))vt.call(a,l)&&rt(i,l,a[l]);return i},kt=(i,a)=>ct(i,Nt(a)),Je=(i,a)=>{var l={};for(var o in i)Q.call(i,o)&&a.indexOf(o)<0&&(l[o]=i[o]);if(i!=null&&D)for(var o of D(i))a.indexOf(o)<0&&vt.call(i,o)&&(l[o]=i[o]);return l},Se=(i,a)=>{for(var l in a)K(i,l,{get:a[l],enumerable:!0})},ti=(i,a,l,o)=>{if(a&&typeof a=="object"||typeof a=="function")for(let u of J(a))!Q.call(i,u)&&u!==l&&K(i,u,{get:()=>a[u],enumerable:!(o=Tt(a,u))||o.enumerable});return i},hn=i=>ti(K({},"__esModule",{value:!0}),i),ce={};Se(ce,{ErrorInfo:()=>M,Realtime:()=>Rn,Rest:()=>Rs,default:()=>Uo,makeProtocolMessageFromDeserialized:()=>Rl,msgpack:()=>Si}),R.exports=hn(ce);var w=class{},bt=typeof Aa<"u"?Aa:typeof window<"u"?window:self;function ge(i,a){return`${i}`.padStart(a?3:2,"0")}function Ne(i){return w.Config.logTimestamps?function(a){const l=new Date;i(ge(l.getHours())+":"+ge(l.getMinutes())+":"+ge(l.getSeconds())+"."+ge(l.getMilliseconds(),1)+" "+a)}:function(a){i(a)}}var De=()=>{var i;let a,l;return typeof((i=bt?.console)==null?void 0:i.log)=="function"?(a=function(...o){console.log.apply(console,o)},l=console.warn?function(...o){console.warn.apply(console,o)}:a):a=l=function(){},[a,l].map(Ne)},ie=class vr{constructor(){this.deprecated=(a,l)=>{this.deprecationWarning(`${a} is deprecated and will be removed in a future version. ${l}`)},this.shouldLog=a=>a<=this.logLevel,this.setLog=(a,l)=>{a!==void 0&&(this.logLevel=a),l!==void 0&&(this.logHandler=this.logErrorHandler=l)},this.logLevel=vr.defaultLogLevel,this.logHandler=vr.defaultLogHandler,this.logErrorHandler=vr.defaultLogErrorHandler}static initLogHandlers(){const[a,l]=De();this.defaultLogHandler=a,this.defaultLogErrorHandler=l,this.defaultLogger=new vr}static logActionNoStrip(a,l,o,u){a.logAction(l,o,u)}logAction(a,l,o){this.shouldLog(a)&&(a===1?this.logErrorHandler:this.logHandler)("Ably: "+l+": "+o,a)}renamedClientOption(a,l){this.deprecationWarning(`The \`${a}\` client option has been renamed to \`${l}\`. Please update your code to use \`${l}\` instead. \`${a}\` will be removed in a future version.`)}renamedMethod(a,l,o){this.deprecationWarning(`\`${a}\`’s \`${l}\` method has been renamed to \`${o}\`. Please update your code to use \`${o}\` instead. \`${l}\` will be removed in a future version.`)}deprecationWarning(a){this.shouldLog(1)&&this.logErrorHandler(`Ably: Deprecation warning - ${a}`,1)}};ie.defaultLogLevel=1,ie.LOG_NONE=0,ie.LOG_ERROR=1,ie.LOG_MAJOR=2,ie.LOG_MINOR=3,ie.LOG_MICRO=4,ie.logAction=(i,a,l,o)=>{ie.logActionNoStrip(i,a,l,o)};var wi=ie,h=wi,Wt={};Se(Wt,{Format:()=>Or,allSame:()=>Ar,allToLowerCase:()=>el,allToUpperCase:()=>_r,arrChooseN:()=>Ui,arrDeleteValue:()=>ts,arrEquals:()=>nl,arrIntersect:()=>zt,arrIntersectOb:()=>dn,arrPopRandomElement:()=>qe,arrWithoutValue:()=>es,cheapRandStr:()=>ss,containsValue:()=>ot,copy:()=>F,createMissingPluginError:()=>Ea,dataSizeBytes:()=>tl,decodeBody:()=>Ft,encodeBody:()=>Yt,ensureArray:()=>Mt,forInOwnNonNullProperties:()=>is,getBackoffCoefficient:()=>Er,getGlobalObject:()=>gn,getJitterCoefficient:()=>Ra,getRetryTime:()=>Ni,inherits:()=>At,inspectBody:()=>Tr,inspectError:()=>_t,intersect:()=>Ee,isEmpty:()=>z,isErrorInfoOrPartialErrorInfo:()=>as,isNil:()=>j,isObject:()=>v,keysArray:()=>ei,matchDerivedChannel:()=>Di,mixin:()=>q,parseQueryString:()=>Ta,prototypicalClone:()=>$,randomString:()=>Rr,shallowClone:()=>I,shallowEquals:()=>_a,throwMissingPluginError:()=>ae,toBase64:()=>ls,toQueryString:()=>Oa,valuesArray:()=>ns,whenPromiseSettles:()=>xt,withTimeoutAsync:()=>Li});function Dn(i){let a="["+i.constructor.name;return i.message&&(a+=": "+i.message),i.statusCode&&(a+="; statusCode="+i.statusCode),i.code&&(a+="; code="+i.code),i.cause&&(a+="; cause="+_t(i.cause)),i.href&&!(i.message&&i.message.indexOf("help.ably.io")>-1)&&(a+="; see "+i.href+" "),a+="]",a}var M=class sf extends Error{constructor(a,l,o,u){super(a),typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(this,sf.prototype),this.code=l,this.statusCode=o,this.cause=u}toString(){return Dn(this)}static fromValues(a){const{message:l,code:o,statusCode:u}=a;if(typeof l!="string"||typeof o!="number"||typeof u!="number")throw new Error("ErrorInfo.fromValues(): invalid values: "+w.Config.inspect(a));const f=Object.assign(new sf(l,o,u),a);return f.code&&!f.href&&(f.href="https://help.ably.io/error/"+f.code),f}},Rt=class lf extends Error{constructor(a,l,o,u){super(a),typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(this,lf.prototype),this.code=l,this.statusCode=o,this.cause=u}toString(){return Dn(this)}static fromValues(a){const{message:l,code:o,statusCode:u}=a;if(typeof l!="string"||!j(o)&&typeof o!="number"||!j(u)&&typeof u!="number")throw new Error("PartialErrorInfo.fromValues(): invalid values: "+w.Config.inspect(a));const f=Object.assign(new lf(l,o,u),a);return f.code&&!f.href&&(f.href="https://help.ably.io/error/"+f.code),f}};function U(i){return Math.floor(Math.random()*i.length)}function q(i,...a){for(let l=0;l<a.length;l++){const o=a[l];if(!o)break;for(const u in o)Object.prototype.hasOwnProperty.call(o,u)&&(i[u]=o[u])}return i}function F(i){return q({},i)}function Mt(i){return j(i)?[]:Array.isArray(i)?i:[i]}function v(i){return Object.prototype.toString.call(i)=="[object Object]"}function z(i){for(const a in i)return!1;return!0}function j(i){return i==null}function I(i){const a=new Object;for(const l in i)a[l]=i[l];return a}function $(i,a){class l{}l.prototype=i;const o=new l;return a&&q(o,a),o}var At=function(i,a){if(w.Config.inherits){w.Config.inherits(i,a);return}i.super_=a,i.prototype=$(a.prototype,{constructor:i})};function ot(i,a){for(const l in i)if(i[l]==a)return!0;return!1}function Ee(i,a){return Array.isArray(a)?zt(i,a):dn(i,a)}function zt(i,a){const l=[];for(let o=0;o<i.length;o++){const u=i[o];a.indexOf(u)!=-1&&l.push(u)}return l}function dn(i,a){const l=[];for(let o=0;o<i.length;o++){const u=i[o];u in a&&l.push(u)}return l}function ts(i,a){const l=i.indexOf(a),o=l!=-1;return o&&i.splice(l,1),o}function es(i,a){const l=i.slice();return ts(l,a),l}function ei(i,a){const l=[];for(const o in i)a&&!Object.prototype.hasOwnProperty.call(i,o)||l.push(o);return l}function ns(i,a){const l=[];for(const o in i)a&&!Object.prototype.hasOwnProperty.call(i,o)||l.push(i[o]);return l}function is(i,a){for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&i[l]&&a(l)}function Ar(i,a){if(i.length===0)return!0;const l=i[0][a];return i.every(function(o){return o[a]===l})}var Or=(i=>(i.msgpack="msgpack",i.json="json",i))(Or||{});function qe(i){return i.splice(U(i),1)[0]}function Oa(i){const a=[];if(i)for(const l in i)a.push(encodeURIComponent(l)+"="+encodeURIComponent(i[l]));return a.length?"?"+a.join("&"):""}function Ta(i){let a;const l=/([^?&=]+)=?([^&]*)/g,o={};for(;a=l.exec(i);)o[decodeURIComponent(a[1])]=decodeURIComponent(a[2]);return o}function as(i){return typeof i=="object"&&i!==null&&(i instanceof M||i instanceof Rt)}function _t(i){var a,l;return i instanceof Error||((a=i?.constructor)==null?void 0:a.name)==="ErrorInfo"||((l=i?.constructor)==null?void 0:l.name)==="PartialErrorInfo"?i.toString():w.Config.inspect(i)}function Tr(i){return w.BufferUtils.isBuffer(i)?i.toString():typeof i=="string"?i:w.Config.inspect(i)}function tl(i){if(w.BufferUtils.isBuffer(i))return w.BufferUtils.byteLength(i);if(typeof i=="string")return w.Config.stringByteSize(i);if(typeof i=="number")return 8;if(typeof i=="boolean")return 1;throw new Error(`Expected input of Utils.dataSizeBytes to be a string, a number, a boolean or a buffer, but was: ${typeof i}`)}function ss(){return String(Math.random()).substr(2)}var Rr=async i=>{const a=await w.Config.getRandomArrayBuffer(i);return w.BufferUtils.base64Encode(a)};function Ui(i,a){const l=Math.min(a,i.length),o=i.slice(),u=[];for(let f=0;f<l;f++)u.push(qe(o));return u}function xt(i,a){i.then(l=>{a?.(null,l)}).catch(l=>{a?.(l)})}function Ft(i,a,l){return l=="msgpack"?(a||ae("MsgPack"),a.decode(i)):JSON.parse(String(i))}function Yt(i,a,l){return l=="msgpack"?(a||ae("MsgPack"),a.encode(i,!0)):JSON.stringify(i)}function el(i){return i.map(function(a){return a&&a.toLowerCase()})}function _r(i){return i.map(function(a){return a&&a.toUpperCase()})}function Er(i){return Math.min((i+2)/3,2)}function Ra(){return 1-Math.random()*.2}function Ni(i,a){return i*Er(a)*Ra()}function gn(){return typeof Aa<"u"?Aa:typeof window<"u"?window:self}function _a(i,a){return Object.keys(i).every(l=>i[l]===a[l])&&Object.keys(a).every(l=>a[l]===i[l])}function Di(i){const a=/^(\[([^?]*)(?:(.*))\])?(.+)$/,l=i.match(a);if(!l||!l.length||l.length<5)throw new M("regex match failed",400,40010);if(l[2])throw new M(`cannot use a derived option with a ${l[2]} channel`,400,40010);return{qualifierParam:l[3]||"",channelName:l[4]}}function ls(i){const a=w.BufferUtils,l=a.utf8Encode(i);return a.base64Encode(l)}function nl(i,a){return i.length===a.length&&i.every(function(l,o){return l===a[o]})}function Ea(i){return new M(`${i} plugin not provided`,40019,400)}function ae(i){throw Ea(i)}async function Li(i,a=5e3,l="Timeout expired"){const o=new M(l,5e4,500);return Promise.race([i,new Promise((u,f)=>setTimeout(()=>f(o),a))])}var Cr="2.12.0",Mr="ably-js/"+Cr,Ge={ENDPOINT:"main",ENVIRONMENT:"",REST_HOST:"rest.ably.io",REALTIME_HOST:"realtime.ably.io",FALLBACK_HOSTS:["main.a.fallback.ably-realtime.com","main.b.fallback.ably-realtime.com","main.c.fallback.ably-realtime.com","main.d.fallback.ably-realtime.com","main.e.fallback.ably-realtime.com"],PORT:80,TLS_PORT:443,TIMEOUTS:{disconnectedRetryTimeout:15e3,suspendedRetryTimeout:3e4,httpRequestTimeout:1e4,httpMaxRetryDuration:15e3,channelRetryTimeout:15e3,fallbackRetryTimeout:6e5,connectionStateTtl:12e4,realtimeRequestTimeout:1e4,recvTimeout:9e4,webSocketConnectTimeout:1e4,webSocketSlowTimeout:4e3},httpMaxRetryCount:3,maxMessageSize:65536,version:Cr,protocolVersion:3,agent:Mr,getPort:il,getHttpScheme:al,getPrimaryDomainFromEndpoint:wr,getEndpointFallbackHosts:mn,getFallbackHosts:Ae,getHosts:ki,checkHost:rs,objectifyOptions:Ur,normaliseOptions:rl,defaultGetHeaders:xi,defaultPostHeaders:se};function il(i,a){return a||i.tls?i.tlsPort:i.port}function al(i){return i.tls?"https://":"http://"}function sl(i){return i.includes(".")||i.includes("::")||i==="localhost"}function wr(i){return sl(i)?i:i.startsWith("nonprod:")?`${i.replace("nonprod:","")}.realtime.ably-nonprod.net`:`${i}.realtime.ably.net`}function mn(i){if(sl(i))return[];if(i.startsWith("nonprod:")){const a=i.replace("nonprod:","");return ue(a,"ably-realtime-nonprod.com")}return ue(i,"ably-realtime.com")}function ue(i,a){return["a","b","c","d","e"].map(l=>`${i}.${l}.fallback.${a}`)}function Ae(i){const a=i.fallbackHosts,l=typeof i.httpMaxRetryCount<"u"?i.httpMaxRetryCount:Ge.httpMaxRetryCount;return a?Ui(a,l):[]}function ki(i){return[i.primaryDomain].concat(Ae(i))}function rs(i){if(typeof i!="string")throw new M("host must be a string; was a "+typeof i,4e4,400);if(!i.length)throw new M("host must not be zero-length",4e4,400)}function yc(i){const a={};for(const l in Ge.TIMEOUTS)a[l]=i[l]||Ge.TIMEOUTS[l];return a}function ll(i){let a=Ge.agent;if(i.agents)for(var l in i.agents)a+=" "+l+"/"+i.agents[l];return a}function Ur(i,a,l,o,u){if(i===void 0){const m=a?`${l} must be initialized with either a client options object, an Ably API key, or an Ably Token`:`${l} must be initialized with a client options object`;throw h.logAction(o,h.LOG_ERROR,`${l}()`,m),new Error(m)}let f;if(typeof i=="string")if(i.indexOf(":")==-1){if(!a){const m=`${l} cannot be initialized with just an Ably Token; you must provide a client options object with a \`plugins\` property. (Set this Ably Token as the object’s \`token\` property.)`;throw h.logAction(o,h.LOG_ERROR,`${l}()`,m),new Error(m)}f={token:i}}else{if(!a){const m=`${l} cannot be initialized with just an Ably API key; you must provide a client options object with a \`plugins\` property. (Set this Ably API key as the object’s \`key\` property.)`;throw h.logAction(o,h.LOG_ERROR,`${l}()`,m),new Error(m)}f={key:i}}else f=i;return u&&(f=kt(ht({},f),{plugins:ht(ht({},u),f.plugins)})),f}function Ca(i){if(i.endpoint&&(i.environment||i.restHost||i.realtimeHost))throw new M("The `endpoint` option cannot be used in conjunction with the `environment`, `restHost`, or `realtimeHost` options.",40106,400);if(i.environment&&(i.restHost||i.realtimeHost))throw new M("The `environment` option cannot be used in conjunction with the `restHost`, or `realtimeHost` options.",40106,400)}function rl(i,a,l){const o=l??h.defaultLogger;i.environment&&o.deprecated("The `environment` client option","Use the `endpoint` client option instead."),i.restHost&&o.deprecated("The `restHost` client option","Use the `endpoint` client option instead."),i.realtimeHost&&o.deprecated("The `realtimeHost` client option","Use the `endpoint` client option instead."),Ca(i),typeof i.recover=="function"&&i.closeOnUnload===!0&&(h.logAction(o,h.LOG_ERROR,"Defaults.normaliseOptions","closeOnUnload was true and a session recovery function was set - these are mutually exclusive, so unsetting the latter"),i.recover=void 0),"closeOnUnload"in i||(i.closeOnUnload=!i.recover),"queueMessages"in i||(i.queueMessages=!0);const u=i.endpoint||Ge.ENDPOINT;!i.fallbackHosts&&!i.restHost&&!i.realtimeHost&&!i.port&&!i.tlsPort&&(i.fallbackHosts=mn(i.environment||u));const f=i.environment&&`${i.environment}.realtime.ably.net`,p=i.restHost||i.realtimeHost||f||wr(u);(i.fallbackHosts||[]).concat(p).forEach(rs),i.port=i.port||Ge.PORT,i.tlsPort=i.tlsPort||Ge.TLS_PORT,"tls"in i||(i.tls=!0);const T=yc(i);a?"useBinaryProtocol"in i?i.useBinaryProtocol=w.Config.supportsBinary&&i.useBinaryProtocol:i.useBinaryProtocol=w.Config.preferBinary:i.useBinaryProtocol=!1;const S={};i.clientId&&(S["X-Ably-ClientId"]=w.BufferUtils.base64Encode(w.BufferUtils.utf8Encode(i.clientId))),"idempotentRestPublishing"in i||(i.idempotentRestPublishing=!0);let L=null,k=i.connectivityCheckUrl;if(i.connectivityCheckUrl){let[x,Y]=i.connectivityCheckUrl.split("?");L=Y?Ta(Y):{},x.indexOf("://")===-1&&(x="https://"+x),k=x}let H=i.wsConnectivityCheckUrl;return H&&H.indexOf("://")===-1&&(H="wss://"+H),kt(ht({},i),{primaryDomain:p,maxMessageSize:i.maxMessageSize||Ge.maxMessageSize,timeouts:T,connectivityCheckParams:L,connectivityCheckUrl:k,wsConnectivityCheckUrl:H,headers:S})}function pn(i,a,l){const o=l||{};if(o.cipher){i||ae("Crypto");const u=i.getCipher(o.cipher,a);o.cipher=u.cipherParams,o.channelCipher=u.cipher}else"cipher"in o&&(o.cipher=void 0,o.channelCipher=null);return o}var ni={json:"application/json",xml:"application/xml",html:"text/html",msgpack:"application/x-msgpack",text:"text/plain"},Ln={format:"json",protocolVersion:Ge.protocolVersion};function xi(i,{format:a=Ln.format,protocolVersion:l=Ln.protocolVersion}={}){return{accept:ni[a],"X-Ably-Version":l.toString(),"Ably-Agent":ll(i)}}function se(i,{format:a=Ln.format,protocolVersion:l=Ln.protocolVersion}={}){let o;return{accept:o=ni[a],"content-type":o,"X-Ably-Version":l.toString(),"Ably-Agent":ll(i)}}var at=Ge;function Nr(i){return Object.assign(Ge,i)}var ii=class Yd{constructor(a,l){this.logger=a,this.members=l||[]}call(a,l){for(const o of this.members)if(o)try{o(a,l)}catch(u){h.logAction(this.logger,h.LOG_ERROR,"Multicaster multiple callback handler","Unexpected exception: "+u+"; stack = "+u.stack)}}push(...a){this.members.push(...a)}createPromise(){return new Promise((a,l)=>{this.push((o,u)=>{o?l(o):a(u)})})}resolveAll(a){this.call(null,a)}rejectAll(a){this.call(a)}static create(a,l){const o=new Yd(a,l);return Object.assign((u,f)=>o.call(u,f),{push:u=>o.push(u),createPromise:()=>o.createPromise(),resolveAll:u=>o.resolveAll(u),rejectAll:u=>o.rejectAll(u)})}},kn=ii,Dr=(i=>(i.Get="get",i.Delete="delete",i.Post="post",i.Put="put",i.Patch="patch",i))(Dr||{}),Pt=Dr,ol=(i=>(i[i.Success=200]="Success",i[i.NoContent=204]="NoContent",i[i.BadRequest=400]="BadRequest",i[i.Unauthorized=401]="Unauthorized",i[i.Forbidden=403]="Forbidden",i[i.RequestTimeout=408]="RequestTimeout",i[i.InternalServerError=500]="InternalServerError",i))(ol||{});function vc(i){return i>=200&&i<400}var ai=ol,Bi=Math.pow(2,17);function yn(){return("000000"+Math.floor(Math.random()*1e16)).slice(-16)}function cl(i){return!!i.connection}function ul(i){return as(i)?(i.code||(i.statusCode===403?i.code=40300:(i.code=40170,i.statusCode=401)),i):new M(_t(i),i.code||40170,i.statusCode||401)}var qi=(i,a)=>{const l=w.BufferUtils,o=l.utf8Encode(i),u=l.utf8Encode(a),f=l.hmacSha256(o,u);return l.base64Encode(f)};function os(i){if(!i)return"";typeof i=="string"&&(i=JSON.parse(i));const a=Object.create(null),l=ei(i,!0);if(!l)return"";l.sort();for(let o=0;o<l.length;o++)a[l[o]]=i[l[o]].sort();return JSON.stringify(a)}function cs(i,a){if(i.authCallback)h.logAction(a,h.LOG_MINOR,"Auth()","using token auth with authCallback");else if(i.authUrl)h.logAction(a,h.LOG_MINOR,"Auth()","using token auth with authUrl");else if(i.key)h.logAction(a,h.LOG_MINOR,"Auth()","using token auth with client-side signing");else if(i.tokenDetails)h.logAction(a,h.LOG_MINOR,"Auth()","using token auth with supplied token only");else{const l="authOptions must include valid authentication parameters";throw h.logAction(a,h.LOG_ERROR,"Auth()",l),new Error(l)}}function bc(i){return"useTokenAuth"in i&&!i.useTokenAuth}function fl(i){return i.useTokenAuth||!bc(i)&&(i.authCallback||i.authUrl||i.token||i.tokenDetails)}function ze(i){return!i.key&&!i.authCallback&&!i.authUrl}var Lr=0;function Sc(){return Lr++}var us=class{constructor(i,a){if(this.authOptions={},this.client=i,this.tokenParams=a.defaultTokenParams||{},this.currentTokenRequestId=null,this.waitingForTokenRequest=null,fl(a))ze(a)&&h.logAction(this.logger,h.LOG_ERROR,"Auth()","Warning: library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),this._saveTokenOptions(a.defaultTokenParams,a),cs(this.authOptions,this.logger);else{if(!a.key){const l="No authentication options provided; need one of: key, authUrl, or authCallback (or for testing only, token or tokenDetails)";throw h.logAction(this.logger,h.LOG_ERROR,"Auth()",l),new M(l,40160,401)}h.logAction(this.logger,h.LOG_MINOR,"Auth()","anonymous, using basic auth"),this._saveBasicOptions(a)}}get logger(){return this.client.logger}async authorize(i,a){if(a&&a.key&&this.authOptions.key!==a.key)throw new M("Unable to update auth options with incompatible key",40102,401);try{let l=await this._forceNewToken(i??null,a??null);return cl(this.client)?new Promise((o,u)=>{this.client.connection.connectionManager.onAuthUpdated(l,(f,m)=>f?u(f):o(m))}):l}catch(l){throw this.client.connection&&l.statusCode===ai.Forbidden&&this.client.connection.connectionManager.actOnErrorFromAuthorize(l),l}}async _forceNewToken(i,a){this.tokenDetails=null,this._saveTokenOptions(i,a),cs(this.authOptions,this.logger);try{return this._ensureValidAuthCredentials(!0)}finally{delete this.tokenParams.timestamp,delete this.authOptions.queryTime}}async requestToken(i,a){const l=a||this.authOptions,o=i||F(this.tokenParams);let u,f=this.client;if(l.authCallback)h.logAction(this.logger,h.LOG_MINOR,"Auth.requestToken()","using token auth with authCallback"),u=l.authCallback;else if(l.authUrl)h.logAction(this.logger,h.LOG_MINOR,"Auth.requestToken()","using token auth with authUrl"),u=(p,T)=>{const S=q({accept:"application/json, text/plain"},l.authHeaders),L=l.authMethod&&l.authMethod.toLowerCase()==="post";let k;const H=l.authUrl.indexOf("?");H>-1&&(k=Ta(l.authUrl.slice(H)),l.authUrl=l.authUrl.slice(0,H),L||(l.authParams=q(k,l.authParams)));const x=q({},l.authParams||{},p),Y=P=>{var tt,St;let Ct=(tt=P.body)!=null?tt:null,Ut=null;if(P.error)h.logAction(this.logger,h.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received Error: "+_t(P.error));else{const he=(St=P.headers["content-type"])!=null?St:null;Array.isArray(he)?Ut=he.join(", "):Ut=he,h.logAction(this.logger,h.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received; content-type: "+Ut+"; body: "+Tr(Ct))}if(P.error){T(P.error,null);return}if(P.unpacked){T(null,Ct);return}if(w.BufferUtils.isBuffer(Ct)&&(Ct=Ct.toString()),!Ut){T(new M("authUrl response is missing a content-type header",40170,401),null);return}const st=Ut.indexOf("application/json")>-1,Be=Ut.indexOf("text/plain")>-1||Ut.indexOf("application/jwt")>-1;if(!st&&!Be){T(new M("authUrl responded with unacceptable content-type "+Ut+", should be either text/plain, application/jwt or application/json",40170,401),null);return}if(st){if(Ct.length>Bi){T(new M("authUrl response exceeded max permitted length",40170,401),null);return}try{Ct=JSON.parse(Ct)}catch(he){T(new M("Unexpected error processing authURL response; err = "+he.message,40170,401),null);return}}T(null,Ct,Ut)};if(h.logAction(this.logger,h.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Requesting token from "+l.authUrl+"; Params: "+JSON.stringify(x)+"; method: "+(L?"POST":"GET")),L){const P=S||{};P["content-type"]="application/x-www-form-urlencoded";const tt=Oa(x).slice(1);xt(this.client.http.doUri(Pt.Post,l.authUrl,P,tt,k),(St,Ct)=>Y(St||Ct))}else xt(this.client.http.doUri(Pt.Get,l.authUrl,S||{},null,x),(P,tt)=>Y(P||tt))};else if(l.key)h.logAction(this.logger,h.LOG_MINOR,"Auth.requestToken()","using token auth with client-side signing"),u=(p,T)=>{xt(this.createTokenRequest(p,l),(S,L)=>T(S,L??null))};else{const p="Need a new token, but authOptions does not include any way to request one (no authUrl, authCallback, or key)";throw h.logAction(this.logger,h.LOG_ERROR,"Auth()","library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),new M(p,40171,403)}"capability"in o&&(o.capability=os(o.capability));const m=(p,T)=>{const S=p.keyName,L="/keys/"+S+"/requestToken",k=function(x){return f.baseUri(x)+L},H=at.defaultPostHeaders(this.client.options);l.requestHeaders&&q(H,l.requestHeaders),h.logAction(this.logger,h.LOG_MICRO,"Auth.requestToken().requestToken","Sending POST to "+L+"; Token params: "+JSON.stringify(p)),xt(this.client.http.do(Pt.Post,k,H,JSON.stringify(p),null),(x,Y)=>x?T(x):T(Y.error,Y.body,Y.unpacked))};return new Promise((p,T)=>{let S=!1,L=this.client.options.timeouts.realtimeRequestTimeout,k=setTimeout(()=>{S=!0;const H="Token request callback timed out after "+L/1e3+" seconds";h.logAction(this.logger,h.LOG_ERROR,"Auth.requestToken()",H),T(new M(H,40170,401))},L);u(o,(H,x,Y)=>{if(S)return;if(clearTimeout(k),H){h.logAction(this.logger,h.LOG_ERROR,"Auth.requestToken()","token request signing call returned error; err = "+_t(H)),T(ul(H));return}if(typeof x=="string"){x.length===0?T(new M("Token string is empty",40170,401)):x.length>Bi?T(new M("Token string exceeded max permitted length (was "+x.length+" bytes)",40170,401)):x==="undefined"||x==="null"?T(new M("Token string was literal null/undefined",40170,401)):x[0]==="{"&&!(Y&&Y.indexOf("application/jwt")>-1)?T(new M("Token was double-encoded; make sure you're not JSON-encoding an already encoded token request or details",40170,401)):p({token:x});return}if(typeof x!="object"||x===null){const tt="Expected token request callback to call back with a token string or token request/details object, but got a "+typeof x;h.logAction(this.logger,h.LOG_ERROR,"Auth.requestToken()",tt),T(new M(tt,40170,401));return}const P=JSON.stringify(x).length;if(P>Bi&&!l.suppressMaxLengthCheck){T(new M("Token request/details object exceeded max permitted stringified size (was "+P+" bytes)",40170,401));return}if("issued"in x){p(x);return}if(!("keyName"in x)){const tt="Expected token request callback to call back with a token string, token request object, or token details object";h.logAction(this.logger,h.LOG_ERROR,"Auth.requestToken()",tt),T(new M(tt,40170,401));return}m(x,(tt,St,Ct)=>{if(tt){h.logAction(this.logger,h.LOG_ERROR,"Auth.requestToken()","token request API call returned error; err = "+_t(tt)),T(ul(tt));return}Ct||(St=JSON.parse(St)),h.logAction(this.logger,h.LOG_MINOR,"Auth.getToken()","token received"),p(St)})})})}async createTokenRequest(i,a){a=a||this.authOptions,i=i||F(this.tokenParams);const l=a.key;if(!l)throw new M("No key specified",40101,403);const o=l.split(":"),u=o[0],f=o[1];if(!f)throw new M("Invalid key specified",40101,403);if(i.clientId==="")throw new M("clientId can’t be an empty string",40012,400);"capability"in i&&(i.capability=os(i.capability));const m=q({keyName:u},i),p=i.clientId||"",T=i.ttl||"",S=i.capability||"";m.timestamp||(m.timestamp=await this._getTimestamp(a&&a.queryTime));const L=m.nonce||(m.nonce=yn()),k=m.timestamp,H=m.keyName+`
`+T+`
`+S+`
`+p+`
`+k+`
`+L+`
`;return m.mac=m.mac||qi(H,f),h.logAction(this.logger,h.LOG_MINOR,"Auth.getTokenRequest()","generated signed request"),m}async getAuthParams(){if(this.method=="basic")return{key:this.key};{let i=await this._ensureValidAuthCredentials(!1);if(!i)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{access_token:i.token}}}async getAuthHeaders(){if(this.method=="basic")return{authorization:"Basic "+this.basicKey};{const i=await this._ensureValidAuthCredentials(!1);if(!i)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{authorization:"Bearer "+ls(i.token)}}}_saveBasicOptions(i){this.method="basic",this.key=i.key,this.basicKey=ls(i.key),this.authOptions=i||{},"clientId"in i&&this._userSetClientId(i.clientId)}_saveTokenOptions(i,a){this.method="token",i&&(this.tokenParams=i),a&&(a.token&&(a.tokenDetails=typeof a.token=="string"?{token:a.token}:a.token),a.tokenDetails&&(this.tokenDetails=a.tokenDetails),"clientId"in a&&this._userSetClientId(a.clientId),this.authOptions=a)}async _ensureValidAuthCredentials(i){const a=this.tokenDetails;if(a){if(this._tokenClientIdMismatch(a.clientId))throw new M("Mismatch between clientId in token ("+a.clientId+") and current clientId ("+this.clientId+")",40102,403);if(!this.client.isTimeOffsetSet()||!a.expires||a.expires>=this.client.getTimestampUsingOffset())return h.logAction(this.logger,h.LOG_MINOR,"Auth.getToken()","using cached token; expires = "+a.expires),a;h.logAction(this.logger,h.LOG_MINOR,"Auth.getToken()","deleting expired token"),this.tokenDetails=null}const l=(this.waitingForTokenRequest||(this.waitingForTokenRequest=kn.create(this.logger))).createPromise();if(this.currentTokenRequestId!==null&&!i)return l;const o=this.currentTokenRequestId=Sc();let u,f=null;try{u=await this.requestToken(this.tokenParams,this.authOptions)}catch(p){f=p}if(this.currentTokenRequestId>o)return h.logAction(this.logger,h.LOG_MINOR,"Auth._ensureValidAuthCredentials()","Discarding token request response; overtaken by newer one"),l;this.currentTokenRequestId=null;const m=this.waitingForTokenRequest;return this.waitingForTokenRequest=null,f?(m?.rejectAll(f),l):(m?.resolveAll(this.tokenDetails=u),l)}_userSetClientId(i){if(typeof i=="string"||i===null){if(i==="*")throw new M('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, instantiate the library with {defaultTokenParams: {clientId: "*"}}), or if calling authorize(), pass it in as a tokenParam: authorize({clientId: "*"}, authOptions)',40012,400);{const a=this._uncheckedSetClientId(i);if(a)throw a}}else throw new M("clientId must be either a string or null",40012,400)}_uncheckedSetClientId(i){if(this._tokenClientIdMismatch(i)){const a="Unexpected clientId mismatch: client has "+this.clientId+", requested "+i,l=new M(a,40102,401);return h.logAction(this.logger,h.LOG_ERROR,"Auth._uncheckedSetClientId()",a),l}else return this.clientId=this.tokenParams.clientId=i,null}_tokenClientIdMismatch(i){return!!(this.clientId&&this.clientId!=="*"&&i&&i!=="*"&&this.clientId!==i)}static isTokenErr(i){return i.code&&i.code>=40140&&i.code<40150}revokeTokens(i,a){return this.client.rest.revokeTokens(i,a)}async _getTimestamp(i){return this.client.getTimestamp(i||!!this.authOptions.queryTime)}},an=us;function Gi(i){const a=[];if(i)for(const l in i)a.push(l+"="+i[l]);return a.join("&")}function zi(i,a){return i+(a?"?":"")+Gi(a)}function He(i,a,l,o,u){i.error?h.logActionNoStrip(u,h.LOG_MICRO,"Http."+a+"()","Received Error; "+zi(l,o)+"; Error: "+_t(i.error)):h.logActionNoStrip(u,h.LOG_MICRO,"Http."+a+"()","Received; "+zi(l,o)+"; Headers: "+Gi(i.headers)+"; StatusCode: "+i.statusCode+"; Body"+(w.BufferUtils.isBuffer(i.body)?" (Base64): "+w.BufferUtils.base64Encode(i.body):": "+i.body))}function hl(i,a,l,o,u){u.shouldLog(h.LOG_MICRO)&&h.logActionNoStrip(u,h.LOG_MICRO,"Http."+i+"()","Sending; "+zi(a,o)+"; Body"+(w.BufferUtils.isBuffer(l)?" (Base64): "+w.BufferUtils.base64Encode(l):": "+l))}var fs=class{constructor(i){this.client=i,this.platformHttp=new w.Http(i),this.checkConnectivity=this.platformHttp.checkConnectivity?()=>this.platformHttp.checkConnectivity():void 0}get logger(){var i,a;return(a=(i=this.client)==null?void 0:i.logger)!=null?a:h.defaultLogger}get supportsAuthHeaders(){return this.platformHttp.supportsAuthHeaders}get supportsLinkHeaders(){return this.platformHttp.supportsLinkHeaders}_getHosts(i){const a=i.connection,l=a&&a.connectionManager.host;return l?[l].concat(at.getFallbackHosts(i.options)):at.getHosts(i.options)}async do(i,a,l,o,u){try{const f=this.client;if(!f)return{error:new M("http.do called without client",5e4,500)};const m=typeof a=="function"?a:function(k){return f.baseUri(k)+a},p=f._currentFallback;if(p)if(p.validUntil>Date.now()){const k=await this.doUri(i,m(p.host),l,o,u);return k.error&&this.platformHttp.shouldFallback(k.error)?(f._currentFallback=null,this.do(i,a,l,o,u)):k}else f._currentFallback=null;const T=this._getHosts(f);if(T.length===1)return this.doUri(i,m(T[0]),l,o,u);let S=null;const L=async(k,H)=>{const x=k.shift();S=S??new Date;const Y=await this.doUri(i,m(x),l,o,u);return Y.error&&this.platformHttp.shouldFallback(Y.error)&&k.length?Date.now()-S.getTime()>f.options.timeouts.httpMaxRetryDuration?{error:new M(`Timeout for trying fallback hosts retries. Total elapsed time exceeded the ${f.options.timeouts.httpMaxRetryDuration}ms limit`,50003,500)}:L(k,!0):(H&&(f._currentFallback={host:x,validUntil:Date.now()+f.options.timeouts.fallbackRetryTimeout}),Y)};return L(T)}catch(f){return{error:new M(`Unexpected error in Http.do: ${_t(f)}`,500,5e4)}}}async doUri(i,a,l,o,u){try{hl(i,a,o,u,this.logger);const f=await this.platformHttp.doUri(i,a,l,o,u);return this.logger.shouldLog(h.LOG_MICRO)&&He(f,i,a,u,this.logger),f}catch(f){return{error:new M(`Unexpected error in Http.doUri: ${_t(f)}`,500,5e4)}}}};function dl(i,a,l,o){try{l.apply(a,o)}catch(u){h.logAction(i,h.LOG_ERROR,"EventEmitter.emit()","Unexpected listener exception: "+u+"; stack = "+(u&&u.stack))}}function xn(i,a,l){let o,u,f;for(let m=0;m<i.length;m++)if(o=i[m],l&&(o=o[l]),Array.isArray(o)){for(;(u=o.indexOf(a))!==-1;)o.splice(u,1);l&&o.length===0&&delete i[m][l]}else if(v(o))for(f in o)Object.prototype.hasOwnProperty.call(o,f)&&Array.isArray(o[f])&&xn([o],a,f)}var kr=class{constructor(i){this.logger=i,this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null)}on(...i){if(i.length===1){const a=i[0];if(typeof a=="function")this.any.push(a);else throw new Error("EventListener.on(): Invalid arguments: "+w.Config.inspect(i))}if(i.length===2){const[a,l]=i;if(typeof l!="function")throw new Error("EventListener.on(): Invalid arguments: "+w.Config.inspect(i));if(j(a))this.any.push(l);else if(Array.isArray(a))a.forEach(o=>{this.on(o,l)});else{if(typeof a!="string")throw new Error("EventListener.on(): Invalid arguments: "+w.Config.inspect(i));(this.events[a]||(this.events[a]=[])).push(l)}}}off(...i){if(i.length==0||j(i[0])&&j(i[1])){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null);return}const[a,l]=i;let o=null,u=null;if(i.length===1||!l)typeof a=="function"?o=a:u=a;else{if(typeof l!="function")throw new Error("EventEmitter.off(): invalid arguments:"+w.Config.inspect(i));[u,o]=[a,l]}if(o&&j(u)){xn([this.any,this.events,this.anyOnce,this.eventsOnce],o);return}if(Array.isArray(u)){u.forEach(f=>{this.off(f,o)});return}if(typeof u!="string")throw new Error("EventEmitter.off(): invalid arguments:"+w.Config.inspect(i));o?xn([this.events,this.eventsOnce],o,u):(delete this.events[u],delete this.eventsOnce[u])}listeners(i){if(i){const a=this.events[i]||[];return this.eventsOnce[i]&&Array.prototype.push.apply(a,this.eventsOnce[i]),a.length?a:null}return this.any.length?this.any:null}emit(i,...a){const l={event:i},o=[];this.anyOnce.length&&(Array.prototype.push.apply(o,this.anyOnce),this.anyOnce=[]),this.any.length&&Array.prototype.push.apply(o,this.any);const u=this.eventsOnce[i];u&&(Array.prototype.push.apply(o,u),delete this.eventsOnce[i]);const f=this.events[i];f&&Array.prototype.push.apply(o,f),o.forEach(m=>{dl(this.logger,l,m,a)})}once(...i){const a=i.length;if(a===0||a===1&&typeof i[0]!="function"){const u=i[0];return new Promise(f=>{this.once(u,f)})}const[l,o]=i;if(i.length===1&&typeof l=="function")this.anyOnce.push(l);else if(j(l)){if(typeof o!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+w.Config.inspect(i));this.anyOnce.push(o)}else if(Array.isArray(l)){const u=this,f=function(){const m=Array.prototype.slice.call(arguments);if(l.forEach(function(p){u.off(p,f)}),typeof o!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+w.Config.inspect(i));o.apply(this,m)};l.forEach(function(m){u.on(m,f)})}else{if(typeof l!="string")throw new Error("EventEmitter.once(): Invalid arguments:"+w.Config.inspect(i));const u=this.eventsOnce[l]||(this.eventsOnce[l]=[]);if(o){if(typeof o!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+w.Config.inspect(i));u.push(o)}}}async whenState(i,a){if(typeof i!="string"||typeof a!="string")throw new Error("whenState requires a valid state String argument");return i===a?null:this.once(i)}},ee=kr,Z={HEARTBEAT:0,ACK:1,NACK:2,CONNECT:3,CONNECTED:4,DISCONNECT:5,DISCONNECTED:6,CLOSE:7,CLOSED:8,ERROR:9,ATTACH:10,ATTACHED:11,DETACH:12,DETACHED:13,PRESENCE:14,MESSAGE:15,SYNC:16,AUTH:17,ACTIVATE:18,OBJECT:19,OBJECT_SYNC:20,ANNOTATION:21},xr=[];Object.keys(Z).forEach(function(i){xr[Z[i]]=i});var Oe={HAS_PRESENCE:1,HAS_BACKLOG:2,RESUMED:4,TRANSIENT:16,ATTACH_RESUME:32,HAS_OBJECTS:128,PRESENCE:65536,PUBLISH:1<<17,SUBSCRIBE:1<<18,PRESENCE_SUBSCRIBE:1<<19,ANNOTATION_PUBLISH:1<<21,ANNOTATION_SUBSCRIBE:1<<22,OBJECT_SUBSCRIBE:1<<24,OBJECT_PUBLISH:1<<25},Br=Object.keys(Oe);Oe.MODE_ALL=Oe.PRESENCE|Oe.PUBLISH|Oe.SUBSCRIBE|Oe.PRESENCE_SUBSCRIBE|Oe.ANNOTATION_PUBLISH|Oe.ANNOTATION_SUBSCRIBE|Oe.OBJECT_SUBSCRIBE|Oe.OBJECT_PUBLISH;var hs=["PRESENCE","PUBLISH","SUBSCRIBE","PRESENCE_SUBSCRIBE","ANNOTATION_PUBLISH","ANNOTATION_SUBSCRIBE","OBJECT_SUBSCRIBE","OBJECT_PUBLISH"];function Ac(i){return!i||!i.channelOptions?{channelOptions:i,plugins:{},baseEncodedPreviousPayload:void 0}:i}function qr(i,a,l){if(l&&l.cipher){i||ae("Crypto");const o=i.getCipher(l.cipher,a);return{cipher:o.cipherParams,channelCipher:o.cipher}}return l??{}}async function ds(i,a){const{data:l,encoding:o}=await gs(i.data,i.encoding,a);return i.data=l,i.encoding=o,i}async function gs(i,a,l){let o=l.channelCipher,u=i,f=a?a+"/":"";w.BufferUtils.isBuffer(u)||(u=w.BufferUtils.utf8Encode(String(u)),f=f+"utf-8/");const m=await o.encrypt(u);return f=f+"cipher+"+o.algorithm,{data:m,encoding:f}}async function Ma(i,a){const{data:l,encoding:o}=si(i.data,i.encoding);return i.data=l,i.encoding=o,a!=null&&a.cipher?ds(i,a):i}function si(i,a){if(typeof i=="string"||w.BufferUtils.isBuffer(i)||i===null||i===void 0)return{data:i,encoding:a};if(v(i)||Array.isArray(i))return{data:JSON.stringify(i),encoding:a?a+"/json":"json"};throw new M("Data type is unsupported",40013,400)}async function Bn(i,a){const{data:l,encoding:o,error:u}=await gl(i.data,i.encoding,a);if(i.data=l,i.encoding=o,u)throw u}async function gl(i,a,l){const o=Ac(l);let u=i,f=i,m=a,p;if(a){const T=a.split("/");let S,L=T.length,k="";try{for(;(S=L)>0;){const H=T[--L].match(/([-\w]+)(\+([\w-]+))?/);if(!H)break;switch(k=H[1],k){case"base64":f=w.BufferUtils.base64Decode(String(f)),S==T.length&&(u=f);continue;case"utf-8":f=w.BufferUtils.utf8Decode(f);continue;case"json":f=JSON.parse(f);continue;case"cipher":if(o.channelOptions!=null&&o.channelOptions.cipher&&o.channelOptions.channelCipher){const x=H[3],Y=o.channelOptions.channelCipher;if(x!=Y.algorithm)throw new Error("Unable to decrypt message with given cipher; incompatible cipher params");f=await Y.decrypt(f);continue}else throw new Error("Unable to decrypt message; not an encrypted channel");case"vcdiff":if(!o.plugins||!o.plugins.vcdiff)throw new M("Missing Vcdiff decoder (https://github.com/ably-forks/vcdiff-decoder)",40019,400);if(typeof Uint8Array>"u")throw new M("Delta decoding not supported on this browser (need ArrayBuffer & Uint8Array)",40020,400);try{let x=o.baseEncodedPreviousPayload;typeof x=="string"&&(x=w.BufferUtils.utf8Encode(x));const Y=w.BufferUtils.toBuffer(x);f=w.BufferUtils.toBuffer(f),f=w.BufferUtils.arrayBufferViewToBuffer(o.plugins.vcdiff.decode(f,Y)),u=f}catch(x){throw new M("Vcdiff delta decode failed with "+x,40018,400)}continue;default:throw new Error("Unknown encoding")}}}catch(H){const x=H;p=new M(`Error processing the ${k} encoding, decoder returned ‘${x.message}’`,x.code||40013,400)}finally{m=S<=0?null:T.slice(0,S).join("/")}}return p?{error:p,data:f,encoding:m}:(o.baseEncodedPreviousPayload=u,{data:f,encoding:m})}function wa(...i){const a=i.length>0?"json":"msgpack",{data:l,encoding:o}=ml(this.data,this.encoding,a);return Object.assign({},this,{encoding:o,data:l})}function ml(i,a,l){return!i||!w.BufferUtils.isBuffer(i)?{data:i,encoding:a}:l==="msgpack"?{data:w.BufferUtils.toBuffer(i),encoding:a}:{data:w.BufferUtils.base64Encode(i),encoding:a?a+"/base64":"base64"}}var qn={encryptData:gs,encodeData:si,encodeDataForWire:ml,decodeData:gl};function je(i){const{id:a,connectionId:l,timestamp:o}=i;let u;switch(i.action){case Z.MESSAGE:{u=i.messages;break}case Z.PRESENCE:case Z.SYNC:u=i.presence;break;case Z.ANNOTATION:u=i.annotations;break;case Z.OBJECT:case Z.OBJECT_SYNC:u=i.state;break;default:throw new M("Unexpected action "+i.action,4e4,400)}for(let f=0;f<u.length;f++){const m=u[f];m.connectionId||(m.connectionId=l),m.timestamp||(m.timestamp=o),a&&!m.id&&(m.id=a+":"+f)}}function Gn(i,a){let l="["+a;for(const o in i)o==="data"?typeof i.data=="string"?l+="; data="+i.data:w.BufferUtils.isBuffer(i.data)?l+="; data (buffer)="+w.BufferUtils.base64Encode(i.data):typeof i.data<"u"&&(l+="; data (json)="+JSON.stringify(i.data)):o&&(o==="extras"||o==="operation")?l+="; "+o+"="+JSON.stringify(i[o]):i[o]!==void 0&&(l+="; "+o+"="+i[o]);return l+="]",l}var sn=class{},vn=class{constructor(i){this.Platform=w,this.ErrorInfo=M,this.Logger=h,this.Defaults=at,this.Utils=Wt,this.EventEmitter=ee,this.MessageEncoding=qn;var a,l,o,u,f,m,p,T,S,L;this._additionalHTTPRequestImplementations=(a=i.plugins)!=null?a:null,this.logger=new h,this.logger.setLog(i.logLevel,i.logHandler),h.logAction(this.logger,h.LOG_MICRO,"BaseClient()","initialized with clientOptions "+w.Config.inspect(i)),this._MsgPack=(o=(l=i.plugins)==null?void 0:l.MsgPack)!=null?o:null;const k=this.options=at.normaliseOptions(i,this._MsgPack,this.logger);if(k.key){const H=k.key.match(/^([^:\s]+):([^:.\s]+)$/);if(!H){const x="invalid key parameter";throw h.logAction(this.logger,h.LOG_ERROR,"BaseClient()",x),new M(x,40400,404)}k.keyName=H[1],k.keySecret=H[2]}if("clientId"in k)if(typeof k.clientId=="string"||k.clientId===null){if(k.clientId==="*")throw new M('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, use {defaultTokenParams: {clientId: "*"}})',40012,400)}else throw new M("clientId must be either a string or null",40012,400);h.logAction(this.logger,h.LOG_MINOR,"BaseClient()","started; version = "+at.version),this._currentFallback=null,this.serverTimeOffset=null,this.http=new fs(this),this.auth=new an(this,k),this._rest=(u=i.plugins)!=null&&u.Rest?new i.plugins.Rest(this):null,this._Crypto=(m=(f=i.plugins)==null?void 0:f.Crypto)!=null?m:null,this.__FilteredSubscriptions=(T=(p=i.plugins)==null?void 0:p.MessageInteractions)!=null?T:null,this._Annotations=(L=(S=i.plugins)==null?void 0:S.Annotations)!=null?L:null}get rest(){return this._rest||ae("Rest"),this._rest}get _FilteredSubscriptions(){return this.__FilteredSubscriptions||ae("MessageInteractions"),this.__FilteredSubscriptions}get channels(){return this.rest.channels}get push(){return this.rest.push}device(){var i;return(!((i=this.options.plugins)!=null&&i.Push)||!this.push.LocalDevice)&&ae("Push"),this._device||(this._device=this.push.LocalDevice.load(this)),this._device}baseUri(i){return at.getHttpScheme(this.options)+i+":"+at.getPort(this.options,!1)}async stats(i){return this.rest.stats(i)}async time(i){return this.rest.time(i)}async request(i,a,l,o,u,f){return this.rest.request(i,a,l,o,u,f)}batchPublish(i){return this.rest.batchPublish(i)}batchPresence(i){return this.rest.batchPresence(i)}setLog(i){this.logger.setLog(i.level,i.handler)}async getTimestamp(i){return!this.isTimeOffsetSet()&&i?this.time():this.getTimestampUsingOffset()}getTimestampUsingOffset(){return Date.now()+(this.serverTimeOffset||0)}isTimeOffsetSet(){return this.serverTimeOffset!==null}};vn.Platform=w;var ms=vn,ps=class Fs{toJSON(){var a,l,o;return{id:this.id,deviceSecret:this.deviceSecret,platform:this.platform,formFactor:this.formFactor,clientId:this.clientId,metadata:this.metadata,deviceIdentityToken:this.deviceIdentityToken,push:{recipient:(a=this.push)==null?void 0:a.recipient,state:(l=this.push)==null?void 0:l.state,error:(o=this.push)==null?void 0:o.error}}}toString(){var a,l,o,u;let f="[DeviceDetails";return this.id&&(f+="; id="+this.id),this.platform&&(f+="; platform="+this.platform),this.formFactor&&(f+="; formFactor="+this.formFactor),this.clientId&&(f+="; clientId="+this.clientId),this.metadata&&(f+="; metadata="+this.metadata),this.deviceIdentityToken&&(f+="; deviceIdentityToken="+JSON.stringify(this.deviceIdentityToken)),(a=this.push)!=null&&a.recipient&&(f+="; push.recipient="+JSON.stringify(this.push.recipient)),(l=this.push)!=null&&l.state&&(f+="; push.state="+this.push.state),(o=this.push)!=null&&o.error&&(f+="; push.error="+JSON.stringify(this.push.error)),(u=this.push)!=null&&u.metadata&&(f+="; push.metadata="+this.push.metadata),f+="]",f}static toRequestBody(a,l,o){return Yt(a,l,o)}static fromResponseBody(a,l,o){return o&&(a=Ft(a,l,o)),Array.isArray(a)?Fs.fromValuesArray(a):Fs.fromValues(a)}static fromValues(a){return a.error=a.error&&M.fromValues(a.error),Object.assign(new Fs,a)}static fromLocalDevice(a){return Object.assign(new Fs,a)}static fromValuesArray(a){const l=a.length,o=new Array(l);for(let u=0;u<l;u++)o[u]=Fs.fromValues(a[u]);return o}},li=ps;async function Ua(i,a,l,o){if(i.http.supportsAuthHeaders){const u=await i.auth.getAuthHeaders();return o(q(u,a),l)}else{const u=await i.auth.getAuthParams();return o(a,q(u,l))}}function ys(i,a,l){if(i.err&&!i.body)return{err:i.err};if(i.statusCode===ai.NoContent)return kt(ht({},i),{body:[],unpacked:!0});let o=i.body;if(!i.unpacked)try{o=Ft(o,a,l)}catch(p){return as(p)?{err:p}:{err:new Rt(_t(p),null)}}if(!o)return{err:new Rt("unenvelope(): Response body is missing",null)};const{statusCode:u,response:f,headers:m}=o;if(u===void 0)return kt(ht({},i),{body:o,unpacked:!0});if(u<200||u>=300){let p=f&&f.error||i.err;return p||(p=new Error("Error in unenveloping "+o),p.statusCode=u),{err:p,body:f,headers:m,unpacked:!0,statusCode:u}}return{err:i.err,body:f,headers:m,unpacked:!0,statusCode:u}}function Gr(i,a,l,o,u){i.err?h.logAction(u,h.LOG_MICRO,"Resource."+a+"()","Received Error; "+zi(l,o)+"; Error: "+_t(i.err)):h.logAction(u,h.LOG_MICRO,"Resource."+a+"()","Received; "+zi(l,o)+"; Headers: "+Gi(i.headers)+"; StatusCode: "+i.statusCode+"; Body: "+(w.BufferUtils.isBuffer(i.body)?" (Base64): "+w.BufferUtils.base64Encode(i.body):": "+w.Config.inspect(i.body)))}var Ce=class $s{static async get(a,l,o,u,f,m){return $s.do(Pt.Get,a,l,null,o,u,f,m??!1)}static async delete(a,l,o,u,f,m){return $s.do(Pt.Delete,a,l,null,o,u,f,m)}static async post(a,l,o,u,f,m,p){return $s.do(Pt.Post,a,l,o,u,f,m,p)}static async patch(a,l,o,u,f,m,p){return $s.do(Pt.Patch,a,l,o,u,f,m,p)}static async put(a,l,o,u,f,m,p){return $s.do(Pt.Put,a,l,o,u,f,m,p)}static async do(a,l,o,u,f,m,p,T){p&&((m=m||{}).envelope=p);const S=l.logger;async function L(H,x){var Y;if(S.shouldLog(h.LOG_MICRO)){let tt=u;if(((Y=H["content-type"])==null?void 0:Y.indexOf("msgpack"))>0)try{l._MsgPack||ae("MsgPack"),tt=l._MsgPack.decode(u)}catch(St){h.logAction(S,h.LOG_MICRO,"Resource."+a+"()","Sending MsgPack Decoding Error: "+_t(St))}h.logAction(S,h.LOG_MICRO,"Resource."+a+"()","Sending; "+zi(o,x)+"; Body: "+tt)}const P=await l.http.do(a,o,H,u,x);return P.error&&an.isTokenErr(P.error)?(await l.auth.authorize(null,null),Ua(l,H,x,L)):{err:P.error,body:P.body,headers:P.headers,unpacked:P.unpacked,statusCode:P.statusCode}}let k=await Ua(l,f,m,L);if(p&&(k=ys(k,l._MsgPack,p)),S.shouldLog(h.LOG_MICRO)&&Gr(k,a,o,m,S),T){if(k.err)throw k.err;{const H=ht({},k);return delete H.err,H}}return k}},Bt=Ce;function vs(i){const a=i.match(/^\.\/(\w+)\?(.*)$/);return a&&a[2]&&Ta(a[2])}function Na(i){typeof i=="string"&&(i=i.split(","));const a={};for(let l=0;l<i.length;l++){const o=i[l].match(/^\s*<(.+)>;\s*rel="(\w+)"$/);if(o){const u=vs(o[1]);u&&(a[o[2]]=u)}}return a}function Oc(i,a,l){return!(l&&(a||typeof i.code=="number"))}var pl=class{constructor(i,a,l,o,u,f){this.client=i,this.path=a,this.headers=l,this.envelope=o??null,this.bodyHandler=u,this.useHttpPaginatedResponse=f||!1}get logger(){return this.client.logger}async get(i){const a=await Bt.get(this.client,this.path,this.headers,i,this.envelope,!1);return this.handlePage(a)}async delete(i){const a=await Bt.delete(this.client,this.path,this.headers,i,this.envelope,!1);return this.handlePage(a)}async post(i,a){const l=await Bt.post(this.client,this.path,a,this.headers,i,this.envelope,!1);return this.handlePage(l)}async put(i,a){const l=await Bt.put(this.client,this.path,a,this.headers,i,this.envelope,!1);return this.handlePage(l)}async patch(i,a){const l=await Bt.patch(this.client,this.path,a,this.headers,i,this.envelope,!1);return this.handlePage(l)}async handlePage(i){if(i.err&&Oc(i.err,i.body,this.useHttpPaginatedResponse))throw h.logAction(this.logger,h.LOG_ERROR,"PaginatedResource.handlePage()","Unexpected error getting resource: err = "+_t(i.err)),i.err;let a,l,o;try{a=i.statusCode==ai.NoContent?[]:await this.bodyHandler(i.body,i.headers||{},i.unpacked)}catch(u){throw i.err||u}return i.headers&&(l=i.headers.Link||i.headers.link)&&(o=Na(l)),this.useHttpPaginatedResponse?new Da(this,a,i.headers||{},i.statusCode,o,i.err):new bs(this,a,o)}},bs=class{constructor(i,a,l){this.resource=i,this.items=a,this._relParams=l}async first(){if(this.hasFirst())return this.get(this._relParams.first);throw new M("No link to the first page of results",40400,404)}async current(){if(this.hasCurrent())return this.get(this._relParams.current);throw new M("No link to the current page of results",40400,404)}async next(){return this.hasNext()?this.get(this._relParams.next):null}hasFirst(){return this._relParams!=null&&"first"in this._relParams}hasCurrent(){return this._relParams!=null&&"current"in this._relParams}hasNext(){return this._relParams!=null&&"next"in this._relParams}isLast(){return!this.hasNext()}async get(i){const a=this.resource,l=await Bt.get(a.client,a.path,a.headers,i,a.envelope,!1);return a.handlePage(l)}},Da=class extends bs{constructor(i,a,l,o,u,f){super(i,a,u),this.statusCode=o,this.success=o<300&&o>=200,this.headers=l,this.errorCode=f&&f.code,this.errorMessage=f&&f.message}toJSON(){return{items:this.items,statusCode:this.statusCode,success:this.success,headers:this.headers,errorCode:this.errorCode,errorMessage:this.errorMessage}}},Le=pl,yl=class br{toJSON(){return{channel:this.channel,deviceId:this.deviceId,clientId:this.clientId}}toString(){let a="[PushChannelSubscription";return this.channel&&(a+="; channel="+this.channel),this.deviceId&&(a+="; deviceId="+this.deviceId),this.clientId&&(a+="; clientId="+this.clientId),a+="]",a}static fromResponseBody(a,l,o){return o&&(a=Ft(a,l,o)),Array.isArray(a)?br.fromValuesArray(a):br.fromValues(a)}static fromValues(a){return Object.assign(new br,a)}static fromValuesArray(a){const l=a.length,o=new Array(l);for(let u=0;u<l;u++)o[u]=br.fromValues(a[u]);return o}};yl.toRequestBody=Yt;var Tc=yl,Ss=Tc,Rc=class{constructor(i){var a;this.client=i,this.admin=new vl(i),w.Config.push&&((a=i.options.plugins)!=null&&a.Push)&&(this.stateMachine=new i.options.plugins.Push.ActivationStateMachine(i),this.LocalDevice=i.options.plugins.Push.localDeviceFactory(li))}async activate(i,a){await new Promise((l,o)=>{var u;if(!((u=this.client.options.plugins)!=null&&u.Push)){o(Ea("Push"));return}if(!this.stateMachine){o(new M("This platform is not supported as a target of push notifications",4e4,400));return}if(this.stateMachine.activatedCallback){o(new M("Activation already in progress",4e4,400));return}this.stateMachine.activatedCallback=f=>{if(f){o(f);return}l()},this.stateMachine.updateFailedCallback=a,this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledActivate(this.stateMachine,i))})}async deactivate(i){await new Promise((a,l)=>{var o;if(!((o=this.client.options.plugins)!=null&&o.Push)){l(Ea("Push"));return}if(!this.stateMachine){l(new M("This platform is not supported as a target of push notifications",4e4,400));return}if(this.stateMachine.deactivatedCallback){l(new M("Deactivation already in progress",4e4,400));return}this.stateMachine.deactivatedCallback=u=>{if(u){l(u);return}a()},this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledDeactivate(this.stateMachine,i))})}},vl=class{constructor(i){this.client=i,this.deviceRegistrations=new _c(i),this.channelSubscriptions=new Ec(i)}async publish(i,a){const l=this.client,o=l.options.useBinaryProtocol?"msgpack":"json",u=at.defaultPostHeaders(l.options,{format:o}),f={},m=q({recipient:i},a);q(u,l.options.headers),l.options.pushFullWait&&q(f,{fullWait:"true"});const p=Yt(m,l._MsgPack,o);await Bt.post(l,"/push/publish",p,u,f,null,!0)}},_c=class{constructor(i){this.client=i}async save(i){const a=this.client,l=li.fromValues(i),o=a.options.useBinaryProtocol?"msgpack":"json",u=at.defaultPostHeaders(a.options,{format:o}),f={};q(u,a.options.headers),a.options.pushFullWait&&q(f,{fullWait:"true"});const m=Yt(l,a._MsgPack,o),p=await Bt.put(a,"/push/deviceRegistrations/"+encodeURIComponent(i.id),m,u,f,null,!0);return li.fromResponseBody(p.body,a._MsgPack,p.unpacked?void 0:o)}async get(i){const a=this.client,l=a.options.useBinaryProtocol?"msgpack":"json",o=at.defaultGetHeaders(a.options,{format:l}),u=i.id||i;if(typeof u!="string"||!u.length)throw new M("First argument to DeviceRegistrations#get must be a deviceId string or DeviceDetails",4e4,400);q(o,a.options.headers);const f=await Bt.get(a,"/push/deviceRegistrations/"+encodeURIComponent(u),o,{},null,!0);return li.fromResponseBody(f.body,a._MsgPack,f.unpacked?void 0:l)}async list(i){const a=this.client,l=a.options.useBinaryProtocol?"msgpack":"json",o=this.client.http.supportsLinkHeaders?void 0:l,u=at.defaultGetHeaders(a.options,{format:l});return q(u,a.options.headers),new Le(a,"/push/deviceRegistrations",u,o,async function(f,m,p){return li.fromResponseBody(f,a._MsgPack,p?void 0:l)}).get(i)}async remove(i){const a=this.client,l=a.options.useBinaryProtocol?"msgpack":"json",o=at.defaultGetHeaders(a.options,{format:l}),u={},f=i.id||i;if(typeof f!="string"||!f.length)throw new M("First argument to DeviceRegistrations#remove must be a deviceId string or DeviceDetails",4e4,400);q(o,a.options.headers),a.options.pushFullWait&&q(u,{fullWait:"true"}),await Bt.delete(a,"/push/deviceRegistrations/"+encodeURIComponent(f),o,u,null,!0)}async removeWhere(i){const a=this.client,l=a.options.useBinaryProtocol?"msgpack":"json",o=at.defaultGetHeaders(a.options,{format:l});q(o,a.options.headers),a.options.pushFullWait&&q(i,{fullWait:"true"}),await Bt.delete(a,"/push/deviceRegistrations",o,i,null,!0)}},Ec=class Pd{constructor(a){this.remove=Pd.prototype.removeWhere,this.client=a}async save(a){const l=this.client,o=Ss.fromValues(a),u=l.options.useBinaryProtocol?"msgpack":"json",f=at.defaultPostHeaders(l.options,{format:u}),m={};q(f,l.options.headers),l.options.pushFullWait&&q(m,{fullWait:"true"});const p=Yt(o,l._MsgPack,u),T=await Bt.post(l,"/push/channelSubscriptions",p,f,m,null,!0);return Ss.fromResponseBody(T.body,l._MsgPack,T.unpacked?void 0:u)}async list(a){const l=this.client,o=l.options.useBinaryProtocol?"msgpack":"json",u=this.client.http.supportsLinkHeaders?void 0:o,f=at.defaultGetHeaders(l.options,{format:o});return q(f,l.options.headers),new Le(l,"/push/channelSubscriptions",f,u,async function(m,p,T){return Ss.fromResponseBody(m,l._MsgPack,T?void 0:o)}).get(a)}async removeWhere(a){const l=this.client,o=l.options.useBinaryProtocol?"msgpack":"json",u=at.defaultGetHeaders(l.options,{format:o});q(u,l.options.headers),l.options.pushFullWait&&q(a,{fullWait:"true"}),await Bt.delete(l,"/push/channelSubscriptions",u,a,null,!0)}async listChannels(a){const l=this.client,o=l.options.useBinaryProtocol?"msgpack":"json",u=this.client.http.supportsLinkHeaders?void 0:o,f=at.defaultGetHeaders(l.options,{format:o});return q(f,l.options.headers),l.options.pushFullWait&&q(a,{fullWait:"true"}),new Le(l,"/push/channels",f,u,async function(m,p,T){const S=!T&&o?Ft(m,l._MsgPack,o):m;for(let L=0;L<S.length;L++)S[L]=String(S[L]);return S}).get(a)}},Cc=Rc,zr=["absent","present","enter","leave","update"];async function Hr(i,a,l,o){const u=qr(a,i,o??null);return La.fromValues(l).decode(u,i)}async function jr(i,a,l,o){return Promise.all(l.map(function(u){return Hr(i,a,u,o)}))}async function Mc(i,a){return La.fromValues(i).decode(a.channelOptions,a.logger)}async function Vr(i,a){return Promise.all(i.map(function(l){return Mc(l,a)}))}var Ir=class Sr extends sn{isSynthesized(){return!this.id||!this.connectionId?!0:this.id.substring(this.connectionId.length,0)!==this.connectionId}parseId(){if(!this.id)throw new Error("parseId(): Presence message does not contain an id");const a=this.id.split(":");return{connectionId:a[0],msgSerial:parseInt(a[1],10),index:parseInt(a[2],10)}}async encode(a){const l=Object.assign(new La,this,{action:zr.indexOf(this.action||"present")});return Ma(l,a)}static fromValues(a){return Object.assign(new Sr,a)}static fromValuesArray(a){return a.map(l=>Sr.fromValues(l))}static fromData(a){return a instanceof Sr?a:Sr.fromValues({data:a})}toString(){return Gn(this,"PresenceMessage")}},La=class rf extends sn{toJSON(...a){return wa.call(this,...a)}static fromValues(a){return Object.assign(new rf,a)}static fromValuesArray(a){return a.map(l=>rf.fromValues(l))}async decode(a,l){const o=Object.assign(new Ir,kt(ht({},this),{action:zr[this.action]}));try{await Bn(o,a)}catch(u){h.logAction(l,h.LOG_ERROR,"WirePresenceMessage.decode()",_t(u))}return o}toString(){return Gn(this,"WirePresenceMessage")}},ln=Ir,wc=class{constructor(i){this.channel=i}get logger(){return this.channel.logger}async get(i){h.logAction(this.logger,h.LOG_MICRO,"RestPresence.get()","channel = "+this.channel.name);const a=this.channel.client,l=a.options.useBinaryProtocol?"msgpack":"json",o=this.channel.client.http.supportsLinkHeaders?void 0:l,u=at.defaultGetHeaders(a.options,{format:l});return q(u,a.options.headers),new Le(a,this.channel.client.rest.presenceMixin.basePath(this),u,o,async(f,m,p)=>{const T=p?f:Ft(f,a._MsgPack,l);return Vr(T,this.channel)}).get(i)}async history(i){return h.logAction(this.logger,h.LOG_MICRO,"RestPresence.history()","channel = "+this.channel.name),this.channel.client.rest.presenceMixin.history(this,i)}},Uc=wc,Yr=["message.create","message.update","message.delete","meta","message.summary"];function Pr(i){return Yr[i||0]||"unknown"}function Nc(i){let a=0;return i.name&&(a+=i.name.length),i.clientId&&(a+=i.clientId.length),i.extras&&(a+=JSON.stringify(i.extras).length),i.data&&(a+=tl(i.data)),a}async function Qr(i,a,l,o){const u=qr(a,i,o??null);return ri.fromValues(l).decode(u,i)}async function Dc(i,a,l,o){return Promise.all(l.map(function(u){return Qr(i,a,u,o)}))}async function Lc(i,a){return ri.fromValues(i).decode(a.channelOptions,a.logger)}async function kc(i,a){return Promise.all(i.map(function(l){return Lc(l,a)}))}async function Xr(i,a){return Promise.all(i.map(l=>l.encode(a)))}var xc=Yt;function bl(i){let a,l=0;for(let o=0;o<i.length;o++)a=i[o],l+=a.size||(a.size=Nc(a));return l}var Kr=class of extends sn{expandFields(){this.action==="message.create"&&(this.version&&!this.serial&&(this.serial=this.version),this.timestamp&&!this.createdAt&&(this.createdAt=this.timestamp))}async encode(a){const l=Object.assign(new ri,this,{action:Yr.indexOf(this.action||"message.create")});return Ma(l,a)}static fromValues(a){return Object.assign(new of,a)}static fromValuesArray(a){return a.map(l=>of.fromValues(l))}toString(){return Gn(this,"Message")}},ri=class cf extends sn{toJSON(...a){return wa.call(this,...a)}static fromValues(a){return Object.assign(new cf,a)}static fromValuesArray(a){return a.map(l=>cf.fromValues(l))}async decodeWithErr(a,l){const o=Object.assign(new Kr,kt(ht({},this),{action:Pr(this.action)}));let u;try{await Bn(o,a)}catch(f){h.logAction(l,h.LOG_ERROR,"WireMessage.decode()",_t(f)),u=f}return o.expandFields(),{decoded:o,err:u}}async decode(a,l){const{decoded:o}=await this.decodeWithErr(a,l);return o}toString(){return Gn(this,"WireMessage")}},Ve=Kr,Bc=9;function Zr(i){return i.every(function(a){return!a.id})}var Jr=class{constructor(i,a,l){this._annotations=null;var o,u;h.logAction(i.logger,h.LOG_MINOR,"RestChannel()","started; name = "+a),this.name=a,this.client=i,this.presence=new Uc(this),this.channelOptions=pn((o=i._Crypto)!=null?o:null,this.logger,l),(u=i.options.plugins)!=null&&u.Push&&(this._push=new i.options.plugins.Push.PushChannel(this)),i._Annotations&&(this._annotations=new i._Annotations.RestAnnotations(this))}get annotations(){return this._annotations||ae("Annotations"),this._annotations}get push(){return this._push||ae("Push"),this._push}get logger(){return this.client.logger}setOptions(i){var a;this.channelOptions=pn((a=this.client._Crypto)!=null?a:null,this.logger,i)}async history(i){return h.logAction(this.logger,h.LOG_MICRO,"RestChannel.history()","channel = "+this.name),this.client.rest.channelMixin.history(this,i)}async publish(...i){const a=i[0],l=i[1];let o,u;if(typeof a=="string"||a===null)o=[Ve.fromValues({name:a,data:l})],u=i[2];else if(v(a))o=[Ve.fromValues(a)],u=i[1];else if(Array.isArray(a))o=Ve.fromValuesArray(a),u=i[1];else throw new M("The single-argument form of publish() expects a message object or an array of message objects",40013,400);u||(u={});const f=this.client,m=f.options,p=m.useBinaryProtocol?"msgpack":"json",T=f.options.idempotentRestPublishing,S=at.defaultPostHeaders(f.options,{format:p});if(q(S,m.headers),T&&Zr(o)){const x=await Rr(Bc);o.forEach(function(Y,P){Y.id=x+":"+P.toString()})}const L=await Xr(o,this.channelOptions),k=bl(L),H=m.maxMessageSize;if(k>H)throw new M(`Maximum size of messages that can be published at once exceeded (was ${k} bytes; limit is ${H} bytes)`,40009,400);await this._publish(xc(L,f._MsgPack,p),S,u)}async _publish(i,a,l){await Bt.post(this.client,this.client.rest.channelMixin.basePath(this)+"/messages",i,a,l,null,!0)}async status(){return this.client.rest.channelMixin.status(this)}},Wr=Jr,Fr=class Qd{constructor(a){this.entries=a&&a.entries||void 0,this.schema=a&&a.schema||void 0,this.appId=a&&a.appId||void 0,this.inProgress=a&&a.inProgress||void 0,this.unit=a&&a.unit||void 0,this.intervalId=a&&a.intervalId||void 0}static fromValues(a){return new Qd(a)}},$r=Fr,oi=class{static basePath(i){return"/channels/"+encodeURIComponent(i.name)}static history(i,a){const l=i.client,o=l.options.useBinaryProtocol?"msgpack":"json",u=i.client.http.supportsLinkHeaders?void 0:o,f=at.defaultGetHeaders(l.options,{format:o});return q(f,l.options.headers),new Le(l,this.basePath(i)+"/messages",f,u,async function(m,p,T){const S=T?m:Ft(m,l._MsgPack,o);return kc(S,i)}).get(a)}static async status(i){const a=i.client.options.useBinaryProtocol?"msgpack":"json",l=at.defaultPostHeaders(i.client.options,{format:a});return(await Bt.get(i.client,this.basePath(i),l,{},a,!0)).body}},qc=class{static basePath(i){return oi.basePath(i.channel)+"/presence"}static async history(i,a){const l=i.channel.client,o=l.options.useBinaryProtocol?"msgpack":"json",u=i.channel.client.http.supportsLinkHeaders?void 0:o,f=at.defaultGetHeaders(l.options,{format:o});return q(f,l.options.headers),new Le(l,this.basePath(i)+"/history",f,u,async(m,p,T)=>{const S=T?m:Ft(m,l._MsgPack,o);return Vr(S,i.channel)}).get(a)}},to=class{constructor(i){this.channelMixin=oi,this.presenceMixin=qc,this.Resource=Bt,this.PaginatedResource=Le,this.DeviceDetails=li,this.PushChannelSubscription=Ss,this.client=i,this.channels=new Gc(this.client),this.push=new Cc(this.client)}async stats(i){const a=at.defaultGetHeaders(this.client.options),l=this.client.options.useBinaryProtocol?"msgpack":"json",o=this.client.http.supportsLinkHeaders?void 0:l;return q(a,this.client.options.headers),new Le(this.client,"/stats",a,o,function(u,f,m){const p=m?u:JSON.parse(u);for(let T=0;T<p.length;T++)p[T]=$r.fromValues(p[T]);return p}).get(i)}async time(i){const a=at.defaultGetHeaders(this.client.options);this.client.options.headers&&q(a,this.client.options.headers);const l=p=>this.client.baseUri(p)+"/time";let{error:o,body:u,unpacked:f}=await this.client.http.do(Pt.Get,l,a,null,i);if(o)throw o;f||(u=JSON.parse(u));const m=u[0];if(!m)throw new M("Internal error (unexpected result type from GET /time)",5e4,500);return this.client.serverTimeOffset=m-Date.now(),m}async request(i,a,l,o,u,f){var m;const[p,T,S]=this.client.options.useBinaryProtocol?(this.client._MsgPack||ae("MsgPack"),[this.client._MsgPack.encode,this.client._MsgPack.decode,"msgpack"]):[JSON.stringify,JSON.parse,"json"],L=this.client.http.supportsLinkHeaders?void 0:S;o=o||{};const k=i.toLowerCase(),H=k=="get"?at.defaultGetHeaders(this.client.options,{format:S,protocolVersion:l}):at.defaultPostHeaders(this.client.options,{format:S,protocolVersion:l});typeof u!="string"&&(u=(m=p(u))!=null?m:null),q(H,this.client.options.headers),f&&q(H,f);const x=new Le(this.client,a,H,L,async function(Y,P,tt){return Mt(tt?Y:T(Y))},!0);if(!w.Http.methods.includes(k))throw new M("Unsupported method "+k,40500,405);return w.Http.methodsWithBody.includes(k)?x[k](o,u):x[k](o)}async batchPublish(i){let a,l;Array.isArray(i)?(a=i,l=!1):(a=[i],l=!0);const o=this.client.options.useBinaryProtocol?"msgpack":"json",u=at.defaultPostHeaders(this.client.options,{format:o});this.client.options.headers&&q(u,this.client.options.headers);const f=Yt(a,this.client._MsgPack,o),m=await Bt.post(this.client,"/messages",f,u,{},null,!0),p=m.unpacked?m.body:Ft(m.body,this.client._MsgPack,o);return l?p[0]:p}async batchPresence(i){const a=this.client.options.useBinaryProtocol?"msgpack":"json",l=at.defaultPostHeaders(this.client.options,{format:a});this.client.options.headers&&q(l,this.client.options.headers);const o=i.join(","),u=await Bt.get(this.client,"/presence",l,{channels:o},null,!0);return u.unpacked?u.body:Ft(u.body,this.client._MsgPack,a)}async revokeTokens(i,a){if(fl(this.client.options))throw new M("Cannot revoke tokens when using token auth",40162,401);const l=this.client.options.keyName;let o=a??{};const u=ht({targets:i.map(S=>`${S.type}:${S.value}`)},o),f=this.client.options.useBinaryProtocol?"msgpack":"json",m=at.defaultPostHeaders(this.client.options,{format:f});this.client.options.headers&&q(m,this.client.options.headers);const p=Yt(u,this.client._MsgPack,f),T=await Bt.post(this.client,`/keys/${l}/revokeTokens`,p,m,{},null,!0);return T.unpacked?T.body:Ft(T.body,this.client._MsgPack,f)}},Gc=class{constructor(i){this.client=i,this.all=Object.create(null)}get(i,a){i=String(i);let l=this.all[i];return l?a&&l.setOptions(a):this.all[i]=l=new Wr(this.client,i,a),l}release(i){delete this.all[String(i)]}},eo=class extends ms{constructor(i){super(at.objectifyOptions(i,!1,"BaseRest",h.defaultLogger,{Rest:to}))}},Sl={Rest:to},Hi=class extends Ve{static async fromEncoded(i,a){return Qr(h.defaultLogger,w.Crypto,i,a)}static async fromEncodedArray(i,a){return Dc(h.defaultLogger,w.Crypto,i,a)}static fromValues(i){return Ve.fromValues(i)}},ji=class extends ln{static async fromEncoded(i,a){return Hr(h.defaultLogger,w.Crypto,i,a)}static async fromEncodedArray(i,a){return jr(h.defaultLogger,w.Crypto,i,a)}static fromValues(i){return ln.fromValues(i)}},no=["annotation.create","annotation.delete"];async function ka(i,a,l){return ci.fromValues(a).decode(l||{},i)}async function io(i,a,l){return Promise.all(a.map(function(o){return ka(i,o,l)}))}async function ao(i,a){return ci.fromValues(i).decode(a.channelOptions,a.logger)}async function Al(i,a){return Promise.all(i.map(function(l){return ao(l,a)}))}var As=class uf extends sn{async encode(){const a=Object.assign(new ci,this,{action:no.indexOf(this.action||"annotation.create")});return Ma(a,{})}static fromValues(a){return Object.assign(new uf,a)}static fromValuesArray(a){return a.map(l=>uf.fromValues(l))}toString(){return Gn(this,"Annotation")}},ci=class ff extends sn{toJSON(...a){return wa.call(this,...a)}static fromValues(a){return Object.assign(new ff,a)}static fromValuesArray(a){return a.map(l=>ff.fromValues(l))}async decode(a,l){const o=Object.assign(new As,kt(ht({},this),{action:no[this.action]}));try{await Bn(o,a)}catch(u){h.logAction(l,h.LOG_ERROR,"WireAnnotation.decode()",_t(u))}return o}toString(){return Gn(this,"WireAnnotation")}},Vi=As,Ol=class extends Vi{static async fromEncoded(i,a){return ka(h.defaultLogger,i,a)}static async fromEncodedArray(i,a){return io(h.defaultLogger,i,a)}static fromValues(i){return Vi.fromValues(i)}};function so(i){let a;switch(typeof i){case"string":a=i;break;case"object":a=i.serial;break}if(!a||typeof a!="string")throw new M("First argument of annotations.publish() must be either a Message (or at least an object with a string `serial` property) or a message serial (string)",40003,400);return a}function lo(i,a){const l=so(i);if(!a||typeof a!="object")throw new M("Second argument of annotations.publish() must be an object (the intended annotation to publish)",40003,400);const o=Vi.fromValues(a);return o.messageSerial=l,o.action||(o.action="annotation.create"),o}function ro(i,a){return i.client.rest.channelMixin.basePath(i)+"/messages/"+encodeURIComponent(a)+"/annotations"}var zc=class{constructor(i){this.channel=i}async publish(i,a){const l=lo(i,a),o=await l.encode(),u=this.channel.client,f=u.options,m=f.useBinaryProtocol?"msgpack":"json",p=at.defaultPostHeaders(u.options,{format:m}),T={};q(p,u.options.headers);const S=Yt([o],u._MsgPack,m);await Bt.post(u,ro(this.channel,l.messageSerial),S,p,T,null,!0)}async delete(i,a){return a.action="annotation.delete",this.publish(i,a)}async get(i,a){const l=this.channel.client,o=so(i),u=l.options.useBinaryProtocol?"msgpack":"json",f=l.http.supportsLinkHeaders?void 0:u,m=at.defaultGetHeaders(l.options,{format:u});return q(m,l.options.headers),new Le(l,ro(this.channel,o),m,f,async(p,T,S)=>{const L=S?p:Ft(p,l._MsgPack,u);return Al(L,this.channel)}).get(a)}},Tl=zc,ke=Yt;function zn(i){const a=[];if(i)for(let l=0;l<i.length;l++)a.push(i[l].toString());return"[ "+a.join(", ")+" ]"}function oo(i,a,l,o,u,f){const m=Ft(i,a,f);return Os(m,l,o,u)}function Os(i,a,l,o){let u;i.error&&(u=M.fromValues(i.error));let f;i.messages&&(f=ri.fromValuesArray(i.messages));let m;a&&i.presence&&(m=a.WirePresenceMessage.fromValuesArray(i.presence));let p;l&&i.annotations&&(p=l.WireAnnotation.fromValuesArray(i.annotations));let T;return o&&i.state&&(T=o.WireObjectMessage.fromValuesArray(i.state,Wt,qn)),Object.assign(new _l,kt(ht({},i),{presence:m,messages:f,annotations:p,state:T,error:u}))}function Rl(i){return a=>{var l;return Os(a,{WirePresenceMessage:La},{WireAnnotation:ci},(l=i?.ObjectsPlugin)!=null?l:null)}}function Me(i){return Object.assign(new _l,i)}function xa(i,a,l,o){let u="[ProtocolMessage";i.action!==void 0&&(u+="; action="+xr[i.action]||i.action);const f=["id","channel","channelSerial","connectionId","count","msgSerial","timestamp"];let m;for(let p=0;p<f.length;p++)m=f[p],i[m]!==void 0&&(u+="; "+m+"="+i[m]);if(i.messages&&(u+="; messages="+zn(ri.fromValuesArray(i.messages))),i.presence&&a&&(u+="; presence="+zn(a.WirePresenceMessage.fromValuesArray(i.presence))),i.annotations&&l&&(u+="; annotations="+zn(l.WireAnnotation.fromValuesArray(i.annotations))),i.state&&o&&(u+="; state="+zn(o.WireObjectMessage.fromValuesArray(i.state,Wt,qn))),i.error&&(u+="; error="+M.fromValues(i.error).toString()),i.auth&&i.auth.accessToken&&(u+="; token="+i.auth.accessToken),i.flags&&(u+="; flags="+Br.filter(i.hasFlag).join(",")),i.params){let p="";is(i.params,function(T){p.length>0&&(p+="; "),p+=T+"="+i.params[T]}),p.length>0&&(u+="; params=["+p+"]")}return u+="]",u}var _l=class{constructor(){this.hasFlag=i=>(this.flags&Oe[i])>0}setFlag(i){return this.flags=this.flags|Oe[i]}getMode(){return(this.flags||0)&Oe.MODE_ALL}encodeModesToFlags(i){i.forEach(a=>this.setFlag(a))}decodeModesFromFlags(){const i=[];return hs.forEach(a=>{this.hasFlag(a)&&i.push(a)}),i.length>0?i:void 0}},Ii=_l,El=class{constructor(i,a,l,o,u){this.previous=i,this.current=a,a==="attached"&&(this.resumed=l,this.hasBacklog=o),u&&(this.reason=u)}},ui=El,Ts=function(){};function co(i){if(i&&"params"in i&&!v(i.params))return new M("options.params must be an object",4e4,400);if(i&&"modes"in i){if(!Array.isArray(i.modes))return new M("options.modes must be an array",4e4,400);for(let a=0;a<i.modes.length;a++){const l=i.modes[a];if(!l||typeof l!="string"||!hs.includes(String.prototype.toUpperCase.call(l)))return new M("Invalid channel mode: "+l,4e4,400)}}}var fi=class hf extends ee{constructor(a,l,o){var u,f,m;super(a.logger),this._annotations=null,this._mode=0,this.retryCount=0,this.history=async function(p){h.logAction(this.logger,h.LOG_MICRO,"RealtimeChannel.history()","channel = "+this.name);const T=this.client.rest.channelMixin;if(p&&p.untilAttach){if(this.state!=="attached")throw new M("option untilAttach requires the channel to be attached",4e4,400);if(!this.properties.attachSerial)throw new M("untilAttach was specified and channel is attached, but attachSerial is not defined",4e4,400);delete p.untilAttach,p.from_serial=this.properties.attachSerial}return T.history(this,p)},this.whenState=p=>ee.prototype.whenState.call(this,p,this.state),h.logAction(this.logger,h.LOG_MINOR,"RealtimeChannel()","started; name = "+l),this.name=l,this.channelOptions=pn((u=a._Crypto)!=null?u:null,this.logger,o),this.client=a,this._presence=a._RealtimePresence?new a._RealtimePresence.RealtimePresence(this):null,a._Annotations&&(this._annotations=new a._Annotations.RealtimeAnnotations(this)),this.connectionManager=a.connection.connectionManager,this.state="initialized",this.subscriptions=new ee(this.logger),this.syncChannelSerial=void 0,this.properties={attachSerial:void 0,channelSerial:void 0},this.setOptions(o),this.errorReason=null,this._attachResume=!1,this._decodingContext={channelOptions:this.channelOptions,plugins:a.options.plugins||{},baseEncodedPreviousPayload:void 0},this._lastPayload={messageId:null,protocolMessageChannelSerial:null,decodeFailureRecoveryInProgress:null},this._allChannelChanges=new ee(this.logger),(f=a.options.plugins)!=null&&f.Push&&(this._push=new a.options.plugins.Push.PushChannel(this)),(m=a.options.plugins)!=null&&m.Objects&&(this._objects=new a.options.plugins.Objects.Objects(this))}get presence(){return this._presence||ae("RealtimePresence"),this._presence}get annotations(){return this._annotations||ae("Annotations"),this._annotations}get push(){return this._push||ae("Push"),this._push}get objects(){return this._objects||ae("Objects"),this._objects}invalidStateError(){return new M("Channel operation failed as channel state is "+this.state,90001,400,this.errorReason||void 0)}static processListenerArgs(a){return a=Array.prototype.slice.call(a),typeof a[0]=="function"&&a.unshift(null),a}async setOptions(a){var l;const o=this.channelOptions,u=co(a);if(u)throw u;if(this.channelOptions=pn((l=this.client._Crypto)!=null?l:null,this.logger,a),this._decodingContext&&(this._decodingContext.channelOptions=this.channelOptions),this._shouldReattachToSetOptions(a,o))return this.attachImpl(),new Promise((f,m)=>{this._allChannelChanges.once(["attached","update","detached","failed"],function(p){switch(this.event){case"update":case"attached":f();break;default:m(p.reason)}})})}_shouldReattachToSetOptions(a,l){if(!(this.state==="attached"||this.state==="attaching"))return!1;if(a?.params){const o=hi(a.params),u=hi(l.params);if(Object.keys(o).length!==Object.keys(u).length||!_a(u,o))return!0}return!!(a?.modes&&(!l.modes||!nl(a.modes,l.modes)))}async publish(...a){let l;if(a.length==1)if(v(a[0]))l=[Ve.fromValues(a[0])];else if(Array.isArray(a[0]))l=Ve.fromValuesArray(a[0]);else throw new M("The single-argument form of publish() expects a message object or an array of message objects",40013,400);else l=[Ve.fromValues({name:a[0],data:a[1]})];const u=this.client.options.maxMessageSize,f=await Xr(l,this.channelOptions),m=bl(f);if(m>u)throw new M(`Maximum size of messages that can be published at once exceeded (was ${m} bytes; limit is ${u} bytes)`,40009,400);this.throwIfUnpublishableState(),h.logAction(this.logger,h.LOG_MICRO,"RealtimeChannel.publish()","sending message; channel state is "+this.state+", message count = "+f.length);const p=Me({action:Z.MESSAGE,channel:this.name,messages:f});return this.sendMessage(p)}throwIfUnpublishableState(){if(!this.connectionManager.activeState())throw this.connectionManager.getError();if(this.state==="failed"||this.state==="suspended")throw this.invalidStateError()}onEvent(a){h.logAction(this.logger,h.LOG_MICRO,"RealtimeChannel.onEvent()","received message");const l=this.subscriptions;for(let o=0;o<a.length;o++){const u=a[o];l.emit(u.name,u)}}async attach(){return this.state==="attached"?null:new Promise((a,l)=>{this._attach(!1,null,(o,u)=>o?l(o):a(u))})}_attach(a,l,o){o||(o=f=>{f&&h.logAction(this.logger,h.LOG_ERROR,"RealtimeChannel._attach()","Channel attach failed: "+f.toString())});const u=this.connectionManager;if(!u.activeState()){o(u.getError());return}(this.state!=="attaching"||a)&&this.requestState("attaching",l),this.once(function(f){switch(this.event){case"attached":o?.(null,f);break;case"detached":case"suspended":case"failed":o?.(f.reason||u.getError()||new M("Unable to attach; reason unknown; state = "+this.event,9e4,500));break;case"detaching":o?.(new M("Attach request superseded by a subsequent detach request",9e4,409));break}})}attachImpl(){h.logAction(this.logger,h.LOG_MICRO,"RealtimeChannel.attachImpl()","sending ATTACH message");const a=Me({action:Z.ATTACH,channel:this.name,params:this.channelOptions.params,channelSerial:this.properties.channelSerial});this.channelOptions.modes&&a.encodeModesToFlags(_r(this.channelOptions.modes)),this._attachResume&&a.setFlag("ATTACH_RESUME"),this._lastPayload.decodeFailureRecoveryInProgress&&(a.channelSerial=this._lastPayload.protocolMessageChannelSerial),this.sendMessage(a).catch(Ts)}async detach(){const a=this.connectionManager;if(!a.activeState())throw a.getError();switch(this.state){case"suspended":this.notifyState("detached");return;case"detached":return;case"failed":throw new M("Unable to detach; channel state = failed",90001,400);default:this.requestState("detaching");case"detaching":return new Promise((l,o)=>{this.once(function(u){switch(this.event){case"detached":l();break;case"attached":case"suspended":case"failed":o(u.reason||a.getError()||new M("Unable to detach; reason unknown; state = "+this.event,9e4,500));break;case"attaching":o(new M("Detach request superseded by a subsequent attach request",9e4,409));break}})})}}detachImpl(){h.logAction(this.logger,h.LOG_MICRO,"RealtimeChannel.detach()","sending DETACH message");const a=Me({action:Z.DETACH,channel:this.name});this.sendMessage(a).catch(Ts)}async subscribe(...a){const[l,o]=hf.processListenerArgs(a);if(this.state==="failed")throw M.fromValues(this.invalidStateError());return l&&typeof l=="object"&&!Array.isArray(l)?this.client._FilteredSubscriptions.subscribeFilter(this,l,o):this.subscriptions.on(l,o),this.channelOptions.attachOnSubscribe!==!1?this.attach():null}unsubscribe(...a){var l;const[o,u]=hf.processListenerArgs(a);if(typeof o=="object"&&!u||(l=this.filteredSubscriptions)!=null&&l.has(u)){this.client._FilteredSubscriptions.getAndDeleteFilteredSubscriptions(this,o,u).forEach(f=>this.subscriptions.off(f));return}this.subscriptions.off(o,u)}sync(){switch(this.state){case"initialized":case"detaching":case"detached":throw new Rt("Unable to sync to channel; not attached",4e4)}const a=this.connectionManager;if(!a.activeState())throw a.getError();const l=Me({action:Z.SYNC,channel:this.name});this.syncChannelSerial&&(l.channelSerial=this.syncChannelSerial),a.send(l)}async sendMessage(a){return new Promise((l,o)=>{this.connectionManager.send(a,this.client.options.queueMessages,u=>{u?o(u):l()})})}async sendPresence(a){const l=Me({action:Z.PRESENCE,channel:this.name,presence:a});return this.sendMessage(l)}sendState(a){const l=Me({action:Z.OBJECT,channel:this.name,state:a});return this.sendMessage(l)}async processMessage(a){(a.action===Z.ATTACHED||a.action===Z.MESSAGE||a.action===Z.PRESENCE||a.action===Z.OBJECT||a.action===Z.ANNOTATION)&&this.setChannelSerial(a.channelSerial);let l,o=!1;switch(a.action){case Z.ATTACHED:{this.properties.attachSerial=a.channelSerial,this._mode=a.getMode(),this.params=a.params||{};const u=a.decodeModesFromFlags();this.modes=u&&el(u)||void 0;const f=a.hasFlag("RESUMED"),m=a.hasFlag("HAS_PRESENCE"),p=a.hasFlag("HAS_BACKLOG"),T=a.hasFlag("HAS_OBJECTS");if(this.state==="attached"){f||(this._presence&&this._presence.onAttached(m),this._objects&&this._objects.onAttached(T));const S=new ui(this.state,this.state,f,p,a.error);this._allChannelChanges.emit("update",S),(!f||this.channelOptions.updateOnAttached)&&this.emit("update",S)}else this.state==="detaching"?this.checkPendingState():this.notifyState("attached",a.error,f,m,p,T);break}case Z.DETACHED:{const u=a.error?M.fromValues(a.error):new M("Channel detached",90001,404);this.state==="detaching"?this.notifyState("detached",u):this.state==="attaching"?this.notifyState("suspended",u):(this.state==="attached"||this.state==="suspended")&&this.requestState("attaching",u);break}case Z.SYNC:if(o=!0,l=this.syncChannelSerial=a.channelSerial,!a.presence)break;case Z.PRESENCE:{if(!a.presence)break;je(a);const u=this.channelOptions;if(this._presence){const f=await Promise.all(a.presence.map(m=>m.decode(u,this.logger)));this._presence.setPresence(f,o,l)}break}case Z.OBJECT:case Z.OBJECT_SYNC:{if(!this._objects||!a.state)return;je(a);const u=this.client.connection.connectionManager.getActiveTransportFormat(),f=a.state.map(m=>m.decode(this.client,u));a.action===Z.OBJECT?this._objects.handleObjectMessages(f):this._objects.handleObjectSyncMessages(f,a.channelSerial);break}case Z.MESSAGE:{if(this.state!=="attached"){h.logAction(this.logger,h.LOG_MAJOR,"RealtimeChannel.processMessage()",'Message "'+a.id+'" skipped as this channel "'+this.name+'" state is not "attached" (state is "'+this.state+'").');return}je(a);const u=a.messages,f=u[0],m=u[u.length-1];if(f.extras&&f.extras.delta&&f.extras.delta.from!==this._lastPayload.messageId){const T='Delta message decode failure - previous message not available for message "'+a.id+'" on this channel "'+this.name+'".';h.logAction(this.logger,h.LOG_ERROR,"RealtimeChannel.processMessage()",T),this._startDecodeFailureRecovery(new M(T,40018,400));break}let p=[];for(let T=0;T<u.length;T++){const{decoded:S,err:L}=await u[T].decodeWithErr(this._decodingContext,this.logger);if(p[T]=S,L)switch(L.code){case 40018:this._startDecodeFailureRecovery(L);return;case 40019:case 40021:this.notifyState("failed",L);return}}this._lastPayload.messageId=m.id,this._lastPayload.protocolMessageChannelSerial=a.channelSerial,this.onEvent(p);break}case Z.ANNOTATION:{je(a);const u=this.channelOptions;if(this._annotations){const f=await Promise.all((a.annotations||[]).map(m=>m.decode(u,this.logger)));this._annotations._processIncoming(f)}break}case Z.ERROR:{const u=a.error;u&&u.code==80016?this.checkPendingState():this.notifyState("failed",M.fromValues(u));break}default:h.logAction(this.logger,h.LOG_MAJOR,"RealtimeChannel.processMessage()","Protocol error: unrecognised message action ("+a.action+")")}}_startDecodeFailureRecovery(a){this._lastPayload.decodeFailureRecoveryInProgress||(h.logAction(this.logger,h.LOG_MAJOR,"RealtimeChannel.processMessage()","Starting decode failure recovery process."),this._lastPayload.decodeFailureRecoveryInProgress=!0,this._attach(!0,a,()=>{this._lastPayload.decodeFailureRecoveryInProgress=!1}))}onAttached(){h.logAction(this.logger,h.LOG_MINOR,"RealtimeChannel.onAttached","activating channel; name = "+this.name)}notifyState(a,l,o,u,f,m){if(h.logAction(this.logger,h.LOG_MICRO,"RealtimeChannel.notifyState","name = "+this.name+", current state = "+this.state+", notifying state "+a),this.clearStateTimer(),["detached","suspended","failed"].includes(a)&&(this.properties.channelSerial=null),a===this.state)return;this._presence&&this._presence.actOnChannelState(a,u,l),this._objects&&this._objects.actOnChannelState(a,m),a==="suspended"&&this.connectionManager.state.sendEvents?this.startRetryTimer():this.cancelRetryTimer(),l&&(this.errorReason=l);const p=new ui(this.state,a,o,f,l),T='Channel state for channel "'+this.name+'"',S=a+(l?"; reason: "+l:"");a==="failed"?h.logAction(this.logger,h.LOG_ERROR,T,S):h.logAction(this.logger,h.LOG_MAJOR,T,S),a!=="attaching"&&a!=="suspended"&&(this.retryCount=0),a==="attached"&&this.onAttached(),a==="attached"?this._attachResume=!0:(a==="detaching"||a==="failed")&&(this._attachResume=!1),this.state=a,this._allChannelChanges.emit(a,p),this.emit(a,p)}requestState(a,l){h.logAction(this.logger,h.LOG_MINOR,"RealtimeChannel.requestState","name = "+this.name+", state = "+a),this.notifyState(a,l),this.checkPendingState()}checkPendingState(){if(!this.connectionManager.state.sendEvents){h.logAction(this.logger,h.LOG_MINOR,"RealtimeChannel.checkPendingState","sendEvents is false; state is "+this.connectionManager.state.state);return}switch(h.logAction(this.logger,h.LOG_MINOR,"RealtimeChannel.checkPendingState","name = "+this.name+", state = "+this.state),this.state){case"attaching":this.startStateTimerIfNotRunning(),this.attachImpl();break;case"detaching":this.startStateTimerIfNotRunning(),this.detachImpl();break;case"attached":this.sync();break}}timeoutPendingState(){switch(this.state){case"attaching":{const a=new M("Channel attach timed out",90007,408);this.notifyState("suspended",a);break}case"detaching":{const a=new M("Channel detach timed out",90007,408);this.notifyState("attached",a);break}default:this.checkPendingState();break}}startStateTimerIfNotRunning(){this.stateTimer||(this.stateTimer=setTimeout(()=>{h.logAction(this.logger,h.LOG_MINOR,"RealtimeChannel.startStateTimerIfNotRunning","timer expired"),this.stateTimer=null,this.timeoutPendingState()},this.client.options.timeouts.realtimeRequestTimeout))}clearStateTimer(){const a=this.stateTimer;a&&(clearTimeout(a),this.stateTimer=null)}startRetryTimer(){if(this.retryTimer)return;this.retryCount++;const a=Ni(this.client.options.timeouts.channelRetryTimeout,this.retryCount);this.retryTimer=setTimeout(()=>{this.state==="suspended"&&this.connectionManager.state.sendEvents&&(this.retryTimer=null,h.logAction(this.logger,h.LOG_MINOR,"RealtimeChannel retry timer expired","attempting a new attach"),this.requestState("attaching"))},a)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}getReleaseErr(){const a=this.state;return a==="initialized"||a==="detached"||a==="failed"?null:new M("Can only release a channel in a state where there is no possibility of further updates from the server being received (initialized, detached, or failed); was "+a,90001,400)}setChannelSerial(a){h.logAction(this.logger,h.LOG_MICRO,"RealtimeChannel.setChannelSerial()","Updating channel serial; serial = "+a+"; previous = "+this.properties.channelSerial),a&&(this.properties.channelSerial=a)}async status(){return this.client.rest.channelMixin.status(this)}};function hi(i){const a=i||{},{agent:l}=a;return Je(a,["agent"])}var di=fi,uo=class{constructor(i){this.channel=i,this.logger=i.logger,this.subscriptions=new ee(this.logger)}async publish(i,a){const l=this.channel.name,o=lo(i,a),u=await o.encode();this.channel.throwIfUnpublishableState(),h.logAction(this.logger,h.LOG_MICRO,"RealtimeAnnotations.publish()","channelName = "+l+", sending annotation with messageSerial = "+o.messageSerial+", type = "+o.type);const f=Me({action:Z.ANNOTATION,channel:l,annotations:[u]});return this.channel.sendMessage(f)}async delete(i,a){return a.action="annotation.delete",this.publish(i,a)}async subscribe(...i){const a=di.processListenerArgs(i),l=a[0],o=a[1],u=this.channel;if(u.state==="failed")throw M.fromValues(u.invalidStateError());if(this.subscriptions.on(l,o),this.channel.channelOptions.attachOnSubscribe!==!1&&await u.attach(),(this.channel.state==="attached"&&this.channel._mode&Oe.ANNOTATION_SUBSCRIBE)===0)throw new M("You are trying to add an annotation listener, but you haven't requested the annotation_subscribe channel mode in ChannelOptions, so this won't do anything (we only deliver annotations to clients who have explicitly requested them)",93001,400)}unsubscribe(...i){const a=di.processListenerArgs(i),l=a[0],o=a[1];this.subscriptions.off(l,o)}_processIncoming(i){for(const a of i)this.subscriptions.emit(a.type||"",a)}async get(i,a){return Tl.prototype.get.call(this,i,a)}},Hn=uo,jn=class mc extends eo{constructor(a){var l,o;if(!mc._MsgPack)throw new Error("Expected DefaultRest._MsgPack to have been set");super(at.objectifyOptions(a,!0,"Rest",h.defaultLogger,kt(ht({},Sl),{Crypto:(l=mc.Crypto)!=null?l:void 0,MsgPack:(o=mc._MsgPack)!=null?o:void 0,Annotations:{Annotation:Vi,WireAnnotation:ci,RealtimeAnnotations:Hn,RestAnnotations:Tl}})))}static get Crypto(){if(this._Crypto===null)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(a){this._Crypto=a}};jn._Crypto=null,jn.Message=Hi,jn.PresenceMessage=ji,jn.Annotation=Ol,jn._MsgPack=null,jn._Http=fs;var Rs=jn,fo=class extends ee{constructor(i){super(i),this.messages=[]}count(){return this.messages.length}push(i){this.messages.push(i)}shift(){return this.messages.shift()}last(){return this.messages[this.messages.length-1]}copyAll(){return this.messages.slice()}append(i){this.messages.push.apply(this.messages,i)}prepend(i){this.messages.unshift.apply(this.messages,i)}completeMessages(i,a,l){h.logAction(this.logger,h.LOG_MICRO,"MessageQueue.completeMessages()","serial = "+i+"; count = "+a),l=l||null;const o=this.messages;if(o.length===0)throw new Error("MessageQueue.completeMessages(): completeMessages called on any empty MessageQueue");const u=o[0];if(u){const f=u.message.msgSerial,m=i+a;if(m>f){const p=o.splice(0,m-f);for(const T of p)T.callback(l)}o.length==0&&this.emit("idle")}}completeAllMessages(i){this.completeMessages(0,Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,i)}resetSendAttempted(){for(let i of this.messages)i.sendAttempted=!1}clear(){h.logAction(this.logger,h.LOG_MICRO,"MessageQueue.clear()","clearing "+this.messages.length+" messages"),this.messages=[],this.emit("idle")}},ho=fo,go=class{constructor(i,a){this.message=i,this.callback=a,this.merged=!1;const l=i.action;this.sendAttempted=!1,this.ackRequired=typeof l=="number"&&[Z.MESSAGE,Z.PRESENCE,Z.ANNOTATION,Z.OBJECT].includes(l)}},Hc=class extends ee{constructor(i){super(i.logger),this.transport=i,this.messageQueue=new ho(this.logger),i.on("ack",(a,l)=>{this.onAck(a,l)}),i.on("nack",(a,l,o)=>{this.onNack(a,l,o)})}onAck(i,a){h.logAction(this.logger,h.LOG_MICRO,"Protocol.onAck()","serial = "+i+"; count = "+a),this.messageQueue.completeMessages(i,a)}onNack(i,a,l){h.logAction(this.logger,h.LOG_ERROR,"Protocol.onNack()","serial = "+i+"; count = "+a+"; err = "+_t(l)),l||(l=new M("Unable to send message; channel not responding",50001,500)),this.messageQueue.completeMessages(i,a,l)}onceIdle(i){const a=this.messageQueue;if(a.count()===0){i();return}a.once("idle",i)}send(i){i.ackRequired&&this.messageQueue.push(i),this.logger.shouldLog(h.LOG_MICRO)&&h.logActionNoStrip(this.logger,h.LOG_MICRO,"Protocol.send()","sending msg; "+xa(i.message,this.transport.connectionManager.realtime._RealtimePresence,this.transport.connectionManager.realtime._Annotations,this.transport.connectionManager.realtime._objectsPlugin)),i.sendAttempted=!0,this.transport.send(i.message)}getTransport(){return this.transport}getPendingMessages(){return this.messageQueue.copyAll()}clearPendingMessages(){return this.messageQueue.clear()}finish(){const i=this.transport;this.onceIdle(function(){i.disconnect()})}},mo=Hc,po=class{constructor(i,a,l,o){this.previous=i,this.current=a,l&&(this.retryIn=l),o&&(this.reason=o)}},Yi=po,le={DISCONNECTED:80003,SUSPENDED:80002,FAILED:8e4,CLOSING:80017,CLOSED:80017,UNKNOWN_CONNECTION_ERR:50002,UNKNOWN_CHANNEL_ERR:50001},yo={disconnected:()=>M.fromValues({statusCode:400,code:le.DISCONNECTED,message:"Connection to server temporarily unavailable"}),suspended:()=>M.fromValues({statusCode:400,code:le.SUSPENDED,message:"Connection to server unavailable"}),failed:()=>M.fromValues({statusCode:400,code:le.FAILED,message:"Connection failed or disconnected by server"}),closing:()=>M.fromValues({statusCode:400,code:le.CLOSING,message:"Connection closing"}),closed:()=>M.fromValues({statusCode:400,code:le.CLOSED,message:"Connection closed"}),unknownConnectionErr:()=>M.fromValues({statusCode:500,code:le.UNKNOWN_CONNECTION_ERR,message:"Internal connection error"}),unknownChannelErr:()=>M.fromValues({statusCode:500,code:le.UNKNOWN_CONNECTION_ERR,message:"Internal channel error"})};function Ie(i){return!i.statusCode||!i.code||i.statusCode>=500?!0:Object.values(le).includes(i.code)}var re=yo,Pi=Me({action:Z.CLOSE}),Cl=Me({action:Z.DISCONNECT}),_s=class extends ee{constructor(i,a,l,o){super(i.logger),o&&(l.format=void 0,l.heartbeats=!0),this.connectionManager=i,this.auth=a,this.params=l,this.timeouts=l.options.timeouts,this.format=l.format,this.isConnected=!1,this.isFinished=!1,this.isDisposed=!1,this.maxIdleInterval=null,this.idleTimer=null,this.lastActivity=null}connect(){}close(){this.isConnected&&this.requestClose(),this.finish("closed",re.closed())}disconnect(i){this.isConnected&&this.requestDisconnect(),this.finish("disconnected",i||re.disconnected())}fail(i){this.isConnected&&this.requestDisconnect(),this.finish("failed",i||re.failed())}finish(i,a){var l;this.isFinished||(this.isFinished=!0,this.isConnected=!1,this.maxIdleInterval=null,clearTimeout((l=this.idleTimer)!=null?l:void 0),this.idleTimer=null,this.emit(i,a),this.dispose())}onProtocolMessage(i){switch(this.logger.shouldLog(h.LOG_MICRO)&&h.logActionNoStrip(this.logger,h.LOG_MICRO,"Transport.onProtocolMessage()","received on "+this.shortName+": "+xa(i,this.connectionManager.realtime._RealtimePresence,this.connectionManager.realtime._Annotations,this.connectionManager.realtime._objectsPlugin)+"; connectionId = "+this.connectionManager.connectionId),this.onActivity(),i.action){case Z.HEARTBEAT:h.logActionNoStrip(this.logger,h.LOG_MICRO,"Transport.onProtocolMessage()",this.shortName+" heartbeat; connectionId = "+this.connectionManager.connectionId),this.emit("heartbeat",i.id);break;case Z.CONNECTED:this.onConnect(i),this.emit("connected",i.error,i.connectionId,i.connectionDetails,i);break;case Z.CLOSED:this.onClose(i);break;case Z.DISCONNECTED:this.onDisconnect(i);break;case Z.ACK:this.emit("ack",i.msgSerial,i.count);break;case Z.NACK:this.emit("nack",i.msgSerial,i.count,i.error);break;case Z.SYNC:this.connectionManager.onChannelMessage(i,this);break;case Z.ACTIVATE:break;case Z.AUTH:xt(this.auth.authorize(),a=>{a&&h.logAction(this.logger,h.LOG_ERROR,"Transport.onProtocolMessage()","Ably requested re-authentication, but unable to obtain a new token: "+_t(a))});break;case Z.ERROR:if(h.logAction(this.logger,h.LOG_MINOR,"Transport.onProtocolMessage()","received error action; connectionId = "+this.connectionManager.connectionId+"; err = "+w.Config.inspect(i.error)+(i.channel?", channel: "+i.channel:"")),i.channel===void 0){this.onFatalError(i);break}this.connectionManager.onChannelMessage(i,this);break;default:this.connectionManager.onChannelMessage(i,this)}}onConnect(i){if(this.isConnected=!0,!i.connectionDetails)throw new Error("Transport.onConnect(): Connect message recieved without connectionDetails");const a=i.connectionDetails.maxIdleInterval;a&&(this.maxIdleInterval=a+this.timeouts.realtimeRequestTimeout,this.onActivity())}onDisconnect(i){const a=i&&i.error;h.logAction(this.logger,h.LOG_MINOR,"Transport.onDisconnect()","err = "+_t(a)),this.finish("disconnected",a)}onFatalError(i){const a=i&&i.error;h.logAction(this.logger,h.LOG_MINOR,"Transport.onFatalError()","err = "+_t(a)),this.finish("failed",a)}onClose(i){const a=i&&i.error;h.logAction(this.logger,h.LOG_MINOR,"Transport.onClose()","err = "+_t(a)),this.finish("closed",a)}requestClose(){h.logAction(this.logger,h.LOG_MINOR,"Transport.requestClose()",""),this.send(Pi)}requestDisconnect(){h.logAction(this.logger,h.LOG_MINOR,"Transport.requestDisconnect()",""),this.send(Cl)}ping(i){const a={action:Z.HEARTBEAT};i&&(a.id=i),this.send(Me(a))}dispose(){h.logAction(this.logger,h.LOG_MINOR,"Transport.dispose()",""),this.isDisposed=!0,this.off()}onActivity(){this.maxIdleInterval&&(this.lastActivity=this.connectionManager.lastActivity=Date.now(),this.setIdleTimer(this.maxIdleInterval+100))}setIdleTimer(i){this.idleTimer||(this.idleTimer=setTimeout(()=>{this.onIdleTimerExpire()},i))}onIdleTimerExpire(){if(!this.lastActivity||!this.maxIdleInterval)throw new Error("Transport.onIdleTimerExpire(): lastActivity/maxIdleInterval not set");this.idleTimer=null;const i=Date.now()-this.lastActivity,a=this.maxIdleInterval-i;if(a<=0){const l="No activity seen from realtime in "+i+"ms; assuming connection has dropped";h.logAction(this.logger,h.LOG_ERROR,"Transport.onIdleTimerExpire()",l),this.disconnect(new M(l,80003,408))}else this.setIdleTimer(a+100)}static tryConnect(i,a,l,o,u){const f=new i(a,l,o);let m;const p=function(S){clearTimeout(m),u({event:this.event,error:S})},T=a.options.timeouts.realtimeRequestTimeout;return m=setTimeout(()=>{f.off(["preconnect","disconnected","failed"]),f.dispose(),p.call({event:"disconnected"},new M("Timeout waiting for transport to indicate itself viable",5e4,500))},T),f.on(["failed","disconnected"],p),f.on("preconnect",function(){h.logAction(a.logger,h.LOG_MINOR,"Transport.tryConnect()","viable transport "+f),clearTimeout(m),f.off(["failed","disconnected"],p),u(null,f)}),f.connect(),f}static isAvailable(){throw new M("isAvailable not implemented for transport",5e4,500)}},bn=_s,me;(i=>{i.WebSocket="web_socket",i.Comet="comet",i.XhrPolling="xhr_polling"})(me||(me={}));var Qi=typeof Aa<"u"?Aa:typeof window<"u"?window:self,Es=()=>{var i;return typeof w.WebStorage<"u"&&((i=w.WebStorage)==null?void 0:i.localSupported)},Vn=()=>{var i;return typeof w.WebStorage<"u"&&((i=w.WebStorage)==null?void 0:i.sessionSupported)},gi=function(){},Ml="ably-transport-preference";function xe(i,a,l){let o;if(i.channel!==a.channel||(o=i.action)!==Z.PRESENCE&&o!==Z.MESSAGE||o!==a.action)return!1;const u=o===Z.PRESENCE?"presence":"messages",f=i[u].concat(a[u]);return bl(f)>l||!Ar(f,"clientId")||!f.every(function(p){return!p.id})?!1:(i[u]=f,!0)}function Ba(i){try{return JSON.parse(i)}catch{return null}}var Sn=class{constructor(i,a,l,o){this.options=i,this.host=a,this.mode=l,this.connectionKey=o,this.format=i.useBinaryProtocol?"msgpack":"json"}getConnectParams(i){const a=i?F(i):{},l=this.options;switch(this.mode){case"resume":a.resume=this.connectionKey;break;case"recover":{const o=Ba(l.recover);o&&(a.recover=o.connectionKey);break}}return l.clientId!==void 0&&(a.clientId=l.clientId),l.echoMessages===!1&&(a.echo="false"),this.format!==void 0&&(a.format=this.format),this.stream!==void 0&&(a.stream=this.stream),this.heartbeats!==void 0&&(a.heartbeats=this.heartbeats),a.v=at.protocolVersion,a.agent=ll(this.options),l.transportParams!==void 0&&q(a,l.transportParams),a}toString(){let i="[mode="+this.mode;return this.host&&(i+=",host="+this.host),this.connectionKey&&(i+=",connectionKey="+this.connectionKey),this.format&&(i+=",format="+this.format),i+="]",i}},vo=class Xd extends ee{constructor(a,l){super(a.logger),this.supportedTransports={},this.disconnectedRetryCount=0,this.pendingChannelMessagesState={isProcessing:!1,queue:[]},this.realtime=a,this.initTransports(),this.options=l;const o=l.timeouts,u=o.webSocketConnectTimeout+o.realtimeRequestTimeout;if(this.states={initialized:{state:"initialized",terminal:!1,queueEvents:!0,sendEvents:!1,failState:"disconnected"},connecting:{state:"connecting",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:u,failState:"disconnected"},connected:{state:"connected",terminal:!1,queueEvents:!1,sendEvents:!0,failState:"disconnected"},disconnected:{state:"disconnected",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:o.disconnectedRetryTimeout,failState:"disconnected"},suspended:{state:"suspended",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:o.suspendedRetryTimeout,failState:"suspended"},closing:{state:"closing",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:o.realtimeRequestTimeout,failState:"closed"},closed:{state:"closed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"closed"},failed:{state:"failed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"failed"}},this.state=this.states.initialized,this.errorReason=null,this.queuedMessages=new ho(this.logger),this.msgSerial=0,this.connectionDetails=void 0,this.connectionId=void 0,this.connectionKey=void 0,this.connectionStateTtl=o.connectionStateTtl,this.maxIdleInterval=null,this.transports=Ee(l.transports||at.defaultTransports,this.supportedTransports),this.transportPreference=null,this.transports.includes(me.WebSocket)&&(this.webSocketTransportAvailable=!0),this.transports.includes(me.XhrPolling)?this.baseTransport=me.XhrPolling:this.transports.includes(me.Comet)&&(this.baseTransport=me.Comet),this.domains=at.getHosts(l),this.activeProtocol=null,this.host=null,this.lastAutoReconnectAttempt=null,this.lastActivity=null,this.forceFallbackHost=!1,this.connectCounter=0,this.wsCheckResult=null,this.webSocketSlowTimer=null,this.webSocketGiveUpTimer=null,this.abandonedWebSocket=!1,h.logAction(this.logger,h.LOG_MINOR,"Realtime.ConnectionManager()","started"),h.logAction(this.logger,h.LOG_MICRO,"Realtime.ConnectionManager()","requested transports = ["+(l.transports||at.defaultTransports)+"]"),h.logAction(this.logger,h.LOG_MICRO,"Realtime.ConnectionManager()","available transports = ["+this.transports+"]"),h.logAction(this.logger,h.LOG_MICRO,"Realtime.ConnectionManager()","http domains = ["+this.domains+"]"),!this.transports.length){const m="no requested transports available";throw h.logAction(this.logger,h.LOG_ERROR,"realtime.ConnectionManager()",m),new Error(m)}const f=w.Config.addEventListener;f&&(Vn()&&typeof l.recover=="function"&&f("beforeunload",this.persistConnection.bind(this)),l.closeOnUnload===!0&&f("beforeunload",()=>{h.logAction(this.logger,h.LOG_MAJOR,"Realtime.ConnectionManager()","beforeunload event has triggered the connection to close as closeOnUnload is true"),this.requestState({state:"closing"})}),f("online",()=>{var m;this.state==this.states.disconnected||this.state==this.states.suspended?(h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager caught browser ‘online’ event","reattempting connection"),this.requestState({state:"connecting"})):this.state==this.states.connecting&&((m=this.pendingTransport)==null||m.off(),this.disconnectAllTransports(),this.startConnect())}),f("offline",()=>{this.state==this.states.connected&&(h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager caught browser ‘offline’ event","disconnecting active transport"),this.disconnectAllTransports())}))}static supportedTransports(a){const l={supportedTransports:{}};return this.initTransports(a,l),l.supportedTransports}static initTransports(a,l){const o=ht(ht({},w.Transports.bundledImplementations),a);[me.WebSocket,...w.Transports.order].forEach(u=>{const f=o[u];f&&f.isAvailable()&&(l.supportedTransports[u]=f)})}initTransports(){Xd.initTransports(this.realtime._additionalTransportImplementations,this)}createTransportParams(a,l){return new Sn(this.options,a,l,this.connectionKey)}getTransportParams(a){(o=>{if(this.connectionKey){o("resume");return}if(typeof this.options.recover=="string"){o("recover");return}const u=this.options.recover,f=this.getSessionRecoverData(),m=this.sessionRecoveryName();if(f&&typeof u=="function"){h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.getTransportParams()","Calling clientOptions-provided recover function with last session data (recovery scope: "+m+")"),u(f,p=>{p?(this.options.recover=f.recoveryKey,o("recover")):o("clean")});return}o("clean")})(o=>{const u=this.createTransportParams(null,o);if(o==="recover"){h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport recovery mode = recover; recoveryKey = "+this.options.recover);const f=Ba(this.options.recover);f&&(this.msgSerial=f.msgSerial)}else h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport params = "+u.toString());a(u)})}tryATransport(a,l,o){h.logAction(this.logger,h.LOG_MICRO,"ConnectionManager.tryATransport()","trying "+l),this.proposedTransport=bn.tryConnect(this.supportedTransports[l],this,this.realtime.auth,a,(u,f)=>{const m=this.state;if(m==this.states.closing||m==this.states.closed||m==this.states.failed){f&&(h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.tryATransport()","connection "+m.state+" while we were attempting the transport; closing "+f),f.close()),o(!0);return}if(u){h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.tryATransport()","transport "+l+" "+u.event+", err: "+u.error.toString()),an.isTokenErr(u.error)&&!(this.errorReason&&an.isTokenErr(this.errorReason))?(this.errorReason=u.error,xt(this.realtime.auth._forceNewToken(null,null),p=>{if(p){this.actOnErrorFromAuthorize(p);return}this.tryATransport(a,l,o)})):u.event==="failed"?(this.notifyState({state:"failed",error:u.error}),o(!0)):u.event==="disconnected"&&(Ie(u.error)?o(!1):(this.notifyState({state:this.states.connecting.failState,error:u.error}),o(!0)));return}h.logAction(this.logger,h.LOG_MICRO,"ConnectionManager.tryATransport()","viable transport "+l+"; setting pending"),this.setTransportPending(f,a),o(null,f)})}setTransportPending(a,l){const o=l.mode;h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.setTransportPending()","transport = "+a+"; mode = "+o),this.pendingTransport=a,this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),a.once("connected",(f,m,p)=>{this.activateTransport(f,a,m,p),o==="recover"&&this.options.recover&&(delete this.options.recover,this.unpersistConnection())});const u=this;a.on(["disconnected","closed","failed"],function(f){u.deactivateTransport(a,this.event,f)}),this.emit("transport.pending",a)}activateTransport(a,l,o,u){h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.activateTransport()","transport = "+l),a&&h.logAction(this.logger,h.LOG_ERROR,"ConnectionManager.activateTransport()","error = "+a),o&&h.logAction(this.logger,h.LOG_MICRO,"ConnectionManager.activateTransport()","connectionId =  "+o),u&&h.logAction(this.logger,h.LOG_MICRO,"ConnectionManager.activateTransport()","connectionDetails =  "+JSON.stringify(u)),this.persistTransportPreference(l);const f=this.state,m=this.states.connected.state;if(h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.activateTransport()","current state = "+f.state),f.state==this.states.closing.state||f.state==this.states.closed.state||f.state==this.states.failed.state)return h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.activateTransport()","Disconnecting transport and abandoning"),l.disconnect(),!1;if(delete this.pendingTransport,!l.isConnected)return h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.activateTransport()","Declining to activate transport "+l+" since it appears to no longer be connected"),!1;const p=this.activeProtocol;this.activeProtocol=new mo(l),this.host=l.params.host;const T=u.connectionKey;if(T&&this.connectionKey!=T&&this.setConnection(o,u,!!a),this.onConnectionDetailsUpdate(u,l),w.Config.nextTick(()=>{l.on("connected",(S,L,k)=>{this.onConnectionDetailsUpdate(k,l),this.emit("update",new Yi(m,m,null,S))})}),f.state===this.states.connected.state?a&&(this.errorReason=this.realtime.connection.errorReason=a,this.emit("update",new Yi(m,m,null,a))):(this.notifyState({state:"connected",error:a}),this.errorReason=this.realtime.connection.errorReason=a||null),this.emit("transport.active",l),p)if(p.messageQueue.count()>0&&h.logAction(this.logger,h.LOG_ERROR,"ConnectionManager.activateTransport()","Previous active protocol (for transport "+p.transport.shortName+", new one is "+l.shortName+") finishing with "+p.messageQueue.count()+" messages still pending"),p.transport===l){const S="Assumption violated: activating a transport that was also the transport for the previous active protocol; transport = "+l.shortName+"; stack = "+new Error().stack;h.logAction(this.logger,h.LOG_ERROR,"ConnectionManager.activateTransport()",S)}else p.finish();return!0}deactivateTransport(a,l,o){const u=this.activeProtocol,f=u&&u.getTransport()===a,m=a===this.pendingTransport,p=this.noTransportsScheduledForActivation();if(h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.deactivateTransport()","transport = "+a),h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.deactivateTransport()","state = "+l+(f?"; was active":m?"; was pending":"")+(p?"":"; another transport is scheduled for activation")),o&&o.message&&h.logAction(this.logger,h.LOG_MICRO,"ConnectionManager.deactivateTransport()","reason =  "+o.message),f&&(h.logAction(this.logger,h.LOG_MICRO,"ConnectionManager.deactivateTransport()","Getting, clearing, and requeuing "+this.activeProtocol.messageQueue.count()+" pending messages"),this.queuePendingMessages(u.getPendingMessages()),u.clearPendingMessages(),this.activeProtocol=this.host=null),this.emit("transport.inactive",a),f&&p||f&&l==="failed"||l==="closed"||u===null&&m){if(l==="disconnected"&&o&&o.statusCode>500&&this.domains.length>1){this.unpersistTransportPreference(),this.forceFallbackHost=!0,this.notifyState({state:l,error:o,retryImmediately:!0});return}const T=l==="failed"&&an.isTokenErr(o)?"disconnected":l;this.notifyState({state:T,error:o});return}}noTransportsScheduledForActivation(){return!this.pendingTransport||!this.pendingTransport.isConnected}setConnection(a,l,o){const u=this.connectionId;(u&&u!==a||!u&&o)&&(h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.setConnection()","Resetting msgSerial"),this.msgSerial=0,this.queuedMessages.resetSendAttempted()),this.connectionId!==a&&h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.setConnection()","New connectionId; reattaching any attached channels"),this.realtime.connection.id=this.connectionId=a,this.realtime.connection.key=this.connectionKey=l.connectionKey}clearConnection(){this.realtime.connection.id=this.connectionId=void 0,this.realtime.connection.key=this.connectionKey=void 0,this.msgSerial=0,this.unpersistConnection()}createRecoveryKey(){return this.connectionKey?JSON.stringify({connectionKey:this.connectionKey,msgSerial:this.msgSerial,channelSerials:this.realtime.channels.channelSerials()}):null}checkConnectionStateFreshness(){if(!this.lastActivity||!this.connectionId)return;const a=Date.now()-this.lastActivity;a>this.connectionStateTtl+this.maxIdleInterval&&(h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.checkConnectionStateFreshness()","Last known activity from realtime was "+a+"ms ago; discarding connection state"),this.clearConnection(),this.states.connecting.failState="suspended")}persistConnection(){if(Vn()){const a=this.createRecoveryKey();a&&this.setSessionRecoverData({recoveryKey:a,disconnectedAt:Date.now(),location:Qi.location,clientId:this.realtime.auth.clientId})}}unpersistConnection(){this.clearSessionRecoverData()}getActiveTransportFormat(){var a;return(a=this.activeProtocol)==null?void 0:a.getTransport().format}getError(){if(this.errorReason){const a=Rt.fromValues(this.errorReason);return a.cause=this.errorReason,a}return this.getStateError()}getStateError(){var a,l;return(l=(a=re)[this.state.state])==null?void 0:l.call(a)}activeState(){return this.state.queueEvents||this.state.sendEvents}enactStateChange(a){const l="Connection state",o=a.current+(a.reason?"; reason: "+a.reason:"");a.current==="failed"?h.logAction(this.logger,h.LOG_ERROR,l,o):h.logAction(this.logger,h.LOG_MAJOR,l,o),h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.enactStateChange","setting new state: "+a.current+"; reason = "+(a.reason&&a.reason.message));const u=this.state=this.states[a.current];a.reason&&(this.errorReason=a.reason,this.realtime.connection.errorReason=a.reason),(u.terminal||u.state==="suspended")&&this.clearConnection(),this.emit("connectionstate",a)}startTransitionTimer(a){h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.startTransitionTimer()","transitionState: "+a.state),this.transitionTimer&&(h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.startTransitionTimer()","clearing already-running timer"),clearTimeout(this.transitionTimer)),this.transitionTimer=setTimeout(()=>{this.transitionTimer&&(this.transitionTimer=null,h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager "+a.state+" timer expired","requesting new state: "+a.failState),this.notifyState({state:a.failState}))},a.retryDelay)}cancelTransitionTimer(){h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.cancelTransitionTimer()",""),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null)}startSuspendTimer(){this.suspendTimer||(this.suspendTimer=setTimeout(()=>{this.suspendTimer&&(this.suspendTimer=null,h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager suspend timer expired","requesting new state: suspended"),this.states.connecting.failState="suspended",this.notifyState({state:"suspended"}))},this.connectionStateTtl))}checkSuspendTimer(a){a!=="disconnected"&&a!=="suspended"&&a!=="connecting"&&this.cancelSuspendTimer()}cancelSuspendTimer(){this.states.connecting.failState="disconnected",this.suspendTimer&&(clearTimeout(this.suspendTimer),this.suspendTimer=null)}startRetryTimer(a){this.retryTimer=setTimeout(()=>{h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager retry timer expired","retrying"),this.retryTimer=null,this.requestState({state:"connecting"})},a)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}startWebSocketSlowTimer(){this.webSocketSlowTimer=setTimeout(()=>{h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager WebSocket slow timer","checking connectivity"),this.checkWsConnectivity().then(()=>{h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager WebSocket slow timer","ws connectivity check succeeded"),this.wsCheckResult=!0}).catch(()=>{h.logAction(this.logger,h.LOG_MAJOR,"ConnectionManager WebSocket slow timer","ws connectivity check failed"),this.wsCheckResult=!1}),this.realtime.http.checkConnectivity&&xt(this.realtime.http.checkConnectivity(),(a,l)=>{a||!l?(h.logAction(this.logger,h.LOG_MAJOR,"ConnectionManager WebSocket slow timer","http connectivity check failed"),this.cancelWebSocketGiveUpTimer(),this.notifyState({state:"disconnected",error:new M("Unable to connect (network unreachable)",80003,404)})):h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager WebSocket slow timer","http connectivity check succeeded")})},this.options.timeouts.webSocketSlowTimeout)}cancelWebSocketSlowTimer(){this.webSocketSlowTimer&&(clearTimeout(this.webSocketSlowTimer),this.webSocketSlowTimer=null)}startWebSocketGiveUpTimer(a){this.webSocketGiveUpTimer=setTimeout(()=>{var l,o;this.wsCheckResult||(h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager WebSocket give up timer","websocket connection took more than 10s; "+(this.baseTransport?"trying base transport":"")),this.baseTransport?(this.abandonedWebSocket=!0,(l=this.proposedTransport)==null||l.dispose(),(o=this.pendingTransport)==null||o.dispose(),this.connectBase(a,++this.connectCounter)):h.logAction(this.logger,h.LOG_MAJOR,"ConnectionManager WebSocket give up timer","websocket connectivity appears to be unavailable but no other transports to try"))},this.options.timeouts.webSocketConnectTimeout)}cancelWebSocketGiveUpTimer(){this.webSocketGiveUpTimer&&(clearTimeout(this.webSocketGiveUpTimer),this.webSocketGiveUpTimer=null)}notifyState(a){var l,o;const u=a.state,f=u==="disconnected"&&(this.state===this.states.connected||a.retryImmediately||this.state===this.states.connecting&&a.error&&an.isTokenErr(a.error)&&!(this.errorReason&&an.isTokenErr(this.errorReason)));if(h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.notifyState()","new state: "+u+(f?"; will retry connection immediately":"")),u==this.state.state||(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.checkSuspendTimer(a.state),(u==="suspended"||u==="connected")&&(this.disconnectedRetryCount=0),this.state.terminal))return;const m=this.states[a.state];let p=m.retryDelay;m.state==="disconnected"&&(this.disconnectedRetryCount++,p=Ni(m.retryDelay,this.disconnectedRetryCount));const T=new Yi(this.state.state,m.state,p,a.error||((o=(l=re)[m.state])==null?void 0:o.call(l)));if(f){const S=()=>{this.state===this.states.disconnected&&(this.lastAutoReconnectAttempt=Date.now(),this.requestState({state:"connecting"}))},L=this.lastAutoReconnectAttempt&&Date.now()-this.lastAutoReconnectAttempt+1;L&&L<1e3?(h.logAction(this.logger,h.LOG_MICRO,"ConnectionManager.notifyState()","Last reconnect attempt was only "+L+"ms ago, waiting another "+(1e3-L)+"ms before trying again"),setTimeout(S,1e3-L)):w.Config.nextTick(S)}else(u==="disconnected"||u==="suspended")&&this.startRetryTimer(p);(u==="disconnected"&&!f||u==="suspended"||m.terminal)&&w.Config.nextTick(()=>{this.disconnectAllTransports()}),u=="connected"&&!this.activeProtocol&&h.logAction(this.logger,h.LOG_ERROR,"ConnectionManager.notifyState()","Broken invariant: attempted to go into connected state, but there is no active protocol"),this.enactStateChange(T),this.state.sendEvents?this.sendQueuedMessages():this.state.queueEvents||(this.realtime.channels.propogateConnectionInterruption(u,T.reason),this.failQueuedMessages(T.reason))}requestState(a){var l,o;const u=a.state;if(h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.requestState()","requested state: "+u+"; current state: "+this.state.state),u==this.state.state||(this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(u),u=="connecting"&&this.state.state=="connected")||u=="closing"&&this.state.state=="closed")return;const f=this.states[u],m=new Yi(this.state.state,f.state,null,a.error||((o=(l=re)[f.state])==null?void 0:o.call(l)));this.enactStateChange(m),u=="connecting"&&w.Config.nextTick(()=>{this.startConnect()}),u=="closing"&&this.closeImpl()}startConnect(){if(this.state!==this.states.connecting){h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.startConnect()","Must be in connecting state to connect, but was "+this.state.state);return}const a=this.realtime.auth,l=++this.connectCounter,o=()=>{this.checkConnectionStateFreshness(),this.getTransportParams(u=>{if(u.mode==="recover"&&u.options.recover){const f=Ba(u.options.recover);f&&this.realtime.channels.recoverChannels(f.channelSerials)}l===this.connectCounter&&this.connectImpl(u,l)})};if(h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.startConnect()","starting connection"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),a.method==="basic")o();else{const u=f=>{l===this.connectCounter&&(f?this.actOnErrorFromAuthorize(f):o())};this.errorReason&&an.isTokenErr(this.errorReason)?xt(a._forceNewToken(null,null),u):xt(a._ensureValidAuthCredentials(!1),u)}}connectImpl(a,l){const o=this.state.state;if(o!==this.states.connecting.state){h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.connectImpl()","Must be in connecting state to connect, but was "+o);return}const u=this.getTransportPreference();u&&u===this.baseTransport&&this.webSocketTransportAvailable&&this.checkWsConnectivity().then(()=>{this.unpersistTransportPreference(),this.state===this.states.connecting&&(h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.connectImpl():","web socket connectivity available, cancelling connection attempt with "+this.baseTransport),this.disconnectAllTransports(),this.connectWs(a,++this.connectCounter))}).catch(gi),u&&u===this.baseTransport||this.baseTransport&&!this.webSocketTransportAvailable?this.connectBase(a,l):this.connectWs(a,l)}connectWs(a,l){h.logAction(this.logger,h.LOG_MICRO,"ConnectionManager.connectWs()"),this.wsCheckResult=null,this.abandonedWebSocket=!1,this.startWebSocketSlowTimer(),this.startWebSocketGiveUpTimer(a),this.tryTransportWithFallbacks("web_socket",a,!0,l,()=>this.wsCheckResult!==!1&&!this.abandonedWebSocket)}connectBase(a,l){h.logAction(this.logger,h.LOG_MICRO,"ConnectionManager.connectBase()"),this.baseTransport?this.tryTransportWithFallbacks(this.baseTransport,a,!1,l,()=>!0):this.notifyState({state:"disconnected",error:new M("No transports left to try",8e4,404)})}tryTransportWithFallbacks(a,l,o,u,f){h.logAction(this.logger,h.LOG_MICRO,"ConnectionManager.tryTransportWithFallbacks()",a);const m=k=>{this.notifyState({state:this.states.connecting.failState,error:k})},p=this.domains.slice(),T=(k,H)=>{if(u===this.connectCounter){if(!f()){H&&H.dispose();return}!H&&!k&&L()}},S=p.shift();if(!S){m(new M("Unable to connect (no available host)",80003,404));return}l.host=S;const L=()=>{if(!p.length){m(new M("Unable to connect (and no more fallback hosts to try)",80003,404));return}if(!this.realtime.http.checkConnectivity){m(new Rt("Internal error: Http.checkConnectivity not set",null,500));return}xt(this.realtime.http.checkConnectivity(),(k,H)=>{if(u===this.connectCounter&&f()){if(k){m(k);return}if(!H){m(new M("Unable to connect (network unreachable)",80003,404));return}l.host=qe(p),this.tryATransport(l,a,T)}})};if(this.forceFallbackHost&&p.length){this.forceFallbackHost=!1,L();return}this.tryATransport(l,a,T)}closeImpl(){h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.closeImpl()","closing connection"),this.cancelSuspendTimer(),this.startTransitionTimer(this.states.closing),this.pendingTransport&&(h.logAction(this.logger,h.LOG_MICRO,"ConnectionManager.closeImpl()","Closing pending transport: "+this.pendingTransport),this.pendingTransport.close()),this.activeProtocol&&(h.logAction(this.logger,h.LOG_MICRO,"ConnectionManager.closeImpl()","Closing active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().close()),this.notifyState({state:"closed"})}onAuthUpdated(a,l){var o;switch(this.state.state){case"connected":{h.logAction(this.logger,h.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Sending AUTH message on active transport");const u=(o=this.activeProtocol)==null?void 0:o.getTransport();u&&u.onAuthUpdated&&u.onAuthUpdated(a);const f=Me({action:Z.AUTH,auth:{accessToken:a.token}});this.send(f);const m=()=>{this.off(p),l(null,a)},p=T=>{T.current==="failed"&&(this.off(m),this.off(p),l(T.reason||this.getStateError()))};this.once("connectiondetails",m),this.on("connectionstate",p);break}case"connecting":h.logAction(this.logger,h.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Aborting current connection attempts in order to start again with the new auth details"),this.disconnectAllTransports();default:{h.logAction(this.logger,h.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Connection state is "+this.state.state+"; waiting until either connected or failed");const u=f=>{switch(f.current){case"connected":this.off(u),l(null,a);break;case"failed":case"closed":case"suspended":this.off(u),l(f.reason||this.getStateError());break}};this.on("connectionstate",u),this.state.state==="connecting"?this.startConnect():this.requestState({state:"connecting"})}}}disconnectAllTransports(){h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.disconnectAllTransports()","Disconnecting all transports"),this.connectCounter++,this.pendingTransport&&(h.logAction(this.logger,h.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting pending transport: "+this.pendingTransport),this.pendingTransport.disconnect()),delete this.pendingTransport,this.proposedTransport&&(h.logAction(this.logger,h.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting proposed transport: "+this.pendingTransport),this.proposedTransport.disconnect()),delete this.pendingTransport,this.activeProtocol&&(h.logAction(this.logger,h.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().disconnect())}send(a,l,o){o=o||gi;const u=this.state;if(u.sendEvents){h.logAction(this.logger,h.LOG_MICRO,"ConnectionManager.send()","sending event"),this.sendImpl(new go(a,o));return}if(!(l&&u.queueEvents)){const m="rejecting event, queueEvent was "+l+", state was "+u.state;h.logAction(this.logger,h.LOG_MICRO,"ConnectionManager.send()",m),o(this.errorReason||new M(m,9e4,400));return}this.logger.shouldLog(h.LOG_MICRO)&&h.logAction(this.logger,h.LOG_MICRO,"ConnectionManager.send()","queueing msg; "+xa(a,this.realtime._RealtimePresence,this.realtime._Annotations,this.realtime._objectsPlugin)),this.queue(a,o)}sendImpl(a){const l=a.message;a.ackRequired&&!a.sendAttempted&&(l.msgSerial=this.msgSerial++);try{this.activeProtocol.send(a)}catch(o){h.logAction(this.logger,h.LOG_ERROR,"ConnectionManager.sendImpl()","Unexpected exception in transport.send(): "+o.stack)}}queue(a,l){h.logAction(this.logger,h.LOG_MICRO,"ConnectionManager.queue()","queueing event");const o=this.queuedMessages.last(),u=this.options.maxMessageSize;o&&!o.sendAttempted&&xe(o.message,a,u)?(o.merged||(o.callback=kn.create(this.logger,[o.callback]),o.merged=!0),o.callback.push(l)):this.queuedMessages.push(new go(a,l))}sendQueuedMessages(){h.logAction(this.logger,h.LOG_MICRO,"ConnectionManager.sendQueuedMessages()","sending "+this.queuedMessages.count()+" queued messages");let a;for(;a=this.queuedMessages.shift();)this.sendImpl(a)}queuePendingMessages(a){a&&a.length&&(h.logAction(this.logger,h.LOG_MICRO,"ConnectionManager.queuePendingMessages()","queueing "+a.length+" pending messages"),this.queuedMessages.prepend(a))}failQueuedMessages(a){const l=this.queuedMessages.count();l>0&&(h.logAction(this.logger,h.LOG_ERROR,"ConnectionManager.failQueuedMessages()","failing "+l+" queued messages, err = "+_t(a)),this.queuedMessages.completeAllMessages(a))}onChannelMessage(a,l){this.pendingChannelMessagesState.queue.push({message:a,transport:l}),this.pendingChannelMessagesState.isProcessing||this.processNextPendingChannelMessage()}processNextPendingChannelMessage(){if(this.pendingChannelMessagesState.queue.length>0){this.pendingChannelMessagesState.isProcessing=!0;const a=this.pendingChannelMessagesState.queue.shift();this.processChannelMessage(a.message).catch(l=>{h.logAction(this.logger,h.LOG_ERROR,"ConnectionManager.processNextPendingChannelMessage() received error ",l)}).finally(()=>{this.pendingChannelMessagesState.isProcessing=!1,this.processNextPendingChannelMessage()})}}async processChannelMessage(a){await this.realtime.channels.processChannelMessage(a)}async ping(){var a;if(this.state.state!=="connected")throw new M("Unable to ping service; not connected",4e4,400);const l=(a=this.activeProtocol)==null?void 0:a.getTransport();if(!l)throw this.getStateError();h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.ping()","transport = "+l);const o=Date.now(),u=ss();return Li(new Promise(f=>{const m=p=>{p===u&&(l.off("heartbeat",m),f(Date.now()-o))};l.on("heartbeat",m),l.ping(u)}),this.options.timeouts.realtimeRequestTimeout,"Timeout waiting for heartbeat response")}abort(a){this.activeProtocol.getTransport().fail(a)}getTransportPreference(){var a,l;return this.transportPreference||Es()&&((l=(a=w.WebStorage)==null?void 0:a.get)==null?void 0:l.call(a,Ml))}persistTransportPreference(a){var l,o;this.transportPreference=a.shortName,Es()&&((o=(l=w.WebStorage)==null?void 0:l.set)==null||o.call(l,Ml,a.shortName))}unpersistTransportPreference(){var a,l;this.transportPreference=null,Es()&&((l=(a=w.WebStorage)==null?void 0:a.remove)==null||l.call(a,Ml))}actOnErrorFromAuthorize(a){if(a.code===40171)this.notifyState({state:"failed",error:a});else if(a.code===40102)this.notifyState({state:"failed",error:a});else if(a.statusCode===ai.Forbidden){const l="Client configured authentication provider returned 403; failing the connection";h.logAction(this.logger,h.LOG_ERROR,"ConnectionManager.actOnErrorFromAuthorize()",l),this.notifyState({state:"failed",error:new M(l,80019,403,a)})}else{const l="Client configured authentication provider request failed";h.logAction(this.logger,h.LOG_MINOR,"ConnectionManager.actOnErrorFromAuthorize",l),this.notifyState({state:this.state.failState,error:new M(l,80019,401,a)})}}onConnectionDetailsUpdate(a,l){if(!a)return;this.connectionDetails=a,a.maxMessageSize&&(this.options.maxMessageSize=a.maxMessageSize);const o=a.clientId;if(o){const f=this.realtime.auth._uncheckedSetClientId(o);if(f){h.logAction(this.logger,h.LOG_ERROR,"ConnectionManager.onConnectionDetailsUpdate()",f.message),l.fail(f);return}}const u=a.connectionStateTtl;u&&(this.connectionStateTtl=u),this.maxIdleInterval=a.maxIdleInterval,this.emit("connectiondetails",a)}checkWsConnectivity(){const a=this.options.wsConnectivityCheckUrl||at.wsConnectivityCheckUrl,l=new w.Config.WebSocket(a);return new Promise((o,u)=>{let f=!1;l.onopen=()=>{f||(f=!0,o(),l.close())},l.onclose=l.onerror=()=>{f||(f=!0,u())}})}sessionRecoveryName(){return this.options.recoveryKeyStorageName||"ably-connection-recovery"}getSessionRecoverData(){var a,l;return Vn()&&((l=(a=w.WebStorage)==null?void 0:a.getSession)==null?void 0:l.call(a,this.sessionRecoveryName()))}setSessionRecoverData(a){var l,o;return Vn()&&((o=(l=w.WebStorage)==null?void 0:l.setSession)==null?void 0:o.call(l,this.sessionRecoveryName(),a))}clearSessionRecoverData(){var a,l;return Vn()&&((l=(a=w.WebStorage)==null?void 0:a.removeSession)==null?void 0:l.call(a,this.sessionRecoveryName()))}},qa=vo,mi=class extends ee{constructor(i,a){super(i.logger),this.whenState=l=>ee.prototype.whenState.call(this,l,this.state),this.ably=i,this.connectionManager=new qa(i,a),this.state=this.connectionManager.state.state,this.key=void 0,this.id=void 0,this.errorReason=null,this.connectionManager.on("connectionstate",l=>{const o=this.state=l.current;w.Config.nextTick(()=>{this.emit(o,l)})}),this.connectionManager.on("update",l=>{w.Config.nextTick(()=>{this.emit("update",l)})})}connect(){h.logAction(this.logger,h.LOG_MINOR,"Connection.connect()",""),this.connectionManager.requestState({state:"connecting"})}async ping(){return h.logAction(this.logger,h.LOG_MINOR,"Connection.ping()",""),this.connectionManager.ping()}close(){h.logAction(this.logger,h.LOG_MINOR,"Connection.close()","connectionKey = "+this.key),this.connectionManager.requestState({state:"closing"})}get recoveryKey(){return this.logger.deprecationWarning("The `Connection.recoveryKey` attribute has been replaced by the `Connection.createRecoveryKey()` method. Replace your usage of `recoveryKey` with the return value of `createRecoveryKey()`. `recoveryKey` will be removed in a future version."),this.createRecoveryKey()}createRecoveryKey(){return this.connectionManager.createRecoveryKey()}},wl=mi,Cs=class Kd extends ms{constructor(a){var l,o,u,f;if(super(at.objectifyOptions(a,!1,"BaseRealtime",h.defaultLogger)),h.logAction(this.logger,h.LOG_MINOR,"Realtime()",""),typeof EdgeRuntime=="string")throw new M(`Ably.Realtime instance cannot be used in Vercel Edge runtime. If you are running Vercel Edge functions, please replace your "new Ably.Realtime()" with "new Ably.Rest()" and use Ably Rest API instead of the Realtime API. If you are server-rendering your application in the Vercel Edge runtime, please use the condition "if (typeof EdgeRuntime === 'string')" to prevent instantiating Ably.Realtime instance during SSR in the Vercel Edge runtime.`,4e4,400);this._additionalTransportImplementations=Kd.transportImplementationsFromPlugins(this.options.plugins),this._RealtimePresence=(o=(l=this.options.plugins)==null?void 0:l.RealtimePresence)!=null?o:null,this._objectsPlugin=(f=(u=this.options.plugins)==null?void 0:u.Objects)!=null?f:null,this.connection=new wl(this,this.options),this._channels=new Ki(this),this.options.autoConnect!==!1&&this.connect()}static transportImplementationsFromPlugins(a){const l={};return a?.WebSocketTransport&&(l[me.WebSocket]=a.WebSocketTransport),a?.XHRPolling&&(l[me.XhrPolling]=a.XHRPolling),l}get channels(){return this._channels}connect(){h.logAction(this.logger,h.LOG_MINOR,"Realtime.connect()",""),this.connection.connect()}close(){h.logAction(this.logger,h.LOG_MINOR,"Realtime.close()",""),this.connection.close()}};Cs.EventEmitter=ee;var Xi=Cs,Ki=class extends ee{constructor(i){super(i.logger),this.realtime=i,this.all=Object.create(null),i.connection.connectionManager.on("transport.active",()=>{this.onTransportActive()})}channelSerials(){let i={};for(const a of ei(this.all,!0)){const l=this.all[a];l.properties.channelSerial&&(i[a]=l.properties.channelSerial)}return i}recoverChannels(i){for(const a of ei(i,!0)){const l=this.get(a);l.properties.channelSerial=i[a]}}async processChannelMessage(i){const a=i.channel;if(a===void 0){h.logAction(this.logger,h.LOG_ERROR,"Channels.processChannelMessage()","received event unspecified channel, action = "+i.action);return}const l=this.all[a];if(!l){h.logAction(this.logger,h.LOG_ERROR,"Channels.processChannelMessage()","received event for non-existent channel: "+a);return}await l.processMessage(i)}onTransportActive(){for(const i in this.all){const a=this.all[i];a.state==="attaching"||a.state==="detaching"?a.checkPendingState():a.state==="suspended"?a._attach(!1,null):a.state==="attached"&&a.requestState("attaching")}}propogateConnectionInterruption(i,a){const l={closing:"detached",closed:"detached",failed:"failed",suspended:"suspended"},o=["attaching","attached","detaching","suspended"],u=l[i];for(const f in this.all){const m=this.all[f];o.includes(m.state)&&m.notifyState(u,a)}}get(i,a){i=String(i);let l=this.all[i];if(!l)l=this.all[i]=new di(this.realtime,i,a);else if(a){if(l._shouldReattachToSetOptions(a,l.channelOptions))throw new M("Channels.get() cannot be used to set channel options that would cause the channel to reattach. Please, use RealtimeChannel.setOptions() instead.",4e4,400);l.setOptions(a)}return l}getDerived(i,a,l){if(a.filter){const o=ls(a.filter),u=Di(i);i=`[filter=${o}${u.qualifierParam}]${u.channelName}`}return this.get(i,l)}release(i){i=String(i);const a=this.all[i];if(!a)return;const l=a.getReleaseErr();if(l)throw l;delete this.all[i]}},Ms=Xi;function ws(i,a){if(i.isSynthesized()||a.isSynthesized())return i.timestamp>=a.timestamp;const l=i.parseId(),o=a.parseId();return l.msgSerial===o.msgSerial?l.index>o.index:l.msgSerial>o.msgSerial}var we=class extends ee{constructor(i,a,l=ws){super(i.logger),this.presence=i,this.map=Object.create(null),this.syncInProgress=!1,this.residualMembers=null,this.memberKey=a,this.newerThan=l}get(i){return this.map[i]}getClient(i){const a=this.map,l=[];for(const o in a){const u=a[o];u.clientId==i&&u.action!="absent"&&l.push(u)}return l}list(i){const a=this.map,l=i&&i.clientId,o=i&&i.connectionId,u=[];for(const f in a){const m=a[f];m.action!=="absent"&&(l&&l!=m.clientId||o&&o!=m.connectionId||u.push(m))}return u}put(i){(i.action==="enter"||i.action==="update")&&(i=ln.fromValues(i),i.action="present");const a=this.map,l=this.memberKey(i);this.residualMembers&&delete this.residualMembers[l];const o=a[l];return o&&!this.newerThan(i,o)?!1:(a[l]=i,!0)}values(){const i=this.map,a=[];for(const l in i){const o=i[l];o.action!="absent"&&a.push(o)}return a}remove(i){const a=this.map,l=this.memberKey(i),o=a[l];return o&&!this.newerThan(i,o)?!1:(this.syncInProgress?(i=ln.fromValues(i),i.action="absent",a[l]=i):delete a[l],!!o)}startSync(){const i=this.map,a=this.syncInProgress;h.logAction(this.logger,h.LOG_MINOR,"PresenceMap.startSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+a),this.syncInProgress||(this.residualMembers=F(i),this.setInProgress(!0))}endSync(){const i=this.map,a=this.syncInProgress;if(h.logAction(this.logger,h.LOG_MINOR,"PresenceMap.endSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+a),a){for(const l in i)i[l].action==="absent"&&delete i[l];this.presence._synthesizeLeaves(ns(this.residualMembers));for(const l in this.residualMembers)delete i[l];this.residualMembers=null,this.setInProgress(!1)}this.emit("sync")}waitSync(i){const a=this.syncInProgress;if(h.logAction(this.logger,h.LOG_MINOR,"PresenceMap.waitSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+a),!a){i();return}this.once("sync",i)}clear(){this.map={},this.setInProgress(!1),this.residualMembers=null}setInProgress(i){h.logAction(this.logger,h.LOG_MICRO,"PresenceMap.setInProgress()","inProgress = "+i),this.syncInProgress=i,this.presence.syncComplete=!i}};function Ye(i){return i.channel.client.auth.clientId}function An(i){const a=i.channel.client,l=a.auth.clientId;return(!l||l==="*")&&a.connection.state==="connected"}function On(i,a,l){switch(i.state){case"attached":case"suspended":l();break;case"initialized":case"detached":case"detaching":case"attaching":xt(i.attach(),function(o){o?a(o):l()});break;default:a(M.fromValues(i.invalidStateError()))}}var Tn=class extends ee{constructor(i){super(i.logger),this.channel=i,this.syncComplete=!1,this.members=new we(this,a=>a.clientId+":"+a.connectionId),this._myMembers=new we(this,a=>a.clientId),this.subscriptions=new ee(this.logger),this.pendingPresence=[]}async enter(i){if(An(this))throw new M("clientId must be specified to enter a presence channel",40012,400);return this._enterOrUpdateClient(void 0,void 0,i,"enter")}async update(i){if(An(this))throw new M("clientId must be specified to update presence data",40012,400);return this._enterOrUpdateClient(void 0,void 0,i,"update")}async enterClient(i,a){return this._enterOrUpdateClient(void 0,i,a,"enter")}async updateClient(i,a){return this._enterOrUpdateClient(void 0,i,a,"update")}async _enterOrUpdateClient(i,a,l,o){const u=this.channel;if(!u.connectionManager.activeState())throw u.connectionManager.getError();h.logAction(this.logger,h.LOG_MICRO,"RealtimePresence."+o+"Client()","channel = "+u.name+", id = "+i+", client = "+(a||"(implicit) "+Ye(this)));const f=ln.fromData(l);f.action=o,i&&(f.id=i),a&&(f.clientId=a);const m=await f.encode(u.channelOptions);switch(u.state){case"attached":return u.sendPresence([m]);case"initialized":case"detached":u.attach();case"attaching":return new Promise((p,T)=>{this.pendingPresence.push({presence:m,callback:S=>S?T(S):p()})});default:{const p=new Rt("Unable to "+o+" presence channel while in "+u.state+" state",90001);throw p.code=90001,p}}}async leave(i){if(An(this))throw new M("clientId must have been specified to enter or leave a presence channel",40012,400);return this.leaveClient(void 0,i)}async leaveClient(i,a){const l=this.channel;if(!l.connectionManager.activeState())throw l.connectionManager.getError();h.logAction(this.logger,h.LOG_MICRO,"RealtimePresence.leaveClient()","leaving; channel = "+this.channel.name+", client = "+i);const o=ln.fromData(a);o.action="leave",i&&(o.clientId=i);const u=await o.encode(l.channelOptions);switch(l.state){case"attached":return l.sendPresence([u]);case"attaching":return new Promise((f,m)=>{this.pendingPresence.push({presence:u,callback:p=>p?m(p):f()})});case"initialized":case"failed":throw new Rt("Unable to leave presence channel (incompatible state)",90001);default:throw l.invalidStateError()}}async get(i){const a=!i||("waitForSync"in i?i.waitForSync:!0);return new Promise((l,o)=>{function u(f){l(i?f.list(i):f.values())}if(this.channel.state==="suspended"){a?o(M.fromValues({statusCode:400,code:91005,message:"Presence state is out of sync due to channel being in the SUSPENDED state"})):u(this.members);return}On(this.channel,f=>o(f),()=>{const f=this.members;a?f.waitSync(function(){u(f)}):u(f)})})}async history(i){h.logAction(this.logger,h.LOG_MICRO,"RealtimePresence.history()","channel = "+this.name);const a=this.channel.client.rest.presenceMixin;if(i&&i.untilAttach)if(this.channel.state==="attached")delete i.untilAttach,i.from_serial=this.channel.properties.attachSerial;else throw new M("option untilAttach requires the channel to be attached, was: "+this.channel.state,4e4,400);return a.history(this,i)}setPresence(i,a,l){h.logAction(this.logger,h.LOG_MICRO,"RealtimePresence.setPresence()","received presence for "+i.length+" participants; syncChannelSerial = "+l);let o,u;const f=this.members,m=this._myMembers,p=[],T=this.channel.connectionManager.connectionId;a&&(this.members.startSync(),l&&(u=l.match(/^[\w-]+:(.*)$/))&&(o=u[1]));for(let S of i)switch(S.action){case"leave":f.remove(S)&&p.push(S),S.connectionId===T&&!S.isSynthesized()&&m.remove(S);break;case"enter":case"present":case"update":f.put(S)&&p.push(S),S.connectionId===T&&m.put(S);break}a&&!o&&(f.endSync(),this.channel.syncChannelSerial=null);for(let S=0;S<p.length;S++){const L=p[S];this.subscriptions.emit(L.action,L)}}onAttached(i){h.logAction(this.logger,h.LOG_MINOR,"RealtimePresence.onAttached()","channel = "+this.channel.name+", hasPresence = "+i),i?this.members.startSync():(this._synthesizeLeaves(this.members.values()),this.members.clear()),this._ensureMyMembersPresent();const a=this.pendingPresence,l=a.length;if(l){this.pendingPresence=[];const o=[],u=kn.create(this.logger);h.logAction(this.logger,h.LOG_MICRO,"RealtimePresence.onAttached","sending "+l+" queued presence messages");for(let f=0;f<l;f++){const m=a[f];o.push(m.presence),u.push(m.callback)}this.channel.sendPresence(o).then(()=>u()).catch(f=>u(f))}}actOnChannelState(i,a,l){switch(i){case"attached":this.onAttached(a);break;case"detached":case"failed":this._clearMyMembers(),this.members.clear();case"suspended":this.failPendingPresence(l);break}}failPendingPresence(i){if(this.pendingPresence.length){h.logAction(this.logger,h.LOG_MINOR,"RealtimeChannel.failPendingPresence","channel; name = "+this.channel.name+", err = "+_t(i));for(let a=0;a<this.pendingPresence.length;a++)try{this.pendingPresence[a].callback(i)}catch{}this.pendingPresence=[]}}_clearMyMembers(){this._myMembers.clear()}_ensureMyMembersPresent(){const i=this._myMembers,a=this.channel.connectionManager.connectionId;for(const l in i.map){const o=i.map[l];h.logAction(this.logger,h.LOG_MICRO,"RealtimePresence._ensureMyMembersPresent()",'Auto-reentering clientId "'+o.clientId+'" into the presence set');const u=o.connectionId===a?o.id:void 0;this._enterOrUpdateClient(u,o.clientId,o.data,"enter").catch(f=>{const m=new M("Presence auto re-enter failed",91004,400,f);h.logAction(this.logger,h.LOG_ERROR,"RealtimePresence._ensureMyMembersPresent()","Presence auto re-enter failed; reason = "+_t(f));const p=new ui(this.channel.state,this.channel.state,!0,!1,m);this.channel.emit("update",p)})}}_synthesizeLeaves(i){const a=this.subscriptions;i.forEach(function(l){const o=ln.fromValues({action:"leave",connectionId:l.connectionId,clientId:l.clientId,data:l.data,encoding:l.encoding,timestamp:Date.now()});a.emit("leave",o)})}async subscribe(...i){const a=di.processListenerArgs(i),l=a[0],o=a[1],u=this.channel;if(u.state==="failed")throw M.fromValues(u.invalidStateError());this.subscriptions.on(l,o),u.channelOptions.attachOnSubscribe!==!1&&await u.attach()}unsubscribe(...i){const a=di.processListenerArgs(i),l=a[0],o=a[1];this.subscriptions.off(l,o)}},pi=Tn,bo=me.WebSocket;function Ul(i){return!!i.on}var Nl=class extends bn{constructor(i,a,l){super(i,a,l),this.shortName=bo,l.heartbeats=w.Config.useProtocolHeartbeats,this.wsHost=l.host}static isAvailable(){return!!w.Config.WebSocket}createWebSocket(i,a){return this.uri=i+Oa(a),new w.Config.WebSocket(this.uri)}toString(){return"WebSocketTransport; uri="+this.uri}connect(){h.logAction(this.logger,h.LOG_MINOR,"WebSocketTransport.connect()","starting"),bn.prototype.connect.call(this);const i=this,a=this.params,l=a.options,u=(l.tls?"wss://":"ws://")+this.wsHost+":"+at.getPort(l)+"/";h.logAction(this.logger,h.LOG_MINOR,"WebSocketTransport.connect()","uri: "+u),xt(this.auth.getAuthParams(),function(f,m){if(i.isDisposed)return;let p="";for(const S in m)p+=" "+S+": "+m[S]+";";if(h.logAction(i.logger,h.LOG_MINOR,"WebSocketTransport.connect()","authParams:"+p+" err: "+f),f){i.disconnect(f);return}const T=a.getConnectParams(m);try{const S=i.wsConnection=i.createWebSocket(u,T);S.binaryType=w.Config.binaryType,S.onopen=function(){i.onWsOpen()},S.onclose=function(L){i.onWsClose(L)},S.onmessage=function(L){i.onWsData(L.data)},S.onerror=function(L){i.onWsError(L)},Ul(S)&&S.on("ping",function(){i.onActivity()})}catch(S){h.logAction(i.logger,h.LOG_ERROR,"WebSocketTransport.connect()","Unexpected exception creating websocket: err = "+(S.stack||S.message)),i.disconnect(S)}})}send(i){const a=this.wsConnection;if(!a){h.logAction(this.logger,h.LOG_ERROR,"WebSocketTransport.send()","No socket connection");return}try{a.send(ke(i,this.connectionManager.realtime._MsgPack,this.params.format))}catch(l){const o="Exception from ws connection when trying to send: "+_t(l);h.logAction(this.logger,h.LOG_ERROR,"WebSocketTransport.send()",o),this.finish("disconnected",new M(o,5e4,500))}}onWsData(i){h.logAction(this.logger,h.LOG_MICRO,"WebSocketTransport.onWsData()","data received; length = "+i.length+"; type = "+typeof i);try{this.onProtocolMessage(oo(i,this.connectionManager.realtime._MsgPack,this.connectionManager.realtime._RealtimePresence,this.connectionManager.realtime._Annotations,this.connectionManager.realtime._objectsPlugin,this.format))}catch(a){h.logAction(this.logger,h.LOG_ERROR,"WebSocketTransport.onWsData()","Unexpected exception handing channel message: "+a.stack)}}onWsOpen(){h.logAction(this.logger,h.LOG_MINOR,"WebSocketTransport.onWsOpen()","opened WebSocket"),this.emit("preconnect")}onWsClose(i){let a,l;if(typeof i=="object"?(l=i.code,a=i.wasClean||l===1e3):(l=i,a=l==1e3),delete this.wsConnection,a){h.logAction(this.logger,h.LOG_MINOR,"WebSocketTransport.onWsClose()","Cleanly closed WebSocket");const o=new M("Websocket closed",80003,400);this.finish("disconnected",o)}else{const o="Unclean disconnection of WebSocket ; code = "+l,u=new M(o,80003,400);h.logAction(this.logger,h.LOG_MINOR,"WebSocketTransport.onWsClose()",o),this.finish("disconnected",u)}this.emit("disposed")}onWsError(i){h.logAction(this.logger,h.LOG_MINOR,"WebSocketTransport.onError()","Error from WebSocket: "+i.message),w.Config.nextTick(()=>{this.disconnect(Error(i.message))})}dispose(){h.logAction(this.logger,h.LOG_MINOR,"WebSocketTransport.dispose()",""),this.isDisposed=!0;const i=this.wsConnection;i&&(i.onmessage=function(){},delete this.wsConnection,w.Config.nextTick(()=>{if(h.logAction(this.logger,h.LOG_MICRO,"WebSocketTransport.dispose()","closing websocket"),!i)throw new Error("WebSocketTransport.dispose(): wsConnection is not defined");i.close()}))}},pe=Nl,Qt=class{static subscribeFilter(i,a,l){const o=u=>{var f,m,p,T,S,L;const k={name:u.name,refTimeserial:(m=(f=u.extras)==null?void 0:f.ref)==null?void 0:m.timeserial,refType:(T=(p=u.extras)==null?void 0:p.ref)==null?void 0:T.type,isRef:!!((L=(S=u.extras)==null?void 0:S.ref)!=null&&L.timeserial),clientId:u.clientId};Object.entries(a).find(([H,x])=>x!==void 0?k[H]!==x:!1)||l(u)};this.addFilteredSubscription(i,a,l,o),i.subscriptions.on(o)}static addFilteredSubscription(i,a,l,o){var u;if(i.filteredSubscriptions||(i.filteredSubscriptions=new Map),i.filteredSubscriptions.has(l)){const f=i.filteredSubscriptions.get(l);f.set(a,((u=f?.get(a))==null?void 0:u.concat(o))||[o])}else i.filteredSubscriptions.set(l,new Map([[a,[o]]]))}static getAndDeleteFilteredSubscriptions(i,a,l){if(!i.filteredSubscriptions)return[];if(!l&&a)return Array.from(i.filteredSubscriptions.entries()).map(([f,m])=>{var p;let T=m.get(a);return m.delete(a),m.size===0&&((p=i.filteredSubscriptions)==null||p.delete(f)),T}).reduce((f,m)=>m?f.concat(...m):f,[]);if(!l||!i.filteredSubscriptions.has(l))return[];const o=i.filteredSubscriptions.get(l);if(!a){const f=Array.from(o.values()).reduce((m,p)=>m.concat(...p),[]);return i.filteredSubscriptions.delete(l),f}let u=o.get(a);return o.delete(a),u||[]}},ut=class df extends Ms{constructor(a){var l;const o=df._MsgPack;if(!o)throw new Error("Expected DefaultRealtime._MsgPack to have been set");super(at.objectifyOptions(a,!0,"Realtime",h.defaultLogger,kt(ht({},Sl),{Crypto:(l=df.Crypto)!=null?l:void 0,MsgPack:o,RealtimePresence:{RealtimePresence:pi,PresenceMessage:ln,WirePresenceMessage:La},Annotations:{Annotation:Vi,WireAnnotation:ci,RealtimeAnnotations:Hn,RestAnnotations:Tl},WebSocketTransport:pe,MessageInteractions:Qt})))}static get Crypto(){if(this._Crypto===null)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(a){this._Crypto=a}};ut.Utils=Wt,ut.ConnectionManager=qa,ut.ProtocolMessage=Ii,ut._Crypto=null,ut.Message=Hi,ut.PresenceMessage=ji,ut.Annotation=Ol,ut._MsgPack=null,ut._Http=fs,ut._PresenceMap=we,ut._MessageEncoding=qn;var Rn=ut,Pe=Uint8Array,yi=Uint32Array,_n=Math.pow,Dl=new yi(8),Ll=[],En=new yi(64);function Zi(i){return(i-(i|0))*_n(2,32)|0}for(var Ji=2,Cn=0;Cn<64;){for(Ga=!0,rn=2;rn<=Ji/2;rn++)Ji%rn===0&&(Ga=!1);Ga&&(Cn<8&&(Dl[Cn]=Zi(_n(Ji,1/2))),Ll[Cn]=Zi(_n(Ji,1/3)),Cn++),Ji++}var Ga,rn,Mn=!!new Pe(new yi([1]).buffer)[0];function on(i){return Mn?i>>>24|(i>>>16&255)<<8|(i&65280)<<8|i<<24:i}function oe(i,a){return i>>>a|i<<32-a}function Wi(i){var a=Dl.slice(),l=i.length,o=l*8,u=512-(o+64)%512-1+o+65,f=new Pe(u/8),m=new yi(f.buffer);f.set(i,0),f[l]=128,m[m.length-1]=on(o);for(var p,T=0;T<u/32;T+=16){var S=a.slice();for(p=0;p<64;p++){var L;if(p<16)L=on(m[T+p]);else{var k=En[p-15],H=En[p-2];L=En[p-7]+En[p-16]+(oe(k,7)^oe(k,18)^k>>>3)+(oe(H,17)^oe(H,19)^H>>>10)}En[p]=L|=0;for(var x=(oe(S[4],6)^oe(S[4],11)^oe(S[4],25))+(S[4]&S[5]^~S[4]&S[6])+S[7]+L+Ll[p],Y=(oe(S[0],2)^oe(S[0],13)^oe(S[0],22))+(S[0]&S[1]^S[2]&(S[0]^S[1])),P=7;P>0;P--)S[P]=S[P-1];S[0]=x+Y|0,S[4]=S[4]+x|0}for(p=0;p<8;p++)a[p]=a[p]+S[p]|0}return new Pe(new yi(a.map(function(tt){return on(tt)})).buffer)}function kl(i,a){if(i.length>64&&(i=Wi(i)),i.length<64){const p=new Uint8Array(64);p.set(i,0),i=p}for(var l=new Uint8Array(64),o=new Uint8Array(64),u=0;u<64;u++)l[u]=54^i[u],o[u]=92^i[u];var f=new Uint8Array(a.length+64);f.set(l,0),f.set(a,64);var m=new Uint8Array(96);return m.set(o,0),m.set(Wi(f),64),Wi(m)}var za=class{constructor(){this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.hexCharSet="0123456789abcdef"}uint8ViewToBase64(i){let a="";const l=this.base64CharSet,o=i.byteLength,u=o%3,f=o-u;let m,p,T,S,L;for(let k=0;k<f;k=k+3)L=i[k]<<16|i[k+1]<<8|i[k+2],m=(L&16515072)>>18,p=(L&258048)>>12,T=(L&4032)>>6,S=L&63,a+=l[m]+l[p]+l[T]+l[S];return u==1?(L=i[f],m=(L&252)>>2,p=(L&3)<<4,a+=l[m]+l[p]+"=="):u==2&&(L=i[f]<<8|i[f+1],m=(L&64512)>>10,p=(L&1008)>>4,T=(L&15)<<2,a+=l[m]+l[p]+l[T]+"="),a}base64ToArrayBuffer(i){const a=atob?.(i),l=a.length,o=new Uint8Array(l);for(let u=0;u<l;u++){const f=a.charCodeAt(u);o[u]=f}return this.toArrayBuffer(o)}isBuffer(i){return i instanceof ArrayBuffer||ArrayBuffer.isView(i)}toBuffer(i){if(!ArrayBuffer)throw new Error("Can't convert to Buffer: browser does not support the necessary types");if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(this.toArrayBuffer(i));throw new Error("BufferUtils.toBuffer expected an ArrayBuffer or a view onto one")}toArrayBuffer(i){if(!ArrayBuffer)throw new Error("Can't convert to ArrayBuffer: browser does not support the necessary types");if(i instanceof ArrayBuffer)return i;if(ArrayBuffer.isView(i))return i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength);throw new Error("BufferUtils.toArrayBuffer expected an ArrayBuffer or a view onto one")}base64Encode(i){return this.uint8ViewToBase64(this.toBuffer(i))}base64UrlEncode(i){return this.base64Encode(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}base64Decode(i){if(ArrayBuffer&&w.Config.atob)return this.base64ToArrayBuffer(i);throw new Error("Expected ArrayBuffer to exist and Platform.Config.atob to be configured")}hexEncode(i){return this.toBuffer(i).reduce((l,o)=>l+o.toString(16).padStart(2,"0"),"")}hexDecode(i){if(i.length%2!==0)throw new Error("Can't create a byte array from a hex string of odd length");const a=new Uint8Array(i.length/2);for(let l=0;l<a.length;l++)a[l]=parseInt(i.slice(2*l,2*(l+1)),16);return this.toArrayBuffer(a)}utf8Encode(i){if(w.Config.TextEncoder){const a=new w.Config.TextEncoder().encode(i);return this.toArrayBuffer(a)}else throw new Error("Expected TextEncoder to be configured")}utf8Decode(i){if(!this.isBuffer(i))throw new Error("Expected input of utf8decode to be an arraybuffer or typed array");if(TextDecoder)return new TextDecoder().decode(i);throw new Error("Expected TextDecoder to be configured")}areBuffersEqual(i,a){if(!i||!a)return!1;const l=this.toArrayBuffer(i),o=this.toArrayBuffer(a);if(l.byteLength!=o.byteLength)return!1;const u=new Uint8Array(l),f=new Uint8Array(o);for(var m=0;m<u.length;m++)if(u[m]!=f[m])return!1;return!0}byteLength(i){return i instanceof ArrayBuffer||ArrayBuffer.isView(i)?i.byteLength:-1}arrayBufferViewToBuffer(i){return this.toArrayBuffer(i)}concat(i){const a=i.reduce((u,f)=>u+f.byteLength,0),l=new Uint8Array(a);let o=0;for(const u of i){const f=this.toBuffer(u);l.set(f,o),o+=f.byteLength}return l.buffer}sha256(i){const a=Wi(this.toBuffer(i));return this.toArrayBuffer(a)}hmacSha256(i,a){const l=kl(this.toBuffer(a),this.toBuffer(i));return this.toArrayBuffer(l)}},Ha=new za,vi=function(i,a){var l="aes",o=256,u="cbc",f=16;function m(H){if(H.algorithm==="aes"&&H.mode==="cbc"){if(H.keyLength===128||H.keyLength===256)return;throw new Error("Unsupported key length "+H.keyLength+" for aes-cbc encryption. Encryption key must be 128 or 256 bits (16 or 32 ASCII characters)")}}function p(H){return H.replace("_","/").replace("-","+")}function T(H){return H instanceof S}class S{constructor(x,Y,P,tt){this.algorithm=x,this.keyLength=Y,this.mode=P,this.key=tt}}class L{static getDefaultParams(x){var Y;if(!x.key)throw new Error("Crypto.getDefaultParams: a key is required");typeof x.key=="string"?Y=a.toArrayBuffer(a.base64Decode(p(x.key))):x.key instanceof ArrayBuffer?Y=x.key:Y=a.toArrayBuffer(x.key);var P=x.algorithm||l,tt=Y.byteLength*8,St=x.mode||u,Ct=new S(P,tt,St,Y);if(x.keyLength&&x.keyLength!==Ct.keyLength)throw new Error("Crypto.getDefaultParams: a keyLength of "+x.keyLength+" was specified, but the key actually has length "+Ct.keyLength);return m(Ct),Ct}static async generateRandomKey(x){try{return i.getRandomArrayBuffer((x||o)/8)}catch(Y){throw new M("Failed to generate random key: "+Y.message,400,5e4,Y)}}static getCipher(x,Y){var P,tt=T(x)?x:this.getDefaultParams(x);return{cipherParams:tt,cipher:new k(tt,(P=x.iv)!=null?P:null,Y)}}}L.CipherParams=S;class k{constructor(x,Y,P){if(this.logger=P,!crypto.subtle)throw isSecureContext?new Error("Crypto operations are not possible since the browser’s SubtleCrypto class is unavailable (reason unknown)."):new Error("Crypto operations are is not possible since the current environment is a non-secure context and hence the browser’s SubtleCrypto class is not available.");this.algorithm=x.algorithm+"-"+String(x.keyLength)+"-"+x.mode,this.webCryptoAlgorithm=x.algorithm+"-"+x.mode,this.key=a.toArrayBuffer(x.key),this.iv=Y?a.toArrayBuffer(Y):null}concat(x,Y){const P=new ArrayBuffer(x.byteLength+Y.byteLength),tt=new DataView(P),St=new DataView(a.toArrayBuffer(x));for(let Ut=0;Ut<St.byteLength;Ut++)tt.setInt8(Ut,St.getInt8(Ut));const Ct=new DataView(a.toArrayBuffer(Y));for(let Ut=0;Ut<Ct.byteLength;Ut++)tt.setInt8(St.byteLength+Ut,Ct.getInt8(Ut));return P}async encrypt(x){h.logAction(this.logger,h.LOG_MICRO,"CBCCipher.encrypt()","");const Y=await this.getIv(),P=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["encrypt"]),tt=await crypto.subtle.encrypt({name:this.webCryptoAlgorithm,iv:Y},P,x);return this.concat(Y,tt)}async decrypt(x){h.logAction(this.logger,h.LOG_MICRO,"CBCCipher.decrypt()","");const Y=a.toArrayBuffer(x),P=Y.slice(0,f),tt=Y.slice(f),St=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["decrypt"]);return crypto.subtle.decrypt({name:this.webCryptoAlgorithm,iv:P},St,tt)}async getIv(){if(this.iv){var x=this.iv;return this.iv=null,x}const Y=await i.getRandomArrayBuffer(f);return a.toArrayBuffer(Y)}}return L},fe=(i=>(i[i.REQ_SEND=0]="REQ_SEND",i[i.REQ_RECV=1]="REQ_RECV",i[i.REQ_RECV_POLL=2]="REQ_RECV_POLL",i[i.REQ_RECV_STREAM=3]="REQ_RECV_STREAM",i))(fe||{}),Qe=fe;function xl(){return new M("No HTTP request plugin provided. Provide at least one of the FetchRequest or XHRRequest plugins.",400,4e4)}var ja,So=(ja=class{constructor(i){this.checksInProgress=null,this.checkConnectivity=void 0,this.supportsAuthHeaders=!1,this.supportsLinkHeaders=!1;var a;this.client=i??null;const l=i?.options.connectivityCheckUrl||at.connectivityCheckUrl,o=(a=i?.options.connectivityCheckParams)!=null?a:null,u=!i?.options.connectivityCheckUrl,f=ht(ht({},So.bundledRequestImplementations),i?._additionalHTTPRequestImplementations),m=f.XHRRequest,p=f.FetchRequest,T=!!(m||p);if(!T)throw xl();w.Config.xhrSupported&&m?(this.supportsAuthHeaders=!0,this.Request=async function(S,L,k,H,x){return new Promise(Y=>{var P;const tt=m.createRequest(L,k,H,x,Qe.REQ_SEND,(P=i&&i.options.timeouts)!=null?P:null,this.logger,S);tt.once("complete",(St,Ct,Ut,st,Be)=>Y({error:St,body:Ct,headers:Ut,unpacked:st,statusCode:Be})),tt.exec()})},i?.options.disableConnectivityCheck?this.checkConnectivity=async function(){return!0}:this.checkConnectivity=async function(){var S;h.logAction(this.logger,h.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Sending; "+l);const L=await this.doUri(Pt.Get,l,null,null,o);let k=!1;return u?k=!L.error&&((S=L.body)==null?void 0:S.replace(/\n/,""))=="yes":k=!L.error&&vc(L.statusCode),h.logAction(this.logger,h.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Result: "+k),k}):w.Config.fetchSupported&&p?(this.supportsAuthHeaders=!0,this.Request=async(S,L,k,H,x)=>p(S,i??null,L,k,H,x),i?.options.disableConnectivityCheck?this.checkConnectivity=async function(){return!0}:this.checkConnectivity=async function(){var S;h.logAction(this.logger,h.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Sending; "+l);const L=await this.doUri(Pt.Get,l,null,null,null),k=!L.error&&((S=L.body)==null?void 0:S.replace(/\n/,""))=="yes";return h.logAction(this.logger,h.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Result: "+k),k}):this.Request=async()=>({error:T?new Rt("no supported HTTP transports available",null,400):xl()})}get logger(){var i,a;return(a=(i=this.client)==null?void 0:i.logger)!=null?a:h.defaultLogger}async doUri(i,a,l,o,u){return this.Request?this.Request(i,a,l,u,o):{error:new Rt("Request invoked before assigned to",null,500)}}shouldFallback(i){const a=i.statusCode;return a===408&&!i.code||a===400&&!i.code||a>=500&&a<=504}},ja.methods=[Pt.Get,Pt.Delete,Pt.Post,Pt.Put,Pt.Patch],ja.methodsWithoutBody=[Pt.Get,Pt.Delete],ja.methodsWithBody=[Pt.Post,Pt.Put,Pt.Patch],ja),Ao=So,jt="ablyjs-storage-test",In=typeof Aa<"u"?Aa:typeof window<"u"?window:self,Va=class{constructor(){try{In.sessionStorage.setItem(jt,jt),In.sessionStorage.removeItem(jt),this.sessionSupported=!0}catch{this.sessionSupported=!1}try{In.localStorage.setItem(jt,jt),In.localStorage.removeItem(jt),this.localSupported=!0}catch{this.localSupported=!1}}get(i){return this._get(i,!1)}getSession(i){return this._get(i,!0)}remove(i){return this._remove(i,!1)}removeSession(i){return this._remove(i,!0)}set(i,a,l){return this._set(i,a,l,!1)}setSession(i,a,l){return this._set(i,a,l,!0)}_set(i,a,l,o){const u={value:a};return l&&(u.expires=Date.now()+l),this.storageInterface(o).setItem(i,JSON.stringify(u))}_get(i,a){if(a&&!this.sessionSupported)throw new Error("Session Storage not supported");if(!a&&!this.localSupported)throw new Error("Local Storage not supported");const l=this.storageInterface(a).getItem(i);if(!l)return null;const o=JSON.parse(l);return o.expires&&o.expires<Date.now()?(this.storageInterface(a).removeItem(i),null):o.value}_remove(i,a){return this.storageInterface(a).removeItem(i)}storageInterface(i){return i?In.sessionStorage:In.localStorage}},Fi=new Va,Xt=gn(),$i=typeof EdgeRuntime=="string";typeof Window>"u"&&typeof WorkerGlobalScope>"u"&&!$i&&console.log("Warning: this distribution of Ably is intended for browsers. On nodejs, please use the 'ably' package on npm");function ta(){const i=Xt.location;return!Xt.WebSocket||!i||!i.origin||i.origin.indexOf("http")>-1}function jc(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}var Oo=Xt.navigator&&Xt.navigator.userAgent.toString(),Vc=Xt.location&&Xt.location.href,To={agent:"browser",logTimestamps:!0,userAgent:Oo,currentUrl:Vc,binaryType:"arraybuffer",WebSocket:Xt.WebSocket,fetchSupported:!!Xt.fetch,xhrSupported:Xt.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,allowComet:ta(),useProtocolHeartbeats:!0,supportsBinary:!!Xt.TextDecoder,preferBinary:!1,ArrayBuffer:Xt.ArrayBuffer,atob:Xt.atob,nextTick:typeof Xt.queueMicrotask=="function"?i=>Xt.queueMicrotask(i):i=>Promise.resolve().then(i),addEventListener:Xt.addEventListener,inspect:JSON.stringify,stringByteSize:function(i){return Xt.TextDecoder&&new Xt.TextEncoder().encode(i).length||i.length},TextEncoder:Xt.TextEncoder,TextDecoder:Xt.TextDecoder,getRandomArrayBuffer:async function(i){const a=new Uint8Array(i);return Xt.crypto.getRandomValues(a),a.buffer},isWebworker:jc(),push:{platform:"browser",formFactor:"desktop",storage:Fi}},Yn=To;function Bl(i){const a=[80015,80017,80030];return i.code?an.isTokenErr(i)?!1:a.includes(i.code)?!0:i.code>=4e4&&i.code<5e4:!1}function ea(i){return Bl(i)?[Me({action:Z.ERROR,error:i})]:[Me({action:Z.DISCONNECTED,error:i})]}var Ro=class extends bn{constructor(i,a,l){super(i,a,l,!0),this.onAuthUpdated=o=>{this.authParams={access_token:o.token}},this.stream="stream"in l?l.stream:!0,this.sendRequest=null,this.recvRequest=null,this.pendingCallback=null,this.pendingItems=null}connect(){h.logAction(this.logger,h.LOG_MINOR,"CometTransport.connect()","starting"),bn.prototype.connect.call(this);const i=this.params,a=i.options,l=i.host||a.primaryDomain,o=at.getPort(a),u=a.tls?"https://":"http://";this.baseUri=u+l+":"+o+"/comet/";const f=this.baseUri+"connect";h.logAction(this.logger,h.LOG_MINOR,"CometTransport.connect()","uri: "+f),xt(this.auth.getAuthParams(),(m,p)=>{if(m){this.disconnect(m);return}if(this.isDisposed)return;this.authParams=p;const T=this.params.getConnectParams(p);"stream"in T&&(this.stream=T.stream),h.logAction(this.logger,h.LOG_MINOR,"CometTransport.connect()","connectParams:"+Oa(T));let S=!1;const L=this.recvRequest=this.createRequest(f,null,T,null,this.stream?Qe.REQ_RECV_STREAM:Qe.REQ_RECV);L.on("data",k=>{this.recvRequest&&(S||(S=!0,this.emit("preconnect")),this.onData(k))}),L.on("complete",k=>{if(this.recvRequest||(k=k||new M("Request cancelled",80003,400)),this.recvRequest=null,!S&&!k&&(S=!0,this.emit("preconnect")),this.onActivity(),k){k.code?this.onData(ea(k)):this.disconnect(k);return}w.Config.nextTick(()=>{this.recv()})}),L.exec()})}requestClose(){h.logAction(this.logger,h.LOG_MINOR,"CometTransport.requestClose()"),this._requestCloseOrDisconnect(!0)}requestDisconnect(){h.logAction(this.logger,h.LOG_MINOR,"CometTransport.requestDisconnect()"),this._requestCloseOrDisconnect(!1)}_requestCloseOrDisconnect(i){const a=i?this.closeUri:this.disconnectUri;if(a){const l=this.createRequest(a,null,this.authParams,null,Qe.REQ_SEND);l.on("complete",o=>{o&&(h.logAction(this.logger,h.LOG_ERROR,"CometTransport.request"+(i?"Close()":"Disconnect()"),"request returned err = "+_t(o)),this.finish("disconnected",o))}),l.exec()}}dispose(){h.logAction(this.logger,h.LOG_MINOR,"CometTransport.dispose()",""),this.isDisposed||(this.isDisposed=!0,this.recvRequest&&(h.logAction(this.logger,h.LOG_MINOR,"CometTransport.dispose()","aborting recv request"),this.recvRequest.abort(),this.recvRequest=null),this.finish("disconnected",re.disconnected()),w.Config.nextTick(()=>{this.emit("disposed")}))}onConnect(i){var a;if(this.isDisposed)return;const l=(a=i.connectionDetails)==null?void 0:a.connectionKey;bn.prototype.onConnect.call(this,i);const o=this.baseUri+l;h.logAction(this.logger,h.LOG_MICRO,"CometTransport.onConnect()","baseUri = "+o),this.sendUri=o+"/send",this.recvUri=o+"/recv",this.closeUri=o+"/close",this.disconnectUri=o+"/disconnect"}send(i){if(this.sendRequest){this.pendingItems=this.pendingItems||[],this.pendingItems.push(i);return}const a=this.pendingItems||[];a.push(i),this.pendingItems=null,this.sendItems(a)}sendAnyPending(){const i=this.pendingItems;i&&(this.pendingItems=null,this.sendItems(i))}sendItems(i){const a=this.sendRequest=this.createRequest(this.sendUri,null,this.authParams,this.encodeRequest(i),Qe.REQ_SEND);a.on("complete",(l,o)=>{if(l&&h.logAction(this.logger,h.LOG_ERROR,"CometTransport.sendItems()","on complete: err = "+_t(l)),this.sendRequest=null,l){l.code?this.onData(ea(l)):this.disconnect(l);return}o&&this.onData(o),this.pendingItems&&w.Config.nextTick(()=>{this.sendRequest||this.sendAnyPending()})}),a.exec()}recv(){if(this.recvRequest||!this.isConnected)return;const i=this.recvRequest=this.createRequest(this.recvUri,null,this.authParams,null,this.stream?Qe.REQ_RECV_STREAM:Qe.REQ_RECV_POLL);i.on("data",a=>{this.onData(a)}),i.on("complete",a=>{if(this.recvRequest=null,this.onActivity(),a){a.code?this.onData(ea(a)):this.disconnect(a);return}w.Config.nextTick(()=>{this.recv()})}),i.exec()}onData(i){try{const a=this.decodeResponse(i);if(a&&a.length)for(let l=0;l<a.length;l++)this.onProtocolMessage(Os(a[l],this.connectionManager.realtime._RealtimePresence,this.connectionManager.realtime._Annotations,this.connectionManager.realtime._objectsPlugin))}catch(a){h.logAction(this.logger,h.LOG_ERROR,"CometTransport.onData()","Unexpected exception handing channel event: "+a.stack)}}encodeRequest(i){return JSON.stringify(i)}decodeResponse(i){return typeof i=="string"?JSON.parse(i):i}},Ia=Ro;function _o(i,a){return el(ei(a)).includes("x-ably-errorcode")}function Us(i,a){if(_o(i,a))return i.error&&M.fromValues(i.error)}var ql=function(){},Eo=0,Ya={};function Co(i,a){return i.getResponseHeader&&i.getResponseHeader(a)}function Pa(i){return i.getResponseHeader&&(i.getResponseHeader("transfer-encoding")||!i.getResponseHeader("content-length"))}function Mo(i){const a=i.getAllResponseHeaders().trim().split(`\r
`),l={};for(let o=0;o<a.length;o++){const u=a[o].split(":").map(f=>f.trim());l[u[0].toLowerCase()]=u[1]}return l}var wo=class Zd extends ee{constructor(a,l,o,u,f,m,p,T){super(p),o=o||{},o.rnd=ss(),this.uri=a+Oa(o),this.headers=l||{},this.body=u,this.method=T?T.toUpperCase():j(u)?"GET":"POST",this.requestMode=f,this.timeouts=m,this.timedOut=!1,this.requestComplete=!1,this.id=String(++Eo),Ya[this.id]=this}static createRequest(a,l,o,u,f,m,p,T){const S=m||at.TIMEOUTS;return new Zd(a,l,F(o),u,f,S,p,T)}complete(a,l,o,u,f){this.requestComplete||(this.requestComplete=!0,!a&&l&&this.emit("data",l),this.emit("complete",a,l,o,u,f),this.dispose())}abort(){this.dispose()}exec(){let a=this.headers;const l=this.requestMode==Qe.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout,o=this.timer=setTimeout(()=>{this.timedOut=!0,f.abort()},l),u=this.method,f=this.xhr=new XMLHttpRequest,m=a.accept;let p=this.body,T="text";m?m.indexOf("application/x-msgpack")===0&&(T="arraybuffer"):a.accept="application/json",p&&(a["content-type"]||(a["content-type"]="application/json")).indexOf("application/json")>-1&&typeof p!="string"&&(p=JSON.stringify(p)),f.open(u,this.uri,!0),f.responseType=T,"authorization"in a&&(f.withCredentials=!0);for(const st in a)f.setRequestHeader(st,a[st]);const S=(st,Be,he,aa)=>{var Ai;let Za=Be+" (event type: "+st.type+")";(Ai=this==null?void 0:this.xhr)!=null&&Ai.statusText&&(Za+=", current statusText is "+this.xhr.statusText),h.logAction(this.logger,h.LOG_ERROR,"Request.on"+st.type+"()",Za),this.complete(new Rt(Za,he,aa))};f.onerror=st=>{S(st,"XHR error occurred",null,400)},f.onabort=st=>{this.timedOut?S(st,"Request aborted due to request timeout expiring",null,408):S(st,"Request cancelled",null,400)},f.ontimeout=st=>{S(st,"Request timed out",null,408)};let L,k,H,x=0,Y=!1;const P=()=>{if(clearTimeout(o),H=k<400,k==204){this.complete(null,null,null,null,k);return}L=this.requestMode==Qe.REQ_RECV_STREAM&&H&&Pa(f)},tt=()=>{let st;try{const he=Co(f,"content-type");if(he?he.indexOf("application/json")>=0:f.responseType=="text"){const Ai=f.responseType==="arraybuffer"?w.BufferUtils.utf8Decode(f.response):String(f.responseText);Ai.length?st=JSON.parse(Ai):st=Ai,Y=!0}else st=f.response;st.response!==void 0?(k=st.statusCode,H=k<400,a=st.headers,st=st.response):a=Mo(f)}catch(he){this.complete(new Rt("Malformed response body from server: "+he.message,null,400));return}if(H||Array.isArray(st)){this.complete(null,st,a,Y,k);return}let Be=Us(st,a);Be||(Be=new Rt("Error response received from server: "+k+" body was: "+w.Config.inspect(st),null,k)),this.complete(Be,st,a,Y,k)};function St(){const st=f.responseText,Be=st.length-1;let he,aa;for(;x<Be&&(he=st.indexOf(`
`,x))>-1;)aa=st.slice(x,he),x=he+1,Ct(aa)}const Ct=st=>{try{st=JSON.parse(st)}catch(Be){this.complete(new Rt("Malformed response body from server: "+Be.message,null,400));return}this.emit("data",st)},Ut=()=>{St(),this.streamComplete=!0,w.Config.nextTick(()=>{this.complete()})};f.onreadystatechange=()=>{const st=f.readyState;st<3||f.status!==0&&(k===void 0&&(k=f.status,P()),st==3&&L?St():st==4&&(L?Ut():tt()))},f.send(p)}dispose(){const a=this.xhr;if(a){a.onreadystatechange=a.onerror=a.onabort=a.ontimeout=ql,this.xhr=null;const l=this.timer;l&&(clearTimeout(l),this.timer=null),this.requestComplete||a.abort()}delete Ya[this.id]}},wn=wo,Ns=me.XhrPolling,Gl=class extends Ia{constructor(i,a,l){super(i,a,l),this.shortName=Ns,l.stream=!1,this.shortName=Ns}static isAvailable(){return!!(w.Config.xhrSupported&&w.Config.allowComet)}toString(){return"XHRPollingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected}createRequest(i,a,l,o,u){return wn.createRequest(i,a,l,o,u,this.timeouts,this.logger)}},Pn=Gl,Qn=["xhr_polling"],Qa={order:Qn,bundledImplementations:{web_socket:pe,xhr_polling:Pn}},zl=Qa,Hl={connectivityCheckUrl:"https://internet-up.ably-realtime.com/is-the-internet-up.txt",wsConnectivityCheckUrl:"wss://ws-up.ably-realtime.com",defaultTransports:[me.XhrPolling,me.WebSocket]},Xa=Hl;function Ka(i){if(i===void 0)return"undefined";let a,l;if(i instanceof ArrayBuffer?(l="ArrayBuffer",a=new DataView(i)):i instanceof DataView&&(l="DataView",a=i),!a)return JSON.stringify(i);const o=[];for(let u=0;u<i.byteLength;u++){if(u>20){o.push("...");break}let f=a.getUint8(u).toString(16);f.length===1&&(f="0"+f),o.push(f)}return"<"+l+" "+o.join(" ")+">"}function na(i,a,l){for(let o=0,u=l.length;o<u;o++){const f=l.charCodeAt(o);if(f<128){i.setUint8(a++,f>>>0&127|0);continue}if(f<2048){i.setUint8(a++,f>>>6&31|192),i.setUint8(a++,f>>>0&63|128);continue}if(f<65536){i.setUint8(a++,f>>>12&15|224),i.setUint8(a++,f>>>6&63|128),i.setUint8(a++,f>>>0&63|128);continue}if(f<1114112){i.setUint8(a++,f>>>18&7|240),i.setUint8(a++,f>>>12&63|128),i.setUint8(a++,f>>>6&63|128),i.setUint8(a++,f>>>0&63|128);continue}throw new Error("bad codepoint "+f)}}function jl(i,a,l){let o="";for(let u=a,f=a+l;u<f;u++){const m=i.getUint8(u);if((m&128)===0){o+=String.fromCharCode(m);continue}if((m&224)===192){o+=String.fromCharCode((m&15)<<6|i.getUint8(++u)&63);continue}if((m&240)===224){o+=String.fromCharCode((m&15)<<12|(i.getUint8(++u)&63)<<6|(i.getUint8(++u)&63)<<0);continue}if((m&248)===240){o+=String.fromCharCode((m&7)<<18|(i.getUint8(++u)&63)<<12|(i.getUint8(++u)&63)<<6|(i.getUint8(++u)&63)<<0);continue}throw new Error("Invalid byte "+m.toString(16))}return o}function Xn(i){let a=0;for(let l=0,o=i.length;l<o;l++){const u=i.charCodeAt(l);if(u<128){a+=1;continue}if(u<2048){a+=2;continue}if(u<65536){a+=3;continue}if(u<1114112){a+=4;continue}throw new Error("bad codepoint "+u)}return a}function Ds(i,a){const l=Zn(i,a);if(l===0)return;const o=new ArrayBuffer(l),u=new DataView(o);return We(i,u,0,a),o}var Ls=65536*65536,ks=1/Ls;function Vl(i,a){return a=a||0,i.getInt32(a)*Ls+i.getUint32(a+4)}function Kn(i,a){return a=a||0,i.getUint32(a)*Ls+i.getUint32(a+4)}function dt(i,a,l){l<9223372036854776e3?(i.setInt32(a,Math.floor(l*ks)),i.setInt32(a+4,l&-1)):(i.setUint32(a,2147483647),i.setUint32(a+4,2147483647))}function wt(i,a,l){l<18446744073709552e3?(i.setUint32(a,Math.floor(l*ks)),i.setInt32(a+4,l&-1)):(i.setUint32(a,4294967295),i.setUint32(a+4,4294967295))}var $t=class{constructor(i,a){this.map=l=>{const o={};for(let u=0;u<l;u++){const f=this.parse();o[f]=this.parse()}return o},this.bin=l=>{const o=new ArrayBuffer(l);return new Uint8Array(o).set(new Uint8Array(this.view.buffer,this.offset,l),0),this.offset+=l,o},this.buf=this.bin,this.str=l=>{const o=jl(this.view,this.offset,l);return this.offset+=l,o},this.array=l=>{const o=new Array(l);for(let u=0;u<l;u++)o[u]=this.parse();return o},this.ext=l=>(this.offset+=l,{type:this.view.getInt8(this.offset),data:this.buf(l)}),this.parse=()=>{const l=this.view.getUint8(this.offset);let o,u;if((l&128)===0)return this.offset++,l;if((l&240)===128)return u=l&15,this.offset++,this.map(u);if((l&240)===144)return u=l&15,this.offset++,this.array(u);if((l&224)===160)return u=l&31,this.offset++,this.str(u);if((l&224)===224)return o=this.view.getInt8(this.offset),this.offset++,o;switch(l){case 192:return this.offset++,null;case 193:this.offset++;return;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 196:return u=this.view.getUint8(this.offset+1),this.offset+=2,this.bin(u);case 197:return u=this.view.getUint16(this.offset+1),this.offset+=3,this.bin(u);case 198:return u=this.view.getUint32(this.offset+1),this.offset+=5,this.bin(u);case 199:return u=this.view.getUint8(this.offset+1),this.offset+=2,this.ext(u);case 200:return u=this.view.getUint16(this.offset+1),this.offset+=3,this.ext(u);case 201:return u=this.view.getUint32(this.offset+1),this.offset+=5,this.ext(u);case 202:return o=this.view.getFloat32(this.offset+1),this.offset+=5,o;case 203:return o=this.view.getFloat64(this.offset+1),this.offset+=9,o;case 204:return o=this.view.getUint8(this.offset+1),this.offset+=2,o;case 205:return o=this.view.getUint16(this.offset+1),this.offset+=3,o;case 206:return o=this.view.getUint32(this.offset+1),this.offset+=5,o;case 207:return o=Kn(this.view,this.offset+1),this.offset+=9,o;case 208:return o=this.view.getInt8(this.offset+1),this.offset+=2,o;case 209:return o=this.view.getInt16(this.offset+1),this.offset+=3,o;case 210:return o=this.view.getInt32(this.offset+1),this.offset+=5,o;case 211:return o=Vl(this.view,this.offset+1),this.offset+=9,o;case 212:return u=1,this.offset++,this.ext(u);case 213:return u=2,this.offset++,this.ext(u);case 214:return u=4,this.offset++,this.ext(u);case 215:return u=8,this.offset++,this.ext(u);case 216:return u=16,this.offset++,this.ext(u);case 217:return u=this.view.getUint8(this.offset+1),this.offset+=2,this.str(u);case 218:return u=this.view.getUint16(this.offset+1),this.offset+=3,this.str(u);case 219:return u=this.view.getUint32(this.offset+1),this.offset+=5,this.str(u);case 220:return u=this.view.getUint16(this.offset+1),this.offset+=3,this.array(u);case 221:return u=this.view.getUint32(this.offset+1),this.offset+=5,this.array(u);case 222:return u=this.view.getUint16(this.offset+1),this.offset+=3,this.map(u);case 223:return u=this.view.getUint32(this.offset+1),this.offset+=5,this.map(u)}throw new Error("Unknown type 0x"+l.toString(16))},this.offset=a||0,this.view=i}};function xs(i){const a=new DataView(i),l=new $t(a),o=l.parse();if(l.offset!==i.byteLength)throw new Error(i.byteLength-l.offset+" trailing bytes");return o}function bi(i,a){return Object.keys(i).filter(function(l){const o=i[l],u=typeof o;return(!a||o!=null)&&(u!=="function"||!!o.toJSON)})}function We(i,a,l,o){const u=typeof i;if(typeof i=="string"){const f=Xn(i);if(f<32)return a.setUint8(l,f|160),na(a,l+1,i),1+f;if(f<256)return a.setUint8(l,217),a.setUint8(l+1,f),na(a,l+2,i),2+f;if(f<65536)return a.setUint8(l,218),a.setUint16(l+1,f),na(a,l+3,i),3+f;if(f<4294967296)return a.setUint8(l,219),a.setUint32(l+1,f),na(a,l+5,i),5+f}if(ArrayBuffer.isView&&ArrayBuffer.isView(i)&&(i=i.buffer),i instanceof ArrayBuffer){const f=i.byteLength;if(f<256)return a.setUint8(l,196),a.setUint8(l+1,f),new Uint8Array(a.buffer).set(new Uint8Array(i),l+2),2+f;if(f<65536)return a.setUint8(l,197),a.setUint16(l+1,f),new Uint8Array(a.buffer).set(new Uint8Array(i),l+3),3+f;if(f<4294967296)return a.setUint8(l,198),a.setUint32(l+1,f),new Uint8Array(a.buffer).set(new Uint8Array(i),l+5),5+f}if(typeof i=="number"){if(Math.floor(i)!==i)return a.setUint8(l,203),a.setFloat64(l+1,i),9;if(i>=0){if(i<128)return a.setUint8(l,i),1;if(i<256)return a.setUint8(l,204),a.setUint8(l+1,i),2;if(i<65536)return a.setUint8(l,205),a.setUint16(l+1,i),3;if(i<4294967296)return a.setUint8(l,206),a.setUint32(l+1,i),5;if(i<18446744073709552e3)return a.setUint8(l,207),wt(a,l+1,i),9;throw new Error("Number too big 0x"+i.toString(16))}if(i>=-32)return a.setInt8(l,i),1;if(i>=-128)return a.setUint8(l,208),a.setInt8(l+1,i),2;if(i>=-32768)return a.setUint8(l,209),a.setInt16(l+1,i),3;if(i>=-2147483648)return a.setUint8(l,210),a.setInt32(l+1,i),5;if(i>=-9223372036854776e3)return a.setUint8(l,211),dt(a,l+1,i),9;throw new Error("Number too small -0x"+(-i).toString(16).substr(1))}if(u==="undefined")return o?0:(a.setUint8(l,212),a.setUint8(l+1,0),a.setUint8(l+2,0),3);if(i===null)return o?0:(a.setUint8(l,192),1);if(u==="boolean")return a.setUint8(l,i?195:194),1;if(typeof i.toJSON=="function")return We(i.toJSON(),a,l,o);if(u==="object"){let f,m=0,p;const T=Array.isArray(i);if(T?f=i.length:(p=bi(i,o),f=p.length),f<16?(a.setUint8(l,f|(T?144:128)),m=1):f<65536?(a.setUint8(l,T?220:222),a.setUint16(l+1,f),m=3):f<4294967296&&(a.setUint8(l,T?221:223),a.setUint32(l+1,f),m=5),T)for(let S=0;S<f;S++)m+=We(i[S],a,l+m,o);else if(p)for(let S=0;S<f;S++){const L=p[S];m+=We(L,a,l+m),m+=We(i[L],a,l+m,o)}return m}if(u==="function")return 0;throw new Error("Unknown type "+u)}function Zn(i,a){const l=typeof i;if(l==="string"){const o=Xn(i);if(o<32)return 1+o;if(o<256)return 2+o;if(o<65536)return 3+o;if(o<4294967296)return 5+o}if(ArrayBuffer.isView&&ArrayBuffer.isView(i)&&(i=i.buffer),i instanceof ArrayBuffer){const o=i.byteLength;if(o<256)return 2+o;if(o<65536)return 3+o;if(o<4294967296)return 5+o}if(typeof i=="number"){if(Math.floor(i)!==i)return 9;if(i>=0){if(i<128)return 1;if(i<256)return 2;if(i<65536)return 3;if(i<4294967296)return 5;if(i<18446744073709552e3)return 9;throw new Error("Number too big 0x"+i.toString(16))}if(i>=-32)return 1;if(i>=-128)return 2;if(i>=-32768)return 3;if(i>=-2147483648)return 5;if(i>=-9223372036854776e3)return 9;throw new Error("Number too small -0x"+i.toString(16).substr(1))}if(l==="boolean")return 1;if(i===null)return a?0:1;if(i===void 0)return a?0:3;if(typeof i.toJSON=="function")return Zn(i.toJSON(),a);if(l==="object"){let o,u=0;if(Array.isArray(i)){o=i.length;for(let f=0;f<o;f++)u+=Zn(i[f],a)}else{const f=bi(i,a);o=f.length;for(let m=0;m<o;m++){const p=f[m];u+=Zn(p)+Zn(i[p],a)}}if(o<16)return 1+u;if(o<65536)return 3+u;if(o<4294967296)return 5+u;throw new Error("Array or object too long 0x"+o.toString(16))}if(l==="function")return 0;throw new Error("Unknown type "+l)}var Si={encode:Ds,decode:xs,inspect:Ka,utf8Write:na,utf8Read:jl,utf8ByteCount:Xn};function ia(i,a){return!!a.get("x-ably-errorcode")}function Ic(i,a){if(ia(i,a))return i.error&&M.fromValues(i.error)}function Zt(i){const a={};return i.forEach((l,o)=>{a[o]=l}),a}async function Il(i,a,l,o,u,f){const m=new Headers(o||{}),p=i?i.toUpperCase():j(f)?"GET":"POST",T=new AbortController;let S;const L=new Promise(x=>{S=setTimeout(()=>{T.abort(),x({error:new Rt("Request timed out",null,408)})},a?a.options.timeouts.httpRequestTimeout:at.TIMEOUTS.httpRequestTimeout)}),k={method:p,headers:m,body:f,signal:T.signal};w.Config.isWebworker||(k.credentials=m.has("authorization")?"include":"same-origin");const H=(async()=>{try{const x=new URLSearchParams(u||{});x.set("rnd",ss());const Y=l+"?"+x,P=await gn().fetch(Y,k);if(clearTimeout(S),P.status==204)return{error:null,statusCode:P.status};const tt=P.headers.get("Content-Type");let St;tt&&tt.indexOf("application/x-msgpack")>-1?St=await P.arrayBuffer():tt&&tt.indexOf("application/json")>-1?St=await P.json():St=await P.text();const Ct=!!tt&&tt.indexOf("application/x-msgpack")===-1,Ut=Zt(P.headers);return P.ok?{error:null,body:St,headers:Ut,unpacked:Ct,statusCode:P.status}:{error:Ic(St,P.headers)||new Rt("Error response received from server: "+P.status+" body was: "+w.Config.inspect(St),null,P.status),body:St,headers:Ut,unpacked:Ct,statusCode:P.status}}catch(x){return clearTimeout(S),{error:x}}})();return Promise.race([L,H])}var Yl={XHRRequest:wn,FetchRequest:Il},Pl=vi(Yn,Ha);w.Crypto=Pl,w.BufferUtils=Ha,w.Http=Ao,w.Config=Yn,w.Transports=zl,w.WebStorage=Fi;for(const i of[Rs,Rn])i.Crypto=Pl,i._MsgPack=Si;Ao.bundledRequestImplementations=Yl,h.initLogHandlers(),w.Defaults=Nr(Xa),w.Config.agent&&(w.Defaults.agent+=" "+w.Config.agent);var Uo={ErrorInfo:M,Rest:Rs,Realtime:Rn,msgpack:Si,makeProtocolMessageFromDeserialized:Rl};if(typeof R.exports=="object"&&typeof it=="object"){var Yc=(i,a,l,o)=>{if(a&&typeof a=="object"||typeof a=="function")for(let u of Object.getOwnPropertyNames(a))!Object.prototype.hasOwnProperty.call(i,u)&&u!==l&&Object.defineProperty(i,u,{get:()=>a[u],enumerable:!(o=Object.getOwnPropertyDescriptor(a,u))||o.enumerable});return i};R.exports=Yc(R.exports,it)}return R.exports})})(gc)),gc.exports}var ym=pm();class vm{constructor(){this.ably=new ym.Realtime({key:"xh6GjQ.aoWDow:Rbt4EwirQNUEJzjyawyoFwwm7HkimRAJj189DIwIEP4",clientId:null}),this.currentChannel=null,this.currentUser=null,this.messageCallbacks=new Set}init(ft){this.currentUser=ft,this.ably.auth.requestToken({clientId:ft.userName})}isRealTimeAvailable(ft,it){const R=["aakku","ccn"],K=this.currentUser?.userName;return R.includes(K)&&(K==="aakku"&&it===2||K==="ccn"&&it===1)}getChannelName(ft,it){const R=[ft,it].sort();return`chat:${R[0]}-${R[1]}`}subscribeToChat(ft,it,R){if(!this.isRealTimeAvailable(this.currentUser?.id,it))return console.log("Real-time messaging not available for this chat"),null;const K=this.getChannelName(this.currentUser.id,it);return this.currentChannel&&this.currentChannel.unsubscribe(),this.currentChannel=this.ably.channels.get(K),this.currentChannel.subscribe("message",ct=>{ct.clientId!==this.currentUser.userName&&R(ct.data)}),this.messageCallbacks.add(R),console.log(`Subscribed to channel: ${K}`),this.currentChannel}async sendMessage(ft,it){if(!this.isRealTimeAvailable(this.currentUser?.id,ft))return console.log("Real-time messaging not available for this chat"),!1;const R=this.getChannelName(this.currentUser.id,ft),K=this.ably.channels.get(R);try{return await K.publish("message",{...it,senderId:this.currentUser.id,senderName:this.currentUser.userName,timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),isOwn:!1}),console.log(`Message sent via Ably to channel: ${R}`),!0}catch(ct){return console.error("Failed to send message via Ably:",ct),!1}}unsubscribe(){this.currentChannel&&(this.currentChannel.unsubscribe(),this.currentChannel=null),this.messageCallbacks.clear()}close(){this.unsubscribe(),this.ably.close()}getConnectionState(){return this.ably.connection.state}}const af=new vm,bm=Ze.lazy(()=>pc(()=>import("./Login-D7OzDwTN.js"),__vite__mapDeps([0,1]))),Sm=Ze.lazy(()=>pc(()=>import("./NewUser-NyPveeG4.js"),__vite__mapDeps([2,1]))),Am=Ze.lazy(()=>pc(()=>import("./Home-DX29NHW-.js"),__vite__mapDeps([3,4,5]))),Om=Ze.lazy(()=>pc(()=>import("./Chat-CDV2AL_c.js"),__vite__mapDeps([6,4,7,8])));function Tm(){const[V,ft]=Ze.useState("login"),[it,R]=Ze.useState(null),[K,ct]=Ze.useState(null),[Tt,Nt]=Ze.useState(!0);Ze.useEffect(()=>{const rt=localStorage.getItem("kurawind-user");if(rt)try{const ht=JSON.parse(rt);R(ht),ft("home"),af.init(ht)}catch(ht){console.error("Failed to parse saved user:",ht),localStorage.removeItem("kurawind-user")}Nt(!1)},[]);const J=rt=>{R(rt),ft("home"),localStorage.setItem("kurawind-user",JSON.stringify(rt)),af.init(rt)},D=()=>{R(null),ct(null),ft("login"),localStorage.removeItem("kurawind-user"),af.close()},Q=rt=>{ct(rt),ft("chat")},vt=()=>{ct(null),ft("home")};return Tt?It.jsx("div",{className:"app-container",children:It.jsxs("div",{className:"app-header",children:[It.jsx("h1",{className:"app-title",children:"KuraWind"}),It.jsx("p",{className:"app-subtitle",children:"Loading..."})]})}):V==="chat"&&K?It.jsx(Ze.Suspense,{fallback:It.jsx(nf,{}),children:It.jsx(Om,{chatId:K.id,friendName:K.friendName,friendAvatar:K.avatar,friendOnline:K.online,onBack:vt})}):V==="home"?It.jsx(Ze.Suspense,{fallback:It.jsx(nf,{}),children:It.jsx(Am,{user:it,onLogout:D,onOpenChat:Q})}):It.jsxs("div",{className:"app-container",children:[It.jsxs("div",{className:"app-header",children:[It.jsx("h1",{className:"app-title",children:"KuraWind"}),It.jsx("p",{className:"app-subtitle",children:V==="login"?"Welcome back":"Create your account"})]}),It.jsx(Ze.Suspense,{fallback:It.jsx(nf,{}),children:V==="login"?It.jsx(bm,{onLogin:J}):It.jsx(Sm,{onUserCreated:()=>ft("login")})}),It.jsx("div",{className:"switch-view",children:V==="login"?It.jsxs("p",{children:["Don't have an account?"," ",It.jsx("button",{onClick:()=>ft("signup"),className:"link-button",children:"Sign up"})]}):It.jsxs("p",{children:["Already have an account?"," ",It.jsx("button",{onClick:()=>ft("login"),className:"link-button",children:"Sign in"})]})})]})}hm.createRoot(document.getElementById("root")).render(It.jsx(Ze.StrictMode,{children:It.jsx(Tm,{})}));export{Rm as R,pc as _,af as a,It as j,Ze as r};
